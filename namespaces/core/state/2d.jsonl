{"_at":[1767991016023,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1767985279630,1],"darin@darinsmacstudio.lan"],"claim":[[1767990372771,1],"darin@darinsmacstudio.lan"],"description":[[1767985279630,1],"darin@darinsmacstudio.lan"],"design":[[1767985279630,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1767985279630,1],"darin@darinsmacstudio.lan"],"external_ref":[[1767985279630,1],"darin@darinsmacstudio.lan"],"labels":[[1767985279630,1],"darin@darinsmacstudio.lan"],"priority":[[1767985279630,1],"darin@darinsmacstudio.lan"],"source_repo":[[1767985279630,1],"darin@darinsmacstudio.lan"],"title":[[1767985279630,1],"darin@darinsmacstudio.lan"],"type":[[1767985279630,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] New model file exists (e.g., beads_stateright_models/examples/repl_core_machine.rs) and compiles\n- [ ] Properties cover todo.md Model #1 invariants: no-gap ACK, idempotence, equivocation detection, monotonicity, origin ordering, and reachability\n- [ ] Model explicitly references REALTIME_PLAN.md §9.4/§9.5/§9.6/§9.8 and §0.12 in doc comments\n- [ ] Model runs via cargo run --example repl_core_machine (or equivalent) within reasonable timeout","assignee":"darin@darinsmacstudio.lan","assignee_at":[1767990372771,1],"assignee_expires":1767993972771,"closed_at":[1767991016023,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1767985279630,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nThe current Stateright examples split core replication invariants across multiple tiny models (gap_want, equivocation, watermarks). We need one integrated replication-core model that matches REALTIME_PLAN.md §9.4/§9.5/§9.6/§9.8 and §0.12 so counterexamples map directly to the actual ingest rules.\n\n**Design Notes**\nUse existing toy pieces as seeds: beads_stateright_models/examples/gap_want_machine.rs, beads_stateright_models/examples/equivocation_machine.rs, beads_stateright_models/examples/watermarks_machine.rs, and the shared types in beads_stateright_models/src/spec.rs or realtime_types_sketch.rs.","design":"**Design**\nCreate an integrated Stateright model for the replication core: multi-namespace (core, wf), multi-origin (>=2), unordered delivery, duplication allowed. Implement the Plan §9.4/§9.5 rules: contiguity-only advancement, bounded gap buffering, WANT emission, ACK monotonicity, and equivocation detection. The model should treat the event payload as a token + sha (Plan §0.6) and maintain a small state digest set to enforce idempotence.\n\nTie the model to plan language explicitly in comments: Plan §9.4 EVENTS ordering + contiguity, §9.5 ACK monotonicity, §9.6 WANT semantics, §9.8 gap bounds, §0.12 applied vs durable seen maps (even if durable==applied in this first model). Reuse OriginStreamState-like logic (realtime_types_sketch.rs) or port minimal versions into the model to avoid drift.","id":"bd-hjm.1","labels":["modeling","realtime","stateright"],"priority":1,"status":"closed","title":"Stateright: replication core (gaps/WANT/ACK/seen_map)","type":"feature"}
