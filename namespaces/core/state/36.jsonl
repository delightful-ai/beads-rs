{"_at":[1767993159522,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1767985350339,1],"darin@darinsmacstudio.lan"],"claim":[[1767992966319,1],"darin@darinsmacstudio.lan"],"description":[[1767985350339,1],"darin@darinsmacstudio.lan"],"design":[[1767985350339,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1767985350339,1],"darin@darinsmacstudio.lan"],"external_ref":[[1767985350339,1],"darin@darinsmacstudio.lan"],"labels":[[1767985350339,1],"darin@darinsmacstudio.lan"],"priority":[[1767985350339,1],"darin@darinsmacstudio.lan"],"source_repo":[[1767985350339,1],"darin@darinsmacstudio.lan"],"title":[[1767985350339,1],"darin@darinsmacstudio.lan"],"type":[[1767985350339,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] New model file exists (e.g., beads_stateright_models/examples/wal_crash_recovery_machine.rs) and compiles\n- [ ] Properties cover no origin_seq reuse, receipt honesty, and recovery catch-up (todo.md Model #8)\n- [ ] Model doc comments reference REALTIME_PLAN.md §6.5 and §0.11\n- [ ] Example runs via cargo run --example wal_crash_recovery_machine (or equivalent)","assignee":"darin@darinsmacstudio.lan","assignee_at":[1767992966319,1],"assignee_expires":1767996566319,"closed_at":[1767993159522,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1767985350339,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nCrash consistency and origin_seq uniqueness must hold across the append/fsync/index/apply/receipt pipeline (REALTIME_PLAN.md §6.5). There is no model that explores crash cut points and recovery behavior.\n\n**Design Notes**\nThis is an abstract model of ordering, not a full WAL implementation.","design":"**Design**\nCreate a Stateright model that encodes the durability ordering from Plan §6.5: allocate seq, write record, fsync, index commit, apply, receipt finalize, reply. Allow a crash at each cut point and a recovery step that replays durable records and reconciles PENDING receipts (Plan §0.11).\n\nProperties: no origin_seq reuse after recovery, LocalFsync receipts imply event survives crash, and recovery finds durable-but-unindexed events (todo.md Model #8).\n\nKeep the state small (counters + flags) but align the cut points to the plan language.","id":"bd-hjm.8","labels":["modeling","realtime","stateright"],"priority":2,"status":"closed","title":"Stateright: WAL crash recovery cut points","type":"feature"}
