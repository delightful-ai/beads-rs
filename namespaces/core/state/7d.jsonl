{"_at":[1768081549513,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1768080568102,1],"darin@darinsmacstudio.lan"],"claim":[[1768080578225,1],"darin@darinsmacstudio.lan"],"description":[[1768080568102,1],"darin@darinsmacstudio.lan"],"design":[[1768080568102,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768080568102,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768080568102,1],"darin@darinsmacstudio.lan"],"labels":[[1768080568102,1],"darin@darinsmacstudio.lan"],"priority":[[1768080568102,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768080568102,1],"darin@darinsmacstudio.lan"],"title":[[1768080568102,1],"darin@darinsmacstudio.lan"],"type":[[1768080568102,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@darinsmacstudio.lan","assignee_at":[1768080578225,1],"assignee_expires":1768084178225,"closed_at":[1768081549513,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1768080568102,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nStateright models in `beads_stateright_models` still reflect v0.4 realtime spec (self-hashing envelopes, unknown-key preservation, GC marker events, PENDING/COMMITTED idempotency). REALTIME_PLAN.md v0.5 simplified hashing, removed unknown-key preservation and GitCheckpointed durability, and deferred GC markers. Models should match v0.5.\n\n**Design**\n- Update `beads_stateright_models/src/realtime_types_sketch.rs` to v0.5: hash over EventBody bytes, sha/prev in headers, no unknown-key preservation, no NamespaceGcMarker, no GitCheckpointed.\n- Update toy hashing helpers (`beads_stateright_models/src/toy_codec.rs`) and models (`beads_stateright_models/examples/hash_prev_machine.rs`, `beads_stateright_models/examples/canonical_hash_machine.rs`) to use v0.5 hash/prev semantics.\n- Update idempotency model (`beads_stateright_models/examples/idempotency_receipt_machine.rs`) to use stable idempotency mapping (no PENDING/COMMITTED receipts).\n- Remove or mark GC floor model as deferred in v0.5.\n- Refresh doc comments/README/todo in the models crate to reference v0.5 sections.\n\n**Acceptance**\n- [ ] All models compile under v0.5 assumptions (no v0.4-only features).\n- [ ] Hash/prev models verify sha over EventBody bytes and use header prev_sha semantics.\n- [ ] Idempotency model reflects stable request mapping (no pending/committed states).\n- [ ] GC floor example is removed or explicitly marked deferred for v0.5.\n- [ ] `beads_stateright_models` docs mention v0.5 plan alignment.\n- [ ] Tests (model examples) still run.\n\n**Files:**\n- beads_stateright_models/src/realtime_types_sketch.rs\n- beads_stateright_models/src/toy_codec.rs\n- beads_stateright_models/examples/hash_prev_machine.rs\n- beads_stateright_models/examples/canonical_hash_machine.rs\n- beads_stateright_models/examples/idempotency_receipt_machine.rs\n- beads_stateright_models/examples/gc_floor_machine.rs\n- beads_stateright_models/README.md\n- beads_stateright_models/todo.md","id":"bd-2iv","labels":[],"priority":2,"status":"closed","title":"Update stateright models for REALTIME_PLAN v0.5","type":"task"}
