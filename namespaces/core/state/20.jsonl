{"_at":[1768809365276,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768807784784,0],"created_by":"darin@darinsmcstudio2.lan","description":"","id":"bd-o8j9","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Replace test env bool flags with typed enums for sync/checkpoints","type":"chore"}
{"_at":[1768622479545,0],"_by":"darin@darinsmcstudio2.lan","created_at":[1768622479545,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\n\nGo beads allows project-specific custom statuses via configuration. This enables teams to define workflow states beyond the built-in statuses (open, in_progress, blocked, deferred, closed, pinned, hooked).\n\nMissing from beads-rs:\n- Config option for custom statuses\n- Validation that accepts custom statuses\n- Display for custom statuses\n- Similar to custom types system\n\nExample from Go beads:\n```bash\nbd config set status.custom \"awaiting_review,testing,staging\"\n```\n\nThis allows:\n```bash\nbd update bd-abc --status=awaiting_review\n```\n\n**Design**\n\nAdd status.custom config option and validation support.\n\nConfig schema (in .beads.toml):\n```toml\n[status]\ncustom = [\"awaiting_review\", \"testing\", \"staging\"]\n```\n\nOr via CLI:\n```bash\nbd config set status.custom \"awaiting_review,testing,staging\"\n```\n\nValidation:\n- ValidateWithCustomStatuses(customStatuses []string) in Go (types.go line 319)\n- Rust equivalent: Status::is_valid_with_custom(&[String])\n\nBuilt-in statuses are always valid. Custom statuses are validated against config.\n\nDisplay:\n- Custom statuses use default text color (no special styling)\n- Icon: Use \"â—‹\" (hollow circle) as default for unknown/custom statuses\n- Projects can define their own display rules via config (future enhancement)\n\nImplementation files:\n- `src/core/config.rs` - Add status.custom config field\n- `src/core/workflow.rs` - Add is_valid_with_custom() method to Status\n- `src/core/state.rs` - Load custom statuses from config, validate with them\n- `src/daemon/ops.rs` - Use custom status validation when updating beads\n- `src/cli/update.rs` - Accept custom statuses in --status flag\n- `src/cli/list.rs` - Display custom statuses\n\n**Design Notes**\n\nSimilar pattern to custom types (if they exist in beads-rs). Custom statuses:\n- Are defined per-repository (in .beads.toml)\n- Are validated at bead creation/update time\n- Are trusted during import (federation trust model)\n\nCustom status validation should:\n1. Check against built-in statuses first (open, in_progress, etc.)\n2. Then check against custom status list from config\n3. Reject if neither match\n\nStatus validation errors should be helpful:\n```\nError: Invalid status \"review\". Valid statuses: open, in_progress, blocked, deferred, closed, pinned, hooked\nCustom statuses (if configured): awaiting_review, testing, staging\n```\n\nEdge cases:\n- Empty custom status list is valid (no custom statuses)\n- Custom status names must be valid identifiers (lowercase, underscores)\n- Custom statuses can't override built-in statuses\n- Migration from Go beads should preserve custom statuses\n\n**Acceptance**\n\n- [ ] Config has status.custom field (Vec<String>)\n- [ ] `bd config set status.custom \"status1,status2\"` stores custom statuses\n- [ ] Status::is_valid_with_custom() validates against both built-in and custom\n- [ ] `bd update [id] --status=<custom>` accepts custom statuses\n- [ ] Custom statuses display with default styling\n- [ ] Validation errors list both built-in and custom statuses\n- [ ] Tests for custom status validation\n- [ ] Migration preserves custom statuses from Go beads\n\n**Files:**\n- src/core/config.rs\n- src/core/workflow.rs\n- src/core/state.rs\n- src/daemon/ops.rs\n- src/cli/update.rs\n- src/cli/config.rs","id":"bd-ze0x.31","labels":{"cc":{"max":{}},"entries":{"human-needed":[{"counter":15371289346030766909,"replica":"bfc8464a-15fb-2392-9a9f-e1cb0e1d2235"}]}},"priority":2,"status":"open","title":"Custom statuses configuration system","type":"feature"}
