{"_at":[1768483765241,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768373551255,1],"darin@book"],"claim":[[1768483749760,1],"darin@book"],"description":[[1768373551255,1],"darin@book"],"design":[[1768373551255,1],"darin@book"],"estimated_minutes":[[1768373551255,1],"darin@book"],"external_ref":[[1768373551255,1],"darin@book"],"labels":[[1768373551255,1],"darin@book"],"priority":[[1768373551255,1],"darin@book"],"source_repo":[[1768373551255,1],"darin@book"],"title":[[1768373551255,1],"darin@book"],"type":[[1768373551255,1],"darin@book"]},"assignee":"darin@book","assignee_at":[1768483749760,1],"assignee_expires":1768487349760,"closed_at":[1768483765241,1],"closed_by":"darin@book","created_at":[1768373551255,1],"created_by":"darin@book","description":"build_snapshot currently errors on non-core namespaces because StoreRuntime only has CanonicalState. Extend snapshot capture once StoreState is plumbed so checkpoint groups can include multiple namespaces.","id":"bd-0ya","labels":[],"priority":3,"status":"closed","title":"Checkpoint snapshot builder rejects non-core namespaces","type":"chore"}
{"_at":[1768460325161,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768444134874,1],"darin@book"],"claim":[[1768457425695,1],"darin@book"],"description":[[1768444134874,1],"darin@book"],"design":[[1768444134874,1],"darin@book"],"estimated_minutes":[[1768444134874,1],"darin@book"],"external_ref":[[1768444134874,1],"darin@book"],"labels":[[1768444134874,1],"darin@book"],"priority":[[1768444134874,1],"darin@book"],"source_repo":[[1768444134874,1],"darin@book"],"title":[[1768444134874,1],"darin@book"],"type":[[1768444134874,1],"darin@book"]},"assignee":"darin@book","assignee_at":[1768457425695,1],"assignee_expires":1768461025695,"closed_at":[1768460325161,1],"closed_by":"darin@book","created_at":[1768444134874,1],"created_by":"darin@book","description":"**Problem**\nREALTIME_PLAN ยง0.3/ยง2.7 require StoreState (namespaced CanonicalState) + namespace-aware access. Current implementation remains single-namespace: RepoState holds CanonicalState, and IPC normalization rejects any namespace other than core. This means namespaces.toml policies are loaded but never used, and non-core namespaces cannot be created or queried.\n\nEvidence:\n- src/daemon/core.rs:1865 normalize_namespace() returns NamespaceUnknown for any non-core.\n- src/daemon/repo.rs: RepoState.state is CanonicalState (not StoreState).\n- src/daemon/executor.rs and src/daemon/query_executor.rs apply/query against repo_state.state directly.\n\n**Why this violates plan**\nREALTIME_PLAN mandates StoreState = map<NamespaceId, CanonicalState> and a defaulting rule (namespace=core) rather than hard-rejecting non-core. This is a core architectural requirement.\n\n**Acceptance**\n- [ ] Replace RepoState.state with StoreState; thread namespace selection through executor, query, replication ingest, checkpoint export/import.\n- [ ] normalize_namespace validates against store.policies (namespaces.toml) and allows non-core namespaces when configured.\n- [ ] Defaulting rule remains: missing namespace -> core.\n- [ ] Unit tests cover non-core namespace mutation + query + replication paths.","id":"bd-3m5.81","labels":[],"priority":1,"status":"closed","title":"Namespaces still hard-coded to core; StoreState not wired","type":"bug"}
