{"_at":[1766122193695,0],"_by":"darin@dusk","_v":{"acceptance_criteria":[[1766121917662,0],"darin@dusk"],"claim":[[1766121922265,0],"darin@dusk"],"description":[[1766121917662,0],"darin@dusk"],"design":[[1766121917662,0],"darin@dusk"],"estimated_minutes":[[1766121917662,0],"darin@dusk"],"external_ref":[[1766121917662,0],"darin@dusk"],"labels":[[1766121917662,0],"darin@dusk"],"priority":[[1766121917662,0],"darin@dusk"],"source_repo":[[1766121917662,0],"darin@dusk"],"title":[[1766121917662,0],"darin@dusk"],"type":[[1766121917662,0],"darin@dusk"]},"assignee":"darin@dusk","assignee_at":[1766121922265,0],"assignee_expires":1766125522265,"closed_at":[1766122193695,0],"closed_by":"darin@dusk","closed_reason":"persist wal in data dir","created_at":[1766121917662,0],"created_by":"darin@dusk","description":"**Problem**\\nWAL files are stored under the daemon socket dir (often XDG_RUNTIME_DIR). Those locations are ephemeral and can be cleared on reboot/cleanup. If sync hasn't completed, a reboot can drop WAL and lose acknowledged mutations.\\n\\n**Design**\\nStore WALs in a persistent data directory (XDG_DATA_HOME/beads-rs/wal). Keep socket in runtime dir but decouple WAL path. Add migration from legacy runtime WAL dir to new persistent dir on daemon startup, preserving newer WAL if both exist. Allow env override for tests.\\n\\n**Acceptance**\\n- [ ] WAL persists across daemon restarts/reboots (no runtime dir dependency).\\n- [ ] Legacy runtime WALs are migrated or preserved with a warning.\\n- [ ] Tests cover migration + legacy format.\\n- [ ] Tests pass.\\n\\n**Files:** src/daemon/wal.rs, src/daemon/run.rs, src/daemon/ipc.rs","id":"bd-x4f","labels":[],"priority":0,"status":"closed","title":"Persist WAL in durable data dir","type":"bug"}
