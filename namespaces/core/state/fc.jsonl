{"_at":[1768168713860,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@darinsmacstudio.lan","created_at":[1768080574909,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nREALTIME_PLAN.md v0.5 says receivers must verify `prev_sha256` matches the current head before buffering/appending, but also mandates buffering out-of-order events and issuing WANT. For seq > durable+1, `prev_sha256` references seq-1 which is unknown until the gap fills, so the rule is ambiguous.\n\n**Design**\nClarify the intended rule:\n- Option A: allow buffering even if prev_sha is not yet verifiable; validate when the prefix arrives.\n- Option B: require prev_sha to match the durable head (no buffering of future events).\nUpdate plan text to remove ambiguity and align the replication/model implementations.\n\n**Acceptance**\n- [ ] Spec text explicitly states when prev_sha must be validated for buffered events.\n- [ ] Model/implementation updated to match clarified rule.\n\n**Files:**\n- REALTIME_PLAN.md\n- beads_stateright_models/examples/canonical_hash_machine.rs\n- beads_stateright_models/examples/repl_core_machine.rs","id":"bd-r1a","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Clarify prev_sha validation vs gap buffering in v0.5 replication","type":"chore"}
