{"_at":[1768377098659,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768178966154,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nbd-3m5.20 is too large. Split: local cache for fast startup.\n\n**Context**\n- REALTIME_PLAN.md Â§13.8 step 8 (cache publish)\n- Refines bd-3m5.20\n\n**Design**\n- Store verified copy under store_dir/checkpoint_cache/<group>/<checkpoint_id>/\n- Atomic publish: write to .tmp/, fsync, rename, update CURRENT\n- Keep last N checkpoints per group (default N=3), prune older\n- CURRENT file points to newest verified checkpoint_id\n\n**Acceptance**\n- [ ] Cache written atomically with tmp+rename\n- [ ] CURRENT updated after successful publish\n- [ ] Pruning keeps only N most recent\n- [ ] Startup reads from cache if available\n\n**Files:** src/git/checkpoint/cache.rs","id":"bd-3m5.50","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Phase 6: Checkpoint local cache with atomic publish","type":"task"}
{"_at":[1768942392687,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] All child tasks complete\n- [ ] Apply/merge deterministic and order-independent\n- [ ] D1 self-contained ops enforced\n- [ ] OR-Set labels/deps + orphan notes/labels/deps live\n- [ ] Legacy full-set / LWW dep paths deleted","assignee":"darin@book","created_at":[1768894465294,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nWe must implement locked CRDT decisions D1â€“D5. The current system uses full-set LWW for labels, LWW dep edges with provenance, notes embedded in beads, and collision errors/left-wins. Apply is not total and order-dependent.\n\n**Design**\nImplement the plan in CRDT_OVERHAUL.md. This epic decomposes the work into independent tasks with strict dependency ordering.\n\n**Files**\nCRDT_OVERHAUL.md","design":"Follow CRDT_OVERHAUL.md as the source-of-truth design plan. Each child task implements a scoped slice (orset core, store meta, wire ops, apply, mutation engine, git wire, cleanup).","id":"bd-3zoj","labels":{"cc":{"max":{}},"entries":{}},"priority":1,"status":"closed","title":"CRDT overhaul: OR-Set labels/deps, orphan notes, deterministic collisions","type":"epic"}
{"_at":[1768528936494,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] WAL replay tracker uses Seq types end-to-end (no raw u64 for seq).\n- [ ] WalReplayError variants carry `NamespaceId` + Seq types.\n- [ ] Tests updated to cover the new typed errors/invariants.","assignee":"darin@book","created_at":[1768506359496,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nWAL replay code stores sequences as raw `u64` and error variants carry `namespace: String` + `seq: u64` (e.g., `WalReplayError::NonContiguousSeq`, `PrevShaMismatch`, `MissingHead`). `ReplayTracker`/`OriginReplayState` also use raw `u64`, forcing manual `seq == 0` checks and losing invariants that should be enforced by `Seq0`/`Seq1` and `NamespaceId`.\n\n**Files**\n- src/daemon/wal/replay.rs\n","design":"**Design**\n- Refactor `ReplayTracker`/`OriginReplayState` to use `Seq0`/`Seq1` types for `max_seq`/`contiguous_seq` and comparisons.\n- Update `WalReplayError` fields to use `NamespaceId` and typed seqs (`Seq0`/`Seq1`) instead of `String`/`u64`.\n- Adjust error mapping/helpers and tests accordingly.","id":"bd-ngbq","labels":{"cc":{"max":{}},"entries":{}},"priority":3,"status":"closed","title":"WAL replay should use typed seq/namespace in tracker + errors","type":"chore"}
{"_at":[1768622433646,0],"_by":"darin@darinsmcstudio2.lan","created_at":[1768622433646,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\n\nGo beads has StatusPinned for marking beads that should stay open indefinitely. Pinned beads are persistent context markers, not work items that need completion.\n\nMissing from beads-rs:\n- StatusPinned workflow status\n- Pin/unpin commands\n- Display icon (ðŸ“Œ) and color\n- Different cleanup behavior (pinned beads survive cleanup)\n\nPinned vs Deferred:\n- Pinned: Stays open permanently, won't be auto-closed\n- Deferred: Temporarily on ice, will be revisited\n\nUse cases:\n- Documentation beads that track ongoing decisions\n- Reference beads for common patterns\n- Context beads for project state\n\n**Design**\n\nAdd StatusPinned variant to Status enum.\n\nCommands:\n- `bd pin [id]` - Set status to pinned\n- `bd unpin [id]` - Restore to open\n\nStatusPinned behavior:\n- Shows in `bd list` but not `bd ready` (not actionable work)\n- Excluded from cleanup operations (unlike closed/deferred)\n- Can't be auto-closed by workflows\n- Different from deferred: deferred will be revisited, pinned stays indefinitely\n\nDisplay (from ui/styles.go):\n- Icon: ðŸ“Œ (pushpin emoji)\n- Color: Purple (#d2a6ff) - special/elevated status\n- Style: `StatusPinnedStyle.Render(\"ðŸ“Œ\")`\n\nImplementation files:\n- `src/core/workflow.rs` - Add StatusPinned variant\n- `src/cli/pin.rs` - Pin command\n- `src/cli/unpin.rs` - Unpin command (restore to open)\n- `src/daemon/ops.rs` - Pin/unpin operations\n- `src/cli/list.rs` - Display pinned beads with icon\n- `src/cli/ready.rs` - Exclude pinned from ready work\n\n**Design Notes**\n\nGo beads has a `pinned` boolean field separate from status (types.go line 81). However, the Go codebase also has StatusPinned (line 447). Need to reconcile:\n- Option 1: Status-based (StatusPinned) - simpler, no dual representation\n- Option 2: Field-based (pinned bool) + status=open - allows \"pinned in_progress\"\n- Recommendation: Use StatusPinned (status-based). Pinned beads aren't \"work in progress\", they're persistent markers.\n\nPinned beads don't expire:\n- Cleanup operations skip pinned beads\n- Can't be auto-closed by formulas/workflows\n- Manual unpin required to close\n\n**Acceptance**\n\n- [ ] Status enum has StatusPinned variant\n- [ ] `bd pin [id]` sets status to pinned\n- [ ] `bd unpin [id]` restores to open\n- [ ] `bd ready` excludes pinned beads\n- [ ] Pinned status displays with ðŸ“Œ icon in purple color\n- [ ] Cleanup operations skip pinned beads\n- [ ] Tests for pin/unpin operations\n- [ ] Migration handles StatusPinned from Go beads export\n\n**Files:**\n- src/core/workflow.rs\n- src/cli/pin.rs\n- src/cli/unpin.rs\n- src/daemon/ops.rs\n- src/cli/list.rs\n- src/cli/ready.rs","id":"bd-ze0x.17","labels":{"cc":{"max":{}},"entries":{"human-needed":[{"counter":5855223272650655807,"replica":"ab2041bb-da0e-900a-52f1-9104ba24ab33"}]}},"priority":2,"status":"open","title":"Pinned status for persistent beads","type":"feature"}
