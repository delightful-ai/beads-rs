{"_at":[1768364180343,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768177908730,1],"darin@darinsmacstudio.lan"],"claim":[[1768362749554,1],"darin@book"],"description":[[1768177908730,1],"darin@darinsmacstudio.lan"],"design":[[1768177908730,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768177908730,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768177908730,1],"darin@darinsmacstudio.lan"],"labels":[[1768177908730,1],"darin@darinsmacstudio.lan"],"priority":[[1768261544273,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768177908730,1],"darin@darinsmacstudio.lan"],"title":[[1768177908730,1],"darin@darinsmacstudio.lan"],"type":[[1768177908730,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] ReplicatedFsync(k) completes when k eligible replicas ACK.\n- [ ] Insufficient eligible replicas triggers immediate error.\n- [ ] Durable watermark advances only after local fsync and required ACKs.","assignee":"darin@book","assignee_at":[1768362749554,1],"assignee_expires":1768366349554,"closed_at":[1768364180343,1],"closed_by":"darin@book","created_at":[1768177908730,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nPhase 5: implement DurabilityCoordinator for LocalFsync and ReplicatedFsync(k). There is no coordinator to track peer ACKs or advance durable watermarks beyond local fsync.\n\n**Context**\n- REALTIME_PLAN.md ยง10 (durability coordination), ยง0.12 (applied vs durable watermarks), ยง2.1.2 (replica roster)\n**Files:** src/daemon/durability_coordinator.rs (new), src/daemon/store_runtime.rs, src/daemon/repl/*","design":"**Design**\n- Track pending txns by txn_id and required durability class.\n- For ReplicatedFsync(k), select eligible replicas (from roster if present) and wait for durable ACKs.\n- On success, return updated receipt with durability_proof and advance durable watermarks.\n- On insufficient eligible replicas, return ERROR(code=\"durability_unavailable\").","id":"bd-3m5.18","labels":[],"priority":1,"status":"closed","title":"Phase 5: DurabilityCoordinator + peer ACK tracking","type":"task"}
