{"_at":[1768483302777,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768444186301,1],"darin@book"],"claim":[[1768481439635,1],"darin@book"],"description":[[1768444186301,1],"darin@book"],"design":[[1768444186301,1],"darin@book"],"estimated_minutes":[[1768444186301,1],"darin@book"],"external_ref":[[1768444186301,1],"darin@book"],"labels":[[1768444186301,1],"darin@book"],"priority":[[1768444186301,1],"darin@book"],"source_repo":[[1768444186301,1],"darin@book"],"title":[[1768444186301,1],"darin@book"],"type":[[1768444186301,1],"darin@book"]},"assignee":"darin@book","assignee_at":[1768481439635,1],"assignee_expires":1768485039635,"closed_at":[1768483302777,1],"closed_by":"darin@book","created_at":[1768444186301,1],"created_by":"darin@book","description":"**Problem**\nREALTIME_PLAN ยง2.1.2 calls for persisting last_seen_ms for known replicas so admin.status and pruning remain correct across restarts. Schema includes replica_liveness, but it is never written or read.\n\nEvidence:\n- src/daemon/wal/index.rs defines replica_liveness table, but there are no writer/read methods for it.\n- rg \"replica_liveness\" only finds the schema.\n\n**Why this violates plan**\nWithout persistence, replica liveness resets on restart, breaking visibility of peers and any future pruning logic.\n\n**Acceptance**\n- [ ] Add WAL index writer/read APIs for replica_liveness.\n- [ ] Update liveness on replication handshake/ACKs with last_seen_ms.\n- [ ] Surface persisted liveness in admin.status.","id":"bd-3m5.86","labels":[],"priority":3,"status":"closed","title":"Replica liveness table unused; last_seen_ms not persisted","type":"bug"}
