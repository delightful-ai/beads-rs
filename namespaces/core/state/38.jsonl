{"_at":[1768406802615,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768180816641,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nPhase 6 tests need golden checkpoint fixtures and verification utilities.\n\n**Context**\n- REALTIME_PLAN.md §18: checkpoint export/import determinism, manifest hashes\n- Blocks Phase 6 testing bead\n\n**Design**\nCreate test infrastructure:\n- Golden checkpoint fixtures: known StoreState → known manifest.json + meta.json\n- Checkpoint diff utilities: compare two checkpoints, report differences\n- Sharded layout generators (beads/00..ff, deps/00..ff, tombstones/00..ff)\n- Hash verification helpers for content files and manifest\n\n**Acceptance**\n- [ ] tests/fixtures/checkpoint.rs with golden fixtures\n- [ ] tests/fixtures/checkpoint_diff.rs with diff utilities\n- [ ] Golden fixtures include: small state, multi-namespace, tombstones\n- [ ] cargo test fixtures::checkpoint passes\n\n**Files:** tests/fixtures/checkpoint.rs (new), tests/fixtures/checkpoint_diff.rs (new)","id":"bd-3m5.63","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Phase 6 test infrastructure: checkpoint fixtures + diff utils","type":"task"}
{"_at":[1769225328532,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] WalDepStore and wire dep store use shared representation or documented reasons for divergence.\\n- [ ] Tests cover WAL dep serialization after refactor.","assignee":"darin@book","created_at":[1769210188869,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nWalDepStore duplicates the structure of WireDepStoreV1, increasing maintenance burden and risk of drift.\\n\\n**Files**: src/daemon/wal_legacy_snapshot.rs, src/core/wire_bead.rs (or shared module)","design":"**Design**\\nConsider sharing a common internal dep-store struct or reusing WireDepStoreV1 if layering allows. Ensure serialization remains stable and test coverage stays intact.","id":"bd-qz97.23","labels":{"cc":{"max":{}},"entries":{}},"priority":4,"status":"closed","title":"Cleanup: DRY WalDepStore vs WireDepStoreV1","type":"chore"}
{"_at":[1768448823524,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Default policies include `core`, `sys`, `wf`, and `tmp`.\n- [ ] Test covers default policy set when `namespaces.toml` is absent.","closed_reason":"duplicate of bd-3m5.91","created_at":[1768444235281,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nWhen `namespaces.toml` is missing, we default to only `core` instead of the spec default set (`core`, `sys`, `wf`, `tmp`). This makes new installs diverge from the realtime plan and forces callers to handle “missing namespace” errors that shouldn’t exist by default.\n\n**Signals / Evidence**\n- `default_policies()` returns only `core` (`src/daemon/store_runtime.rs`).\n- Spec defaults for `sys`, `wf`, `tmp` are documented in REALTIME_PLAN.md (0.4).\n\n**Why this hurts velocity**\nWe keep tripping over missing namespaces when adding features that expect them (policy checks, replication routing, GC/retention). It’s a hidden configuration requirement that should be encoded in defaults.","design":"**Design**\n- Expand `default_policies()` to include `sys_default`, `wf_default`, `tmp_default` with spec values.\n- Add a test that missing `namespaces.toml` yields all four namespaces.\n- Ensure any code that assumes only `core` is updated or guarded.","id":"bd-w4a","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Default namespace policies are incomplete (missing sys/wf/tmp)","type":"task"}
