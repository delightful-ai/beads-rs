{"_at":[1768706961727,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"**Acceptance**\n- [ ] Repl model supports multiple network semantics via CLI flags.\n- [ ] History hooks are used for at least one property involving message-level invariants.\n- [ ] Ordered reliable link mode exists and can be toggled in the example.","assignee":"darin@book","created_at":[1768680777560,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nEven with ActorModel, we’re not yet leveraging Stateright’s network semantics selection, message history capture, or ordered-reliable-link adapter to control assumptions and reduce state.\n\n**Goal**\nExtend the repl ActorModel to fully use Stateright’s network model and history hooks.","design":"**Design**\n1) Add CLI/config switches in the model example to choose:\n   - `Network::UnorderedDuplicating`\n   - `Network::UnorderedNonDuplicating`\n   - `Network::Ordered`\n   - `LossyNetwork::Yes/No`\n2) Implement `record_msg_in` / `record_msg_out` to collect:\n   - last delivered sequence per (ns, origin)\n   - in-flight want ranges\n   - ack histories\n3) Add an ordered-link mode using `actor::ordered_reliable_link::ActorWrapper` to model a reliable channel between replicas when desired.\n4) Add properties that use history (not just actor state) to assert:\n   - ACK monotonicity even under loss/dup\n   - WANTs do not skip gaps\n   - equivalence between delivered history and applied watermark\n\n**References**\n- `~/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/stateright-0.31.0/src/actor/network.rs`\n- `~/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/stateright-0.31.0/src/actor/ordered_reliable_link.rs`\n- `~/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/stateright-0.31.0/examples/timers.rs`","id":"bd-1bs5","labels":{"cc":{"max":{}},"entries":{}},"priority":0,"status":"closed","title":"Stateright repl: network semantics + history hooks","type":"task"}
{"_at":[1768397061618,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768178812759,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nOperators need to quickly detect divergence across replicas using stable convergence fingerprints.\n\n**Context**\n- REALTIME_PLAN.md §16.1 (admin.fingerprint, fingerprint algorithm)\n\n**Design**\n- Returns per-namespace: { state_sha256, tombstones_sha256, deps_sha256, namespace_root }\n- Merkle-ish algorithm: shard_hash[00..ff] -> type_root -> namespace_root\n- Modes: full (per-shard hashes, expensive), sample(N) (deterministic N samples)\n- Sampling uses sha256(namespace || request_nonce) to select indices\n- Includes watermarks_applied and watermarks_durable as basis\n\n**Acceptance**\n- [ ] admin.fingerprint returns namespace_root and type_roots\n- [ ] full mode returns per-shard hashes\n- [ ] sample(N) returns deterministic shard samples\n- [ ] Tests verify determinism (same state -> same hash)\n\n**Files:** src/daemon/admin.rs, src/daemon/fingerprint.rs (new), src/cli/commands/admin.rs","id":"bd-3m5.34","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Phase 7: admin.fingerprint for divergence detection","type":"task"}
{"_at":[1768533158463,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] `query.rs` and `query_executor.rs` no longer import `crate::api`.\n- [ ] API conversions happen at the edge (IPC response assembly).\n- [ ] Behavior unchanged; tests pass.","assignee":"darin@book","created_at":[1768508733099,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\n- `src/daemon/query.rs` and `src/daemon/query_executor.rs` return `crate::api` view types directly.\n- This couples internal query logic to external schemas and makes refactors harder.\n\n**Files:**\n- src/daemon/query.rs\n- src/daemon/query_executor.rs\n- src/api/mod.rs\n- src/daemon/ipc.rs (response assembly)","design":"- Introduce internal query view types (e.g., `daemon/query_model.rs`) that are independent of `api`.\n- Update query executor to return internal types.\n- Add `From` conversions in `src/api` (or a dedicated `api/convert.rs`) to build API output at the IPC boundary.\n- Ensure CLI rendering still uses API types.","id":"bd-bzxc","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Query/API boundary: internal models + edge conversion","type":"chore"}
