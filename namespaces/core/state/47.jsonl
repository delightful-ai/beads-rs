{"_at":[1771011162463,0],"_by":"darin@darinsmcstudio2.lan","created_at":[1771011162463,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nDaemon internal organization is still broad ( remains a large coordination surface) and boundary seams for future library extraction are not encoded with traits/facades.\\n\\n**Design**\\nComplete the phase-II internal pass by tightening daemon module boundaries, adding trait seams for runtime-facing services, and preserving wire/API behavior. Keep changes internal (no crate moves), with compatibility re-exports where needed.\\n\\n**Acceptance**\\n- [ ] Daemon internal modules are organized by boundary with clear ownership\\n- [ ] New traits/facades added where orchestration currently reaches into concrete subsystems\\n- [ ] External behavior + IPC/API compatibility preserved\\n- [ ] , \nrunning 1 test\ntest crate_dag_matches_policy ... ok\n\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.03s, , \nrunning 3 tests\ntest issues::tests::issue_updated_at_tracks_note_change ... ok\ntest issues::tests::issue_summary_updated_at_tracks_label_change ... ok\ntest issues::tests::issue_serializes_status_and_type_as_strings ... ok\n\ntest result: ok. 3 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 34 tests\n✗ Aider integration not installed\n  Run: bd setup aider\n✗ No hooks installed\n  Run: bd setup claude\n✗ Cursor integration not installed\n  Run: bd setup cursor\ntest commands::onboard::tests::agents_content_has_key_elements ... ok\ntest commands::prime::tests::context_is_not_empty ... ok\ntest commands::prime::tests::write_context_if_is_silent_outside_beads_repo ... ok\ntest commands::label::tests::split_label_batch_requires_label ... ok\ntest commands::daemon::tests::render_daemon_info_matches_human_format ... ok\ntest commands::setup::tests::aider_instructions_contains_beads ... ok\ntest commands::prime::tests::write_context_if_outputs_context_in_beads_repo ... ok\ntest commands::list::tests::render_issue_list_includes_namespace ... ok\ntest commands::ready::tests::render_ready_includes_namespace ... ok\ntest commands::label::tests::split_label_batch_parses_ids_and_label ... ok\ntest commands::setup::tests::cursor_rules_contains_beads ... ok\ntest commands::setup::tests::check_claude_returns_error_when_not_installed ... ok\ntest commands::show::tests::render_show_includes_namespace ... ok\ntest commands::setup::tests::check_aider_returns_error_when_not_installed ... ok\ntest commands::setup::tests::check_cursor_returns_error_when_not_installed ... ok\ntest commands::admin::tests::render_admin_status_includes_watermarks ... ok\ntest commands::subscribe::tests::handle_response_returns_error_on_non_retryable_error ... ok\ntest commands::store::tests::render_fsck_human_golden ... ok\ntest commands::subscribe::tests::handle_response_stops_stream_on_retryable_error ... ok\ntest commands::tests::render_ok_human_renders_basic_status_payloads ... ok\ntest commands::tests::render_ok_human_renders_op_and_query_variants ... ok\ntest commands::tests::render_ok_human_renders_validation_query ... ok\ntest paths::tests::resolve_data_dir_prefers_env_override ... ok\ntest paths::tests::resolve_log_dir_prefers_env_override ... ok\ntest paths::tests::store_paths_are_derived_from_data_dir ... ok\ntest runtime::tests::mutation_meta_includes_actor_override ... ok\ntest runtime::tests::daemon_response_error_display_includes_code_message_and_details ... ok\ntest runtime::tests::resolve_description_rejects_mismatched_alias_values ... ok\ntest runtime::tests::read_consistency_includes_read_gating ... ok\ntest runtime::tests::response_payload_returns_daemon_error_payload ... ok\ntest runtime::tests::response_payload_returns_ok_payload ... ok\ntest upgrade::release::tests::version_compare ... ok\ntest migrate::go_export::tests::multiple_comments_same_issue_are_unique ... ok\ntest migrate::go_export::tests::comment_ids_are_globally_unique_across_issues ... ok\n\ntest result: ok. 34 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 224 tests\ntest bead::tests::projection_claim_and_closed_info ... ok\ntest bead::tests::content_hash_depends_on_all_fields ... ok\ntest apply::tests::bead_creation_collision_is_deterministic ... ok\ntest apply::tests::note_append_before_bead_exists_is_stored ... ok\ntest apply::tests::outcome_tracks_notes_and_beads ... ok\ntest bead::tests::projection_includes_labels_and_timestamps ... ok\ntest apply::tests::apply_claim_patch_set_with_clear_expiry_is_total ... ok\ntest apply::tests::collision_tombstone_is_order_independent ... ok\ntest apply::tests::apply_event_is_idempotent ... ok\ntest apply::tests::bead_delete_ignores_older_than_live ... ok\ntest apply::tests::note_collision_is_deterministic ... ok\ntest apply::tests::label_ops_on_missing_bead_are_total ... ok\ntest apply::tests::label_add_same_value_different_dot_tracks_change ... ok\ntest apply::tests::dep_delete_before_create_converges ... ok\ntest apply::tests::dep_add_accepts_acyclic_dag_edge ... ok\ntest bead::tests::same_lineage_join_merges_fields ... ok\ntest apply::tests::dep_add_rejects_cycle_from_apply_event ... ok\ntest bead::tests::same_lineage_join_rejects_mixed_wrapper_pairs ... ok\ntest bead::tests::same_lineage_rejects_mismatched_creation ... ok\ntest collections::tests::label_parse_valid ... ok\ntest collections::tests::label_rejects_empty ... ok\ntest collections::tests::label_rejects_newlines ... ok\ntest collections::tests::label_trims_whitespace ... ok\ntest collections::tests::labels_remove_reports_change ... ok\ntest dep::tests::accessors_work ... ok\ntest dep::tests::dep_spec_parse_list_handles_kinds_and_commas ... ok\ntest dep::tests::dep_spec_rejects_parent_kind ... ok\ntest collections::tests::labels_serde_roundtrip ... ok\ntest dep::tests::dep_spec_set_sorts_and_dedups ... ok\ntest dep::tests::dep_spec_set_json_roundtrip ... ok\ntest dep::tests::dep_spec_to_spec_string_omits_default_kind ... ok\ntest dep::tests::parent_edge_rejects_self_parent ... ok\ntest dep::tests::self_dependency_rejected ... ok\ntest dep::tests::serde_rejects_self_dep ... ok\ntest dep::tests::serde_roundtrip ... ok\ntest dep_tombstone_store::tests::tombstone_store_upsert_merges ... ok\ntest domain::tests::dep_kind_ordering_is_lexical ... ok\ntest domain::tests::dep_kind_parse_accepts_aliases ... ok\ntest domain::tests::dep_kind_parse_rejects_unknown ... ok\ntest domain::tests::priority_serde_roundtrip ... ok\ntest domain::tests::priority_serde_validates_on_deserialize ... ok\ntest durability::tests::durability_outcome_serde_roundtrip ... ok\ntest durability::tests::durability_parse_accepts_variants ... ok\ntest durability::tests::durability_parse_rejects_invalid ... ok\ntest durability::tests::durability_receipt_merge_upgrades ... ok\ntest durability::tests::durability_receipt_rejects_achieved_without_quorum ... ok\ntest durability::tests::durability_receipt_rejects_missing_replicated_proof ... ok\ntest durability::tests::durability_proof_serde_roundtrip ... ok\ntest error::tests::error_code_parse_distinguishes_protocol_and_cli ... ok\ntest error::tests::error_code_serializes_to_string_values ... ok\ntest durability::tests::durability_receipt_serde_roundtrip ... ok\ntest error::tests::error_payload_roundtrip_preserves_retryable_and_receipt ... ok\ntest error::tests::unknown_error_code_decodes ... ok\ntest event::tests::canonical_encode_is_stable ... ok\ntest event::tests::decode_rejects_array_entry_bounds ... ok\ntest event::tests::decode_event_hlc_max_extracts ... ok\ntest event::tests::decode_event_hlc_max_rejects_physical_mismatch ... ok\ntest event::tests::decode_accepts_unknown_event_body_fields ... ok\ntest event::tests::cbor_roundtrip_dep_ops ... ok\ntest event::tests::cbor_roundtrip_label_ops_preserves_dots ... ok\ntest event::tests::decode_rejects_depth_bounds ... ok\ntest event::tests::decode_rejects_duplicate_bead_patch_keys ... ok\ntest event::tests::decode_rejects_duplicate_note_keys ... ok\ntest event::tests::decode_rejects_duplicate_event_body_keys ... ok\ntest event::tests::decode_rejects_duplicate_hlc_max_keys ... ok\ntest event::tests::decode_rejects_duplicate_txn_delta_keys ... ok\ntest event::tests::decode_rejects_indefinite_length ... ok\ntest event::tests::decode_rejects_hlc_physical_mismatch ... ok\ntest event::tests::decode_rejects_invalid_branch_name ... ok\ntest event::tests::decode_rejects_legacy_labels_patch ... ok\ntest event::tests::decode_rejects_map_entry_bounds ... ok\ntest event::tests::decode_rejects_invalid_workflow_patch ... ok\ntest event::tests::decode_rejects_overlong_u32 ... ok\ntest event::tests::decode_rejects_partial_tombstone_lineage ... ok\ntest event::tests::decode_rejects_missing_hlc_max_for_txn ... ok\ntest event::tests::decode_rejects_overlong_u64 ... ok\ntest event::tests::decode_rejects_record_size_bounds ... ok\ntest event::tests::decode_rejects_tagged_integer ... ok\ntest event::tests::decode_rejects_text_bounds ... ok\ntest event::tests::encode_tombstone_without_lineage_uses_base_len ... ok\ntest event::tests::decode_roundtrip_event_body ... ok\ntest event::tests::event_validation_rejects_too_many_ops ... ok\ntest event::tests::event_frame_rejects_prev_seq_mismatch ... ok\ntest event::tests::validate_accepts_claim_clear ... ok\ntest event::tests::tombstone_roundtrip_with_lineage ... ok\ntest event::tests::validate_accepts_claim_set_with_clear_expiry ... ok\ntest event::tests::validate_rejects_clear_claim_with_expires_set ... ok\ntest event::tests::decode_roundtrip_event_body_with_ops ... ok\ntest event::tests::validate_rejects_keep_claim_patch_fields ... ok\ntest event::tests::validate_rejects_keep_workflow_patch_fields ... ok\ntest event::tests::validate_rejects_partial_creation_stamp_at_only ... ok\ntest event::tests::validate_rejects_partial_creation_stamp_by_only ... ok\ntest event::tests::validate_rejects_partial_tombstone_lineage ... ok\ntest event::tests::validated_mutation_command_builds_event_body ... ok\ntest event::tests::validated_mutation_command_rejects_invalid_workflow_patch ... ok\ntest event::tests::verified_event_frame_accepts_canonical_frame ... ok\ntest event::tests::verified_event_frame_rejects_hash_mismatch ... ok\ntest event::tests::verified_event_frame_rejects_non_canonical_bytes ... ok\ntest event::tests::verified_event_frame_rejects_prev_seq_mismatch ... ok\ntest event::tests::verify_event_frame_accepts_contiguous_prev ... ok\ntest identity::tests::actor_id_rejects_whitespace_only ... ok\ntest event::tests::verify_event_frame_defers_prev_when_head_unknown ... ok\ntest event::tests::verify_event_frame_rejects_non_canonical_bytes ... ok\ntest identity::tests::actor_id_serde_rejects_whitespace_only ... ok\ntest event::tests::verify_event_frame_returns_canonical_bytes ... ok\ntest identity::tests::actor_id_serde_validates_on_deserialize ... ok\ntest identity::tests::bead_id_parse_with_custom_slug ... ok\ntest identity::tests::bead_id_serde_validates_on_deserialize ... ok\ntest identity::tests::bead_id_slug_is_canonicalized ... ok\ntest identity::tests::bead_id_with_slug_rewrites_prefix ... ok\ntest identity::tests::bead_slug_parse_normalizes ... ok\ntest identity::tests::bead_slug_rejects_invalid ... ok\ntest identity::tests::branch_name_parse_valid ... ok\ntest identity::tests::branch_name_rejects_empty ... ok\ntest identity::tests::branch_name_rejects_invalid ... ok\ntest identity::tests::branch_name_trims ... ok\ntest identity::tests::checkpoint_content_digest_is_stable ... ok\ntest identity::tests::client_request_id_serde_roundtrip ... ok\ntest identity::tests::identity_types_serde_roundtrip ... ok\ntest identity::tests::canonical_state_digest_matches_canon_bytes ... ok\ntest identity::tests::note_id_serde_validates_on_deserialize ... ok\ntest identity::tests::replica_id_serde_roundtrip ... ok\ntest identity::tests::segment_id_serde_roundtrip ... ok\ntest identity::tests::state_canonical_json_digest_is_stable ... ok\ntest identity::tests::state_jsonl_digest_is_stable ... ok\ntest identity::tests::store_epoch_serde_roundtrip ... ok\ntest identity::tests::store_id_serde_roundtrip ... ok\ntest identity::tests::store_identity_serde_roundtrip ... ok\ntest identity::tests::trace_id_serde_roundtrip ... ok\ntest identity::tests::txn_id_serde_roundtrip ... ok\ntest json_canon::tests::canon_json_rejects_non_finite_numbers ... ok\ntest json_canon::tests::canon_json_is_deterministic_for_hashmap ... ok\ntest limits::tests::limits_defaults_match_plan ... ok\ntest meta::tests::current_version_is_1 ... ok\ntest json_canon::tests::canon_json_sorts_keys_recursively ... ok\ntest meta::tests::meta_serde_roundtrip ... ok\ntest meta::tests::meta_serde_roundtrip_with_root_slug ... ok\ntest meta::tests::version_compatibility ... ok\ntest namespace::tests::namespace_id_serde_roundtrip ... ok\ntest namespace::tests::namespace_id_validates ... ok\ntest namespace::tests::namespace_policy_defaults_match_plan ... ok\ntest namespace::tests::namespace_set_json_roundtrip ... ok\ntest namespace::tests::namespace_set_sorts_and_dedups ... ok\ntest namespaced_state::tests::core_namespace_is_always_present ... ok\ntest namespaced_state::tests::core_namespace_rejects_non_core_wrapper ... ok\ntest namespaced_state::tests::non_core_namespace_behaves_like_core ... ok\ntest orset::tests::dvv_join_is_monotonic_for_dominance ... ok\ntest orset::tests::dvv_dominates_and_join ... ok\ntest orset::tests::orset_add_ignores_dominated_dot ... ok\ntest orset::tests::orset_add_remove_basic ... ok\ntest orset::tests::orset_add_wins_over_remove_ctx ... ok\ntest orset::tests::orset_collision_picks_higher_value ... ok\ntest orset::tests::orset_join_commutative_and_idempotent ... ok\ntest orset::tests::orset_join_drops_dominated_dots ... ok\ntest orset::tests::orset_join_preserves_concurrent_add ... ok\ntest orset::tests::orset_join_preserves_unrelated_value_from_remove_ctx ... ok\ntest orset::tests::orset_normalize_for_import_resolves_dot_collisions ... ok\ntest orset::tests::orset_remove_does_not_remove_unrelated_value ... ok\ntest orset::tests::orset_remove_with_ctx_drops_all_dots ... ok\ntest orset::tests::orset_try_from_parts_allows_duplicates_already_dominated_by_cc ... ok\ntest orset::tests::orset_try_from_parts_drops_empty_entries ... ok\ntest orset::tests::orset_try_from_parts_prunes_dominated_dots ... ok\ntest orset::tests::orset_try_from_parts_rejects_duplicate_dots ... ok\ntest replica_roster::tests::rejects_observer_with_durability_eligibility ... ok\ntest replica_roster::tests::parses_observer_without_durability_eligibility ... ok\ntest replica_roster::tests::rejects_duplicate_replica_id ... ok\ntest replica_roster::tests::rejects_duplicate_replica_name ... ok\ntest replica_roster::tests::parses_roster_with_defaults ... ok\ntest state::tests::deletion_wins_when_newer ... ok\ntest state::tests::dep_index_insert_active_edge ... ok\ntest state::tests::dep_index_deps_from_uses_index ... ok\ntest state::tests::dep_index_deps_to_uses_index ... ok\ntest state::tests::dep_index_insert_deleted_edge ... ok\ntest state::tests::collision_hides_other_lineage_labels_and_notes ... ok\ntest state::tests::dep_index_multiple_kinds ... ok\ntest state::tests::dep_index_join_rebuilds_indexes ... ok\ntest state::tests::dep_index_rebuild_from_deps ... ok\ntest state::tests::dep_index_transition_active_to_deleted ... ok\ntest state::tests::dep_index_transition_deleted_to_active ... ok\ntest state::tests::dep_stamp_is_monotonic_for_out_of_order_ops ... ok\ntest state::tests::dep_stamp_updates_on_new_dot_without_membership_change ... ok\ntest state::tests::dependency_cycles_empty_for_acyclic_graph ... ok\ntest state::tests::dependency_cycles_detects_simple_cycle ... ok\ntest state::tests::invariant_delete_removes_live ... ok\ntest state::tests::invariant_insert_removes_tombstone ... ok\ntest state::tests::label_stamp_is_monotonic_for_out_of_order_ops ... ok\ntest state::tests::label_stamp_updates_on_new_dot_without_membership_change ... ok\ntest state::tests::note_store_join_resolves_collisions_deterministically ... ok\ntest state::tests::parent_edges_to_keeps_children_visible_when_parent_tombstoned ... ok\ntest state::tests::require_live_mut_returns_mutable_bead ... ok\ntest state::tests::require_live_returns_bead_when_exists ... ok\ntest state::tests::require_live_returns_deleted_for_tombstoned_id ... ok\ntest state::tests::require_live_returns_not_found_for_unknown_id ... ok\ntest state::tests::resurrection_newer_bead_wins ... ok\ntest state::tests::updated_stamp_includes_labels_and_notes ... ok\ntest store_meta::tests::store_meta_versions_current_is_consistent ... ok\ntest watermark::tests::advance_contiguous_rejects_gaps ... ok\ntest store_meta::tests::store_meta_serde_roundtrip ... ok\ntest watermark::tests::advance_contiguous_sets_seq0_to_seq1 ... ok\ntest watermark::tests::merge_at_least_head_mismatch_is_order_independent ... ok\ntest watermark::tests::observe_at_least_rejects_head_mismatch_same_seq ... ok\ntest watermark::tests::observe_at_least_validates_head_on_equal_seq ... ok\ntest watermark::tests::seq_helpers_work ... ok\ntest watermark::tests::watermark_rejects_genesis_for_nonzero_seq ... ok\ntest watermark::tests::watermark_rejects_head_at_genesis ... ok\ntest watermark::tests::watermark_rejects_unknown_on_deserialize ... ok\ntest wire_bead::tests::txn_delta_rejects_duplicate_keys ... ok\ntest wire_bead::tests::snapshot_codec_rejects_out_of_order_beads ... ok\ntest wire_bead::tests::snapshot_codec_absorbs_legacy_note_lineage_into_live_lineage ... ok\ntest wire_bead::tests::wire_claim_snapshot_rejects_expires_without_assignee ... ok\ntest wire_bead::tests::wire_claim_snapshot_unclaimed_when_fields_absent ... ok\ntest wire_bead::tests::wire_claim_snapshot_rejects_invalid_assignee_instead_of_falling_back ... ok\ntest wire_bead::tests::txn_delta_orders_ops_canonically ... ok\ntest wire_bead::tests::wire_dep_add_rejects_self_dependency ... ok\ntest wire_bead::tests::wire_note_conversion_roundtrip ... ok\ntest wire_bead::tests::wire_bead_patch_roundtrip ... ok\ntest wire_bead::tests::wire_note_roundtrip ... ok\ntest wire_bead::tests::wire_bead_full_preserves_stamps ... ok\ntest wire_bead::tests::txn_delta_roundtrip ... ok\ntest wire_bead::tests::wire_bead_full_json_roundtrip_preserves_sparse_v ... ok\ntest wire_bead::tests::wire_bead_full_normalizes_legacy_timestamps ... ok\ntest wire_bead::tests::snapshot_codec_roundtrip ... ok\ntest state::tests::lineage_tombstone_only_kills_matching_lineage ... ok\ntest state::tests::join_resurrection_rule_prefers_newer_bead ... ok\n\ntest result: ok. 224 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s\n\n\nrunning 36 tests\ntest broadcast::tests::hot_cache_evicts_by_bytes ... ok\ntest broadcast::tests::hot_cache_evicts_by_event_count ... ok\ntest clock::tests::backward_jump_keeps_monotonicity ... ok\ntest broadcast::tests::delivers_events_in_order ... ok\ntest broadcast::tests::subscriber_drops_on_full_queue ... ok\ntest broadcast::tests::subscriber_drops_on_byte_limit ... ok\ntest admission::tests::repl_limits_report_queue_metrics ... ok\ntest admission::tests::repl_sheds_before_ipc_mutations ... ok\ntest clock::tests::forward_jump_advances_wall_time ... ok\ntest admission::tests::ipc_limit_enforced_and_released ... ok\ntest clock::tests::forward_jump_clamps_within_session ... ok\ntest clock::tests::receive_with_older_stamp_is_noop ... ok\ntest clock::tests::restart_recovers_without_regression ... ok\ntest clock::tests::tick_is_monotonic ... ok\ntest clock::tests::receive_advances_clock ... ok\ntest git_lane::tests::backoff_exponential ... ok\ntest git_lane::tests::mark_dirty ... ok\ntest git_lane::tests::new_state_not_dirty ... ok\ntest io_budget::tests::rate_zero_disables_throttle ... ok\ntest io_budget::tests::reserve_returns_wait_for_deficit ... ok\ntest metrics::tests::emits_counters_and_histograms ... ok\ntest remote::tests::normalize_file_url_localhost_matches_path ... ok\ntest metrics::tests::snapshot_collects_metrics ... ok\ntest remote::tests::normalize_file_url_with_host_preserves_host ... ok\ntest remote::tests::normalize_file_urls_are_stable ... ok\ntest remote::tests::normalize_https_and_ssh ... ok\ntest remote::tests::normalize_https_userinfo_matches_host_only ... ok\ntest remote::tests::normalize_local_paths_trim_git_suffix ... ok\ntest remote::tests::normalize_trims_slashes ... ok\ntest remote::tests::normalize_with_port_and_case ... ok\ntest remote::tests::normalize_user_and_scheme_variants_match ... ok\ntest scheduler::tests::backoff_never_shortens_deadline ... ok\ntest scheduler::tests::cancel ... ok\ntest scheduler::tests::reschedule_debounces_later ... ok\ntest scheduler::tests::schedule_and_drain_due ... ok\ntest scheduler::tests::stress_reschedules_do_not_accumulate_due_fires ... ok\n\ntest result: ok. 36 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s\n\n\nrunning 44 tests\ntest repl::contiguous_batch::tests::contiguous_batch_rejects_gap ... ok\ntest repl::frame::tests::frame_reader_rejects_oversize_frame ... ok\ntest repl::frame::tests::frame_reader_enforces_negotiated_limit ... ok\ntest repl::contiguous_batch::tests::contiguous_batch_rejects_duplicate ... ok\ntest repl::contiguous_batch::tests::contiguous_batch_accepts_valid_sequence ... ok\ntest repl::contiguous_batch::tests::contiguous_batch_rejects_mixed_origin ... ok\ntest repl::frame::tests::frame_roundtrip_validates_crc ... ok\ntest durability::tests::unavailable_when_not_enough_eligible ... ok\ntest durability::tests::replicated_fsync_succeeds_after_k_acks ... ok\ntest repl::frame::tests::frame_too_large_maps_to_error_payload ... ok\ntest repl::gap_buffer::tests::duplicate_events_are_noops ... ok\ntest repl::gap_buffer::tests::gap_bytes_overflow_rejects ... ok\ntest repl::gap_buffer::tests::deferred_event_blocks_drain ... ok\ntest repl::gap_buffer::tests::gap_overflow_rejects ... ok\ntest repl::gap_buffer::tests::gap_timeout_rejects ... ok\ntest repl::gap_buffer::tests::multiple_gaps_drain_in_order ... ok\ntest repl::gap_buffer::tests::single_gap_buffers_then_drains ... ok\ntest repl::peer_acks::tests::divergent_heads_are_excluded_from_quorum ... ok\ntest repl::peer_acks::tests::updates_require_monotonic_seq ... ok\ntest repl::peer_acks::tests::satisfied_k_distinguishes_failure_modes ... ok\ntest repl::proto::tests::decode_ack_rejects_missing_head_for_nonzero_seq ... ok\ntest repl::proto::tests::decode_hello_rejects_missing_head_for_nonzero_seq ... ok\ntest repl::proto::tests::decode_ack_rejects_head_at_genesis ... ok\ntest repl::proto::tests::decode_namespace_list_accepts_empty ... ok\ntest repl::proto::tests::decode_namespace_list_canonicalizes_order_and_dedups ... ok\ntest repl::proto::tests::decode_hello_rejects_head_at_genesis ... ok\ntest repl::proto::tests::decode_namespace_list_rejects_invalid_namespace ... ok\ntest repl::proto::tests::decode_welcome_rejects_head_at_genesis ... ok\ntest durability::tests::timeout_returns_pending_receipt ... ok\ntest repl::proto::tests::decode_welcome_rejects_missing_head_for_nonzero_seq ... ok\ntest repl::proto::tests::repl_envelope_key_order_is_stable ... ok\ntest repl::proto::tests::repl_batch_too_large_maps_to_error_payload ... ok\ntest repl::proto::tests::repl_message_roundtrip_ack ... ok\ntest repl::proto::tests::repl_message_rejects_version_mismatch_for_events_ack_want ... ok\ntest repl::proto::tests::repl_message_roundtrip_error_payload ... ok\ntest repl::proto::tests::repl_message_body_key_order_is_stable ... ok\ntest repl::proto::tests::repl_message_roundtrip_hello ... ok\ntest repl::proto::tests::repl_message_roundtrip_ping ... ok\ntest repl::proto::tests::repl_message_roundtrip_pong ... ok\ntest repl::proto::tests::repl_message_roundtrip_want ... ok\ntest repl::proto::tests::repl_message_roundtrip_welcome ... ok\ntest wal::memory_index::tests::memory_index_records_event_and_watermarks ... ok\ntest repl::proto::tests::repl_message_roundtrip_events ... ok\ntest wal::memory_index::tests::memory_index_rejects_client_request_id_mismatch ... ok\n\ntest result: ok. 44 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 375 tests\ntest cli::tests::normalize_optional_client_request_id_accepts_uuid ... ok\ntest cli::tests::normalize_optional_client_request_id_rejects_empty ... ok\ntest cli::tests::normalize_optional_namespace_accepts_core ... ok\ntest cli::tests::normalize_optional_namespace_rejects_empty ... ok\ntest cli::tests::normalize_optional_namespace_rejects_invalid_chars ... ok\ntest cli::tests::normalize_bead_id_rejects_empty ... ok\ntest cli::tests::normalize_bead_slug_rejects_invalid ... ok\ntest cli::tests::normalize_bead_id_canonicalizes ... ok\ntest cli::tests::resolve_actor_override_accepts_actor ... ok\ntest cli::tests::mutation_meta_includes_actor_override ... ok\ntest cli::tests::validate_actor_id_rejects_blank ... ok\ntest cli::tests::parse_require_min_seen_rejects_invalid_json ... ok\ntest compat::export::tests::test_hash_remote_different_urls ... ok\ntest compat::export::tests::test_hash_remote_deterministic ... ok\ntest compat::export::tests::test_export_context_path ... ok\ntest cli::tests::read_consistency_includes_read_gating ... ok\ntest cli::tests::resolve_defaults_cli_overrides_config ... ok\ntest cli::tests::parse_require_min_seen_accepts_json ... ok\ntest cli::tests::resolve_defaults_use_config_when_no_flags ... ok\ntest compat::go_schema::tests::test_derive_status ... ok\ntest compat::go_schema::tests::test_dep_kind_mapping ... ok\ntest compat::go_schema::tests::test_write_stamp_to_rfc3339 ... ok\ntest config::merge::tests::env_log_filter_overrides_config ... ok\ntest config::load::tests::config_defaults_match_plan ... ok\ntest config::merge::tests::env_path_overrides_apply ... ok\ntest config::merge::tests::merge_layers_respects_precedence ... ok\ntest config::merge::tests::env_overrides_apply ... ok\ntest config::merge::tests::env_test_fast_overrides_clamp_timers ... ok\ntest daemon::admin::tests::wal_guardrails_warn_on_limits ... ok\ntest daemon::checkpoint_scheduler::tests::debounce_reschedules_later ... ok\ntest daemon::checkpoint_scheduler::tests::dirty_during_in_flight_schedules_follow_up ... ok\ntest daemon::checkpoint_scheduler::tests::max_events_triggers_immediate ... ok\ntest daemon::checkpoint_scheduler::tests::max_interval_caps_deadline ... ok\ntest daemon::checkpoint_scheduler::tests::queue_limit_coalesces_by_group ... ok\ntest compat::export::tests::test_nonexistent_clone_path_skipped ... ok\ntest daemon::admin::tests::offline_lock_info_returns_none_when_missing ... ok\ntest compat::export::tests::test_export_with_beads ... ok\ntest compat::export::tests::test_symlink_replaced_when_wrong_target ... ok\ntest compat::export::tests::test_regular_file_backed_up_and_replaced ... ok\ntest compat::export::tests::test_symlink_skipped_when_correct ... ok\ntest daemon::core::tests::checkpoint_roster_hash_mismatch_warns ... ok\ntest compat::export::tests::test_export_empty_state ... ok\ntest daemon::core::tests::detect_clock_skew_flags_large_delta ... ok\ntest config::load::tests::config_roundtrip ... ok\ntest daemon::core::tests::detect_clock_skew_ignores_small_delta ... ok\ntest compat::export::tests::test_tombstones_not_exported ... ok\ntest compat::export::tests::test_symlink_created_when_none_exists ... ok\ntest daemon::admin::tests::offline_unlock_removes_stale_lock_file ... ok\ntest compat::export::tests::test_export_sorted_by_id ... ok\ntest compat::export::tests::test_multiple_clones_same_canonical ... ok\ntest daemon::admin::tests::offline_unlock_requires_force_for_live_daemon ... ok\ntest daemon::core::tests::complete_refresh_unknown_remote_is_noop ... ok\ntest daemon::core::tests::ensure_repo_loaded_rejects_non_git_repo ... ok\ntest daemon::core::tests::complete_refresh_applies_state_when_clean ... ok\ntest daemon::core::tests::complete_refresh_clears_flag_on_error ... ok\ntest daemon::core::tests::admin_flush_returns_output ... ok\ntest daemon::core::tests::replica_roster_enforces_permissions ... ok\ntest daemon::core::tests::replica_roster_rejects_symlink ... ok\ntest daemon::core::tests::complete_sync_preserves_local_state_on_collision ... ok\ntest daemon::durability_coordinator::tests::replicated_fsync_succeeds_after_k_acks ... ok\ntest daemon::durability_coordinator::tests::replicated_fsync_unavailable_with_insufficient_eligible ... ok\ntest daemon::durability_coordinator::tests::timeout_returns_pending_receipt ... ok\ntest daemon::executor::tests::attach_issue_includes_created_issue ... ok\ntest daemon::core::tests::complete_refresh_clears_in_progress_flag ... ok\ntest daemon::core::tests::complete_refresh_skips_state_when_dirty ... ok\ntest daemon::executor::tests::op_result_add_note_uses_note_id ... ok\ntest daemon::executor::tests::op_result_claim_reads_expiry ... ok\ntest daemon::executor::tests::op_result_claim_requires_expiry ... ok\ntest daemon::executor::tests::op_result_create_uses_delta_id ... ok\ntest daemon::core::tests::complete_refresh_schedules_sync_when_needs_sync ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_accepts_valid_bead_id ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_invalid_json_is_malformed_payload ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_rejects_invalid_bead_id ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_rejects_invalid_durability ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_rejects_invalid_namespace ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_rejects_invalid_status_value ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_rejects_oversize_frames ... ok\ntest daemon::ipc::error_mapping::tests::decode_request_semantic_error_is_invalid_request ... ok\ntest daemon::ipc::error_mapping::tests::durability_timeout_includes_receipt ... ok\ntest daemon::ipc::error_mapping::tests::invalid_json_would_cause_parse_error ... ok\ntest daemon::ipc::error_mapping::tests::lock_permission_denied_includes_details ... ok\ntest daemon::ipc::error_mapping::tests::namespace_policy_violation_includes_details ... ok\ntest daemon::ipc::error_mapping::tests::version_mismatch_error_includes_parse_error ... ok\ntest daemon::ipc::error_mapping::tests::version_mismatch_is_retryable ... ok\ntest daemon::ipc::error_mapping::tests::wal_index_equivocation_includes_details ... ok\ntest daemon::ipc::error_mapping::tests::wal_index_store_epoch_mismatch_includes_details ... ok\ntest daemon::ipc::error_mapping::tests::wal_replay_format_unsupported_includes_details ... ok\ntest daemon::ipc::error_mapping::tests::wal_replay_hash_mismatch_includes_details ... ok\ntest daemon::ipc::error_mapping::tests::wal_replay_header_decode_is_corrupt ... ok\ntest daemon::ipc::error_mapping::tests::wal_replay_prev_sha_mismatch_includes_details ... ok\ntest daemon::mutation_engine::tests::add_dep_allows_related_cycle ... ok\ntest daemon::mutation_engine::tests::add_dep_rejects_blocks_cycle ... ok\ntest daemon::mutation_engine::tests::add_dep_rejects_parent_kind ... ok\ntest daemon::mutation_engine::tests::create_with_assignee_sets_in_progress ... ok\ntest daemon::mutation_engine::tests::extend_claim_sets_in_progress ... ok\ntest daemon::mutation_engine::tests::invalid_workflow_patch_rejected_in_planning ... ok\ntest daemon::mutation_engine::tests::parsed_request_rejects_invalid_label ... ok\ntest daemon::mutation_engine::tests::planning_does_not_mutate_state ... ok\ntest daemon::mutation_engine::tests::rejects_note_over_limit ... ok\ntest daemon::mutation_engine::tests::rejects_ops_over_limit ... ok\ntest daemon::mutation_engine::tests::request_hash_is_stable_with_label_ordering ... ok\ntest daemon::mutation_engine::tests::set_parent_rejects_cycle ... ok\ntest daemon::mutation_engine::tests::set_parent_replaces_existing_parent_with_parent_ops ... ok\ntest daemon::mutation_engine::tests::stamped_context_rejects_mismatched_actor ... ok\ntest daemon::mutation_engine::tests::txn_id_includes_actor_identity ... ok\ntest daemon::mutation_engine::tests::update_rejects_clearing_required_fields ... ok\ntest daemon::mutation_engine::tests::update_rejects_empty_required_fields ... ok\ntest daemon::mutation_engine::tests::update_trims_required_fields ... ok\ntest daemon::ops::tests::bead_patch_validation ... ok\ntest daemon::query::tests::filters_default_matches_all ... ok\ntest daemon::query::tests::query_repo ... ok\ntest daemon::query_executor::tests::dep_cycles_from_state_reports_cycle ... ok\ntest daemon::query_executor::tests::issue_summary_uses_read_namespace ... ok\ntest daemon::query_executor::tests::issue_view_uses_read_namespace ... ok\ntest daemon::query_executor::tests::ready_sort_orders_by_priority_then_created_at ... ok\ntest daemon::repl::contiguous_batch::tests::contiguous_batch_accepts_valid_sequence ... ok\ntest daemon::repl::contiguous_batch::tests::contiguous_batch_rejects_duplicate ... ok\ntest daemon::repl::contiguous_batch::tests::contiguous_batch_rejects_gap ... ok\ntest daemon::repl::contiguous_batch::tests::contiguous_batch_rejects_mixed_origin ... ok\ntest daemon::repl::error::tests::to_payload_carries_details ... ok\ntest daemon::repl::error::tests::to_payload_preserves_basic_fields ... ok\ntest daemon::repl::gap_buffer::tests::deferred_event_blocks_drain ... ok\ntest daemon::repl::gap_buffer::tests::duplicate_events_are_noops ... ok\ntest daemon::repl::gap_buffer::tests::gap_bytes_overflow_rejects ... ok\ntest daemon::repl::gap_buffer::tests::gap_overflow_rejects ... ok\ntest daemon::repl::gap_buffer::tests::gap_timeout_rejects ... ok\ntest daemon::repl::gap_buffer::tests::multiple_gaps_drain_in_order ... ok\ntest daemon::repl::gap_buffer::tests::single_gap_buffers_then_drains ... ok\ntest daemon::repl::keepalive::tests::keepalive_deadline_trumps_ping ... ok\ntest daemon::repl::keepalive::tests::keepalive_emits_ping_after_idle ... ok\ntest daemon::repl::keepalive::tests::keepalive_recv_resets_deadline ... ok\ntest daemon::repl::manager::tests::backoff_exponentially_grows ... ok\ntest daemon::core::tests::read_scope_rejects_unknown_namespace ... ok\ntest daemon::repl::manager::tests::manager_fans_out_events_and_respects_policy ... ok\ntest daemon::export_worker::tests::export_worker_writes_jsonl_and_symlink ... ok\ntest daemon::repl::manager::tests::manager_connects_and_sends_hello ... ok\ntest daemon::repl::manager::tests::manager_filters_to_accepted_namespaces ... ok\ntest daemon::repl::manager::tests::send_events_respects_negotiated_max_frame_bytes ... ok\ntest daemon::repl::pending::tests::pending_events_drops_new_event_too_large ... ok\ntest daemon::repl::pending::tests::pending_events_drops_oldest_on_byte_limit ... ok\ntest daemon::repl::pending::tests::pending_events_drops_oldest_on_event_limit ... ok\ntest daemon::repl::runtime::tests::wal_range_corrupt_maps_to_wal_corrupt_details ... ok\ntest daemon::repl::runtime::tests::wal_range_index_maps_to_index_corrupt_details ... ok\ntest daemon::core::tests::ingest_accepts_orphan_note_after_append ... ok\ntest daemon::core::tests::read_gate_requires_min_seen ... ok\ntest daemon::repl::server::tests::server_listens_and_spawns_session ... ok\ntest daemon::repl::session::tests::ack_allowed_namespace_forwards_validated_ack ... ok\ntest daemon::repl::session::tests::ack_rejects_disallowed_namespace ... ok\ntest daemon::repl::session::tests::ack_rejects_mixed_namespaces ... ok\ntest daemon::repl::session::tests::decode_error_frame_too_large_maps_to_frame_too_large ... ok\ntest daemon::repl::session::tests::decode_error_indefinite_length_maps_to_non_canonical ... ok\ntest daemon::repl::session::tests::decode_error_invalid_field_maps_to_invalid_request ... ok\ntest daemon::repl::session::tests::events_apply_and_ack ... ok\ntest daemon::repl::session::tests::events_buffer_gap_sends_want ... ok\ntest daemon::repl::session::tests::events_gap_drains_when_missing_event_arrives ... ok\ntest daemon::core::tests::repl_ingest_accepts_non_core_namespace ... ok\ntest daemon::repl::session::tests::events_rejects_unaccepted_namespace ... ok\ntest daemon::repl::manager::tests::reconnects_after_disconnect ... ok\ntest daemon::repl::session::tests::events_wrong_store_errors ... ok\ntest daemon::repl::session::tests::handshake_negotiates_snapshot_only_when_peer_disables_live_stream ... ok\ntest daemon::repl::session::tests::handshake_negotiates_version_and_namespaces ... ok\ntest daemon::core::tests::read_scope_defaults_namespace_and_timeout ... ok\ntest daemon::repl::session::tests::handshake_rejects_version_incompatible ... ok\ntest daemon::repl::session::tests::hash_mismatch_maps_to_hash_mismatch_details ... ok\ntest daemon::repl::session::tests::hello_replay_accepts_reordered_namespaces ... ok\ntest daemon::repl::session::tests::protocol_range_exact_negotiates ... ok\ntest daemon::repl::session::tests::protocol_range_rejects_inverted ... ok\ntest daemon::repl::session::tests::prev_mismatch_maps_to_prev_sha_mismatch_details ... ok\ntest daemon::repl::session::tests::repl_lagged_payload_includes_reason ... ok\ntest daemon::repl::session::tests::typestate_outbound_reaches_snapshot_streaming ... ok\ntest daemon::repl::session::tests::typestate_outbound_reaches_streaming ... ok\ntest daemon::repl::session::tests::welcome_rejects_stale_nonce_after_hello_resend ... ok\ntest daemon::repl::session::tests::welcome_rejects_nonce_mismatch ... ok\ntest daemon::repl::session::tests::welcome_sends_initial_want_when_peer_ahead ... ok\ntest daemon::core::tests::non_core_mutation_and_query_use_namespace_state ... ok\ntest daemon::repl::want::tests::want_frames_stop_at_gap ... ok\ntest daemon::repl::want::tests::want_frames_round_robin_interleaves_keys ... ok\ntest daemon::server::tests::durability_waiter_releases_on_quorum ... ok\ntest daemon::server::tests::durability_waiter_times_out ... ok\ntest daemon::server::tests::request_context_extracts_create_fields ... ok\ntest daemon::server::tests::request_context_extracts_show_fields ... ok\ntest daemon::server::tests::stream_event_decode_failure_is_wal_corrupt ... ok\ntest daemon::server::tests::request_span_includes_schema_fields ... ok\ntest daemon::repl::server::tests::connection_limit_enforced ... ok\ntest daemon::store::discovery::tests::resolve_store_id_uses_cached_verified_without_opening_repo ... ok\ntest daemon::core::tests::ingest_uses_canonical_sha_for_index_and_watermarks ... ok\ntest daemon::core::tests::wal_checkpoint_deadline_tracks_interval ... ok\ntest daemon::repl::server::tests::unknown_replica_rejected_when_roster_present ... ok\ntest daemon::core::tests::ingest_rotation_seals_previous_segment ... ok\ntest daemon::core::tests::store_lock_heartbeat_updates_metadata ... ok\ntest daemon::store::runtime::tests::namespace_policies_fall_back_to_defaults_when_missing ... ok\ntest daemon::executor::tests::idempotent_retry_reuses_wal_mapping ... ok\ntest daemon::store::lock::tests::acquire_keeps_live_lock_when_pid_alive ... ok\ntest daemon::store::runtime::tests::namespace_policies_enforce_permissions ... ok\ntest daemon::store::lock::tests::acquire_reclaims_stale_lock_when_pid_missing ... ok\ntest daemon::store::runtime::tests::namespace_policies_reject_symlink ... ok\ntest daemon::repl::manager::tests::manager_skips_live_stream_when_disabled ... ok\ntest daemon::executor::tests::mutation_span_includes_realtime_context ... ok\ntest daemon::subscription::tests::backfill_corrupt_range_is_corruption ... ok\ntest daemon::subscription::tests::backfill_missing_range_is_bootstrap_required ... ok\ntest daemon::subscription::tests::backfill_plan_reads_ranges_and_tracks_last_seq ... ok\ntest daemon::store::runtime::tests::store_runtime_rejects_version_mismatch ... ok\ntest daemon::wal::event_wal::tests::event_wal_reuses_active_segment ... ok\ntest daemon::wal::frame::tests::frame_crc_mismatch_fails ... ok\ntest daemon::wal::frame::tests::frame_roundtrip_validates_crc ... ok\ntest daemon::core::tests::restores_hlc_state_for_non_daemon_actor ... ok\ntest daemon::wal::index::tests::client_request_event_ids_rejects_empty ... ok\ntest daemon::wal::index::tests::client_request_event_ids_rejects_mixed_namespace ... ok\ntest daemon::wal::index::tests::client_request_event_ids_rejects_mixed_origin ... ok\ntest daemon::wal::index::tests::client_request_event_ids_rejects_out_of_order ... ok\ntest daemon::wal::index::tests::replica_durability_role_rejects_observer_eligible ... ok\ntest daemon::wal::index::tests::client_request_event_ids_round_trip_encode ... ok\ntest daemon::wal::index::tests::replica_durability_role_reports_role_and_eligibility ... ok\ntest daemon::store::discovery::tests::remote_fallback_is_unverified_and_not_persisted ... ok\ntest daemon::store::runtime::tests::checkpoint_snapshot_includes_roster_hash ... ok\ntest daemon::wal::event_wal::tests::event_wal_rotates_on_size ... ok\ntest daemon::server::tests::read_gate_waiter_times_out ... ok\ntest daemon::server::tests::read_gate_waiter_releases_on_apply ... ok\ntest daemon::wal::index::tests::sqlite_index_hlc_upsert_overwrites ... ok\ntest daemon::store::runtime::tests::store_config_defaults_to_cache_and_persists ... ok\ntest daemon::store::runtime::tests::checkpoint_dirty_shards_roundtrip ... ok\ntest daemon::store::discovery::tests::resolve_store_id_reports_mismatched_meta_and_refs ... ok\ntest daemon::store::runtime::tests::store_config_durable_mode_applies ... ok\ntest daemon::store::runtime::tests::phase3_head_sha_loads_from_index ... ok\ntest daemon::store::runtime::tests::phase3_head_sha_rejects_missing_head ... ok\ntest daemon::store::discovery::tests::discover_store_id_ignores_backup_refs ... ok\ntest daemon::store::runtime::tests::store_runtime_persists_orset_counter ... ok\ntest daemon::wal::index::tests::sqlite_index_rejects_symlinked_db_path ... ok\ntest daemon::wal::index::tests::sqlite_index_checkpoint_truncates_wal_file ... ok\ntest daemon::wal::index::tests::sqlite_index_rejects_symlinked_index_dir ... ok\ntest daemon::wal::index::tests::sqlite_index_initializes_schema_and_meta ... ok\ntest daemon::wal::memory_index::tests::memory_index_records_event_and_watermarks ... ok\ntest daemon::wal::memory_index::tests::memory_index_rejects_client_request_id_mismatch ... ok\ntest daemon::wal::index::tests::sqlite_index_pools_connections_after_txn ... ok\ntest daemon::wal::memory_wal::tests::memory_wal_append_roundtrip ... ok\ntest daemon::wal::record::tests::record_decode_rejects_header_len_larger_than_flags_imply ... ok\ntest daemon::wal::record::tests::record_decode_rejects_request_sha_without_client_request_id ... ok\ntest daemon::wal::record::tests::record_decode_rejects_seq0 ... ok\ntest daemon::wal::memory_wal::tests::memory_wal_rotates_on_size ... ok\ntest daemon::wal::record::tests::record_encode_roundtrip_without_request ... ok\ntest daemon::wal::record::tests::record_roundtrip_with_client_request_id_only ... ok\ntest daemon::wal::record::tests::record_verify_rejects_header_mismatch ... ok\ntest daemon::wal::record::tests::record_roundtrip_with_optional_fields ... ok\ntest daemon::wal::record::tests::record_verify_rejects_noncanonical_payload ... ok\ntest daemon::wal::replay::tests::list_namespaces_rejects_symlinked_namespace_dir ... ok\ntest daemon::core::tests::load_from_checkpoint_ref_sets_watermarks ... ok\ntest daemon::wal::replay::tests::list_segments_rejects_symlinked_dir ... ok\ntest daemon::wal::index::tests::sqlite_index_pool_caps_idle_connections ... ok\ntest daemon::wal::index::tests::sqlite_index_persists_hlc_state ... ok\ntest daemon::wal::segment::tests::segment_header_roundtrip ... ok\ntest daemon::wal::index::tests::sqlite_index_record_event_equivocation_errors ... ok\ntest daemon::wal::index::tests::sqlite_index_preserves_client_request_mapping_on_conflict ... ok\ntest daemon::wal::segment::tests::segment_open_rejects_symlinked_namespace_dir ... ok\ntest daemon::wal::replay::tests::scan_segment_detects_sha_mismatch ... ok\ntest error::tests::command_runtime_daemon_error_maps_to_op_daemon_preserving_payload ... ok\ntest error::tests::command_runtime_daemon_non_retryable_maps_to_permanent ... ok\ntest daemon::wal::segment::tests::record_size_limit_enforced ... ok\ntest daemon::wal::segment::tests::append_uses_data_fsync ... ok\ntest daemon::wal::segment::tests::segment_open_sets_dir_permissions ... ok\ntest git::checkpoint::export::tests::export_builds_manifest_and_meta ... ok\ntest git::checkpoint::export::tests::export_reuses_clean_shards ... ok\ntest git::checkpoint::export::tests::export_writes_sorted_shards ... ok\ntest git::checkpoint::export::tests::roster_hash_is_stable_for_reordered_entries ... ok\ntest git::checkpoint::export::tests::snapshot_builds_shards_and_includes_watermarks ... ok\ntest git::checkpoint::export::tests::snapshot_rejects_unknown_dirty_shard ... ok\ntest git::checkpoint::export::tests::snapshot_respects_dirty_shards_input ... ok\ntest daemon::wal::index::tests::sqlite_index_record_event_idempotent_on_duplicate_sha ... ok\ntest git::checkpoint::import::tests::import_export_accepts_v1 ... ok\ntest daemon::wal::index::tests::sqlite_index_rejects_open_segment_with_final_len ... ok\ntest git::checkpoint::import::tests::import_export_rejects_store_id_mismatch ... ok\ntest daemon::wal::index::tests::sqlite_index_rejects_invalid_watermark_rows ... ok\ntest git::checkpoint::cache::tests::load_current_errors_on_missing_entry ... ok\ntest daemon::wal::segment::tests::segment_rotates_on_size ... ok\ntest daemon::wal::index::tests::sqlite_index_round_trips_replica_liveness ... ok\ntest daemon::wal::index::tests::sqlite_index_rejects_sealed_segment_without_final_len ... ok\ntest git::checkpoint::import::tests::import_rejects_manifest_hash_mismatch ... ok\ntest git::checkpoint::import::tests::merge_store_states_is_commutative ... ok\ntest git::checkpoint::import::tests::store_state_from_legacy_places_state_in_core_namespace ... ok\ntest git::checkpoint::json_canon::tests::canon_json_sorts_keys ... ok\ntest git::checkpoint::layout::tests::checkpoint_shard_path_rejects_invalid_path ... ok\ntest git::checkpoint::layout::tests::checkpoint_shard_path_round_trips_via_serde ... ok\ntest git::checkpoint::layout::tests::shard_name_parse_rejects_invalid ... ok\ntest git::checkpoint::manifest::tests::manifest_hash_matches_canonical_bytes ... ok\ntest git::checkpoint::meta::tests::content_hash_matches_preimage ... ok\ntest git::checkpoint::import::tests::parse_export_rejects_unsupported_version ... ok\ntest git::checkpoint::import::tests::import_rejects_unsupported_version ... ok\ntest git::checkpoint::import::tests::parse_export_rejects_namespace_mismatch ... ok\ntest daemon::wal::index::tests::sqlite_index_round_trips_segments ... ok\ntest git::sync::tests::backup_lock_cleanup_policy_is_age_and_pid_aware ... ok\ntest git::checkpoint::import::tests::import_rejects_out_of_order_state_entries ... ok\ntest git::checkpoint::import::tests::import_rejects_shard_entry_limit ... ok\ntest daemon::wal::index::tests::sqlite_index_round_trips_watermarks ... ok\ntest git::checkpoint::import::tests::import_rejects_oversize_line ... ok\ntest git::checkpoint::import::tests::import_rejects_json_depth_exceeded ... ok\ntest git::checkpoint::cache::tests::cache_load_current_export_roundtrips ... ok\ntest daemon::wal::index::tests::sqlite_index_round_trips_events_and_requests ... ok\ntest git::checkpoint::cache::tests::cache_publish_updates_current_and_loads ... ok\ntest git::sync::tests::merge_keeps_tombstones_without_gc ... ok\ntest daemon::wal::replay::tests::cleanup_orphan_tmp_segments_removes_unreferenced ... ok\ntest daemon::wal::index::tests::sqlite_index_rejects_schema_version_mismatch ... ok\ntest git::sync::tests::fetch_best_effort_surfaces_error ... ok\ntest git::checkpoint::cache::tests::cache_prunes_old_entries ... ok\ntest git::sync::tests::backup_ref_lock_contention_metrics_for_create_and_delete ... ok\ntest git::sync::tests::prune_backup_refs_recovers_from_stale_lockfile ... ok\ntest git::sync::tests::ensure_backup_ref_recovers_from_stale_lockfile ... ok\ntest git::sync::tests::sync_diff_count_message ... ok\ntest git::sync::tests::sync_diff_detailed_message ... ok\ntest git::sync::tests::sync_diff_marks_dep_changes_as_updates ... ok\ntest git::sync::tests::sync_diff_truncates_long_titles ... ok\ntest git::sync::tests::prune_backup_refs_skips_live_lock_without_failing_refresh_path ... ok\ntest git::sync::tests::read_state_at_oid_allows_missing_meta ... ok\ntest git::wire::tests::dep_ops_with_distinct_stamps_are_deterministic ... ok\ntest git::wire::tests::insert_label_state_merges_existing_entry ... ok\ntest git::wire::tests::label_ops_with_distinct_stamps_are_deterministic ... ok\ntest git::wire::tests::legacy_deps_jsonl_parses_expected_entries ... ok\ntest git::wire::tests::legacy_deps_parse_then_serialize_is_deterministic ... ok\ntest git::wire::tests::parse_deps_rejects_duplicate ... ok\ntest git::wire::tests::parse_deps_rejects_out_of_order ... ok\ntest git::wire::tests::parse_legacy_state_migrates_unscoped_notes ... ok\ntest git::wire::tests::parse_notes_rejects_duplicate_note_id ... ok\ntest git::wire::tests::parse_notes_rejects_out_of_order ... ok\ntest git::wire::tests::parse_state_accepts_legacy_assignee_without_assignee_at ... ok\ntest git::wire::tests::parse_state_accepts_legacy_closed_without_closed_at_by ... ok\ntest git::wire::tests::parse_state_accepts_legacy_labels_array ... ok\ntest git::wire::tests::parse_state_rejects_assignee_expires_without_assignee ... ok\ntest git::wire::tests::parse_state_rejects_duplicate ... ok\ntest git::wire::tests::parse_state_rejects_mismatched_closed_stamp ... ok\ntest git::wire::tests::parse_state_rejects_out_of_order ... ok\ntest git::wire::tests::parse_state_rejects_partial_closed_redundant_fields ... ok\ntest git::wire::tests::parse_state_roundtrip ... ok\ntest git::wire::tests::parse_supported_meta_accepts_missing_notes_checksum_for_legacy_v1 ... ok\ntest git::wire::tests::parse_supported_meta_accepts_v1_with_checksums ... ok\ntest git::wire::tests::parse_supported_meta_rejects_invalid_root_slug ... ok\ntest git::wire::tests::parse_supported_meta_rejects_missing_required_checksums ... ok\ntest git::wire::tests::parse_supported_meta_rejects_unsupported_version ... ok\ntest git::wire::tests::parse_tombstones_rejects_duplicate ... ok\ntest git::wire::tests::parse_tombstones_rejects_out_of_order ... ok\ntest git::sync::tests::read_state_at_oid_errors_on_checksum_mismatch ... ok\ntest git::wire::tests::roundtrip_empty_state ... ok\ntest git::wire::tests::roundtrip_meta ... ok\ntest git::wire::tests::roundtrip_orset_metadata_and_notes ... ok\ntest git::wire::tests::roundtrip_orset_metadata_preserves_dots_and_context ... ok\ntest git::wire::tests::roundtrip_deps ... ok\ntest git::wire::tests::roundtrip_tombstones ... ok\ntest git::sync::tests::init_does_not_override_existing_local_ref ... ok\ntest git::wire::tests::serialize_deps_sorts_by_dep_kind_canonical ... ok\ntest git::wire::tests::serialize_state_emits_workflow_and_claim_timestamps ... ok\ntest git::wire::tests::serialize_orset_is_deterministic_across_insertion_order ... ok\ntest git::wire::tests::serialize_state_includes_sparse_v_for_overrides ... ok\ntest git::wire::tests::serialize_state_omits_sparse_v_when_stamps_match ... ok\ntest git::wire::tests::verify_store_checksums_detects_mismatch ... ok\ntest telemetry::tests::daemon_logging_defaults_apply_in_default_mode ... ok\ntest paths::tests::init_from_config_updates_overrides ... ok\ntest telemetry::tests::daemon_logging_defaults_skip_in_tests ... ok\ntest telemetry::tests::daemon_logging_defaults_skip_with_log_file_env ... ok\ntest telemetry::tests::log_filter_falls_back_to_verbosity ... ok\ntest telemetry::tests::log_filter_prefers_log_env_over_config ... ok\ntest telemetry::tests::log_filter_uses_config_when_env_missing ... ok\ntest telemetry::tests::prune_log_entries_respects_age_and_count ... ok\ntest upgrade::tests::version_compare ... ok\ntest git::wire::tests::roundtrip_state ... ok\ntest git::sync::tests::read_state_at_oid_reads_meta_last_write_stamp ... ok\ntest git::sync::tests::fetch_updates_remote_tracking_ref ... ok\ntest git::sync::tests::read_state_at_oid_errors_on_invalid_meta ... ok\ntest upgrade::tests::install_binary_copies_and_sets_permissions ... ok\ntest git::sync::tests::fetch_detects_divergence ... ok\ntest git::sync::tests::fetch_preserves_local_ahead_and_creates_backup ... ok\ntest git::sync::tests::fetch_fast_forwards_when_remote_ahead ... ok\ntest git::sync::tests::prune_backup_refs_reports_scan_and_pruned_metrics ... ok\ntest git::checkpoint::publish::tests::publish_checkpoint_returns_too_many_retries_when_limit_exceeded ... ok\ntest git::sync::tests::sync_with_retry_respects_max_retries_on_non_fast_forward ... ok\ntest git::sync::tests::sync_with_retry_reports_divergence ... ok\ntest git::checkpoint::publish::tests::publish_checkpoint_merges_on_non_fast_forward_and_converges ... ok\ntest git::sync::tests::fetch_prunes_existing_backup_refs ... ok\ntest git::sync::tests::ensure_backup_ref_prunes_to_max_and_keeps_latest ... ok\n\ntest result: ok. 375 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 1.77s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 4 tests\ntest join_commutative_with_collision ... ok\ntest join_idempotent ... ok\ntest join_commutative ... ok\ntest join_associative ... ok\n\ntest result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.08s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 106 tests\ntest checkpoint::checkpoint_manifest_hashes_match_files ... ok\ntest checkpoint::checkpoint_multi_namespace_includes_all_namespaces ... ok\ntest checkpoint::checkpoint_export_is_deterministic ... ok\ntest core::apply::apply_event_is_idempotent ... ok\ntest core::apply::dep_delete_then_readd_restores_indexes ... ok\ntest core::apply::dep_dot_collision_is_deterministic ... ok\ntest core::apply::join_bead_collision_is_deterministic_and_inserts_lineage_tombstone ... ok\ntest core::apply::lww_merge_ordering_is_deterministic ... ok\ntest core::apply::label_dot_collision_is_deterministic ... ok\ntest core::apply::note_collision_is_deterministic ... ok\ntest core::apply::orphan_dep_ops_become_visible_after_create ... ok\ntest core::apply::orphan_label_and_note_ops_become_visible_after_create ... ok\ntest core::cbor::canonical_cbor_bytes_match_fixture ... ok\ntest core::cbor::canonical_cbor_hash_matches_fixture ... ok\ntest core::cbor::decode_rejects_indefinite_length_map ... ok\ntest core::cbor::decode_rejects_oversized_payload ... ok\ntest core::deps::dep_add_remove_is_idempotent ... ok\ntest core::deps::dep_delete_then_readd_across_kinds ... ok\ntest core::deps::parent_edge_add_remove_updates_state ... ok\ntest core::deps::dep_kind_ordering_in_serialize_is_canonical ... ok\ntest core::deps::dep_indexes_match_dep_store ... ok\ntest core::event_validation::sample_event_body_validates ... ok\ntest core::identity::namespace_id_validation_accepts_and_rejects ... ok\ntest core::identity::store_discovery_normalizes_remote_url ... ok\ntest core::identity::lock_file_enforces_exclusive_create ... ok\ntest daemon::admin::admin_clock_anomaly_serializes_in_status_and_doctor ... ok\ntest checkpoint::checkpoint_import_rejects_corrupt_files ... ok\ntest checkpoint::checkpoint_included_watermarks_match ... ok\ntest core::identity::store_meta_roundtrip_persists_identity ... ok\ntest core::identity::store_identity_survives_reopen ... ok\ntest checkpoint::checkpoint_round_trip_preserves_state_and_manifest ... ok\ntest cli::upgrade::upgrade_rejects_checksum_mismatch ... ok\ntest cli::upgrade::upgrade_installs_fake_binary ... ok\ntest cli::upgrade::upgrade_verifies_checksum ... ok\ntest daemon::admin::admin_fingerprint_sample_is_deterministic ... ok\ntest cli::critical_path::test_auto_init_on_first_create ... ok\ntest daemon::admin::admin_metrics_includes_counters ... ok\ntest daemon::store_lock::store_lock_acquire_writes_metadata ... ok\ntest daemon::store_lock::store_lock_held_surfaces_metadata ... ok\ntest daemon::admin::admin_metrics_includes_ipc_request_histograms ... ok\ntest daemon::admin::admin_maintenance_blocks_mutations ... ok\ntest daemon::store_lock::store_lock_permissions_are_restricted ... ok\ntest fixtures::admin_status::tests::fixtures_admin_status_monotonic_empty_samples ... ok\ntest fixtures::checkpoint::tests::fixtures_checkpoint_multi_namespace_contains_two_namespaces ... ok\ntest fixtures::checkpoint::tests::fixtures_checkpoint_small_manifest_and_meta_hashes ... ok\ntest fixtures::checkpoint::tests::fixtures_checkpoint_tombstone_has_tombstone_shards ... ok\ntest daemon::store_lock::store_paths_live_under_bd_data_dir ... ok\ntest fixtures::checkpoint_diff::tests::fixtures_checkpoint_diff_detects_payload_change ... ok\ntest fixtures::daemon_runtime::tests::parse_etime_to_secs_supports_ps_formats ... ok\ntest fixtures::checkpoint_diff::tests::fixtures_checkpoint_diff_empty_for_equal_exports ... ok\ntest fixtures::ipc_stream::tests::fixtures_ipc_stream_parses_event ... ok\ntest fixtures::ipc_stream::tests::fixtures_ipc_stream_parses_subscribed ... ok\ntest daemon::store_lock::store_lock_rejects_symlink_path ... ok\ntest fixtures::mutation::tests::builders_cover_all_mutation_variants ... ok\ntest fixtures::mutation::tests::request_sha256_supports_all_requests ... ok\ntest fixtures::repl_frames::tests::fixtures_repl_frames_roundtrip ... ok\ntest fixtures::repl_peer::tests::fixtures_repl_peer_handshake_and_events ... ok\ntest fixtures::repl_transport::tests::fixtures_repl_transport_delay_and_drop ... ok\ntest fixtures::repl_transport::tests::fixtures_repl_transport_roundtrip ... ok\ntest fixtures::load_gen::tests::fixtures_load_gen_reports_failures_when_daemon_missing ... ok\ntest realtime_errors::realtime_error_codes_are_known ... ok\ntest repl::ack::repl_ack_advances_watermarks ... ok\ntest repl::ack::repl_equivocation_errors ... ok\ntest repl::ack::repl_gap_triggers_want ... ok\ntest repl::ack::repl_prev_sha_mismatch_rejects ... ok\ntest fixtures::wal::tests::temp_wal_dir_writes_segment ... ok\ntest repl::backpressure::repl_backpressure_overload_emits_error ... ok\ntest daemon::admin::admin_rebuild_index_requires_maintenance ... ok\ntest daemon::admin::admin_fingerprint_full_includes_shards ... ok\ntest cli::critical_path::test_init_creates_beads_branch ... ok\ntest cli::critical_path::test_error_handling_invalid_id ... ok\ntest wal::fsck::fsck_clean_segment_passes ... ok\ntest cli::critical_path::test_create_show_close_workflow ... ok\ntest repl::ack::repl_want_reads_from_wal ... ok\ntest repl::range::wal_range_reader_rejects_internal_gap ... ok\ntest wal::fsck::fsck_reports_header_mismatch ... ok\ntest repl::range::wal_range_reader_returns_contiguous_frames ... ok\ntest daemon::admin::admin_reload_policies_reports_safe_and_restart_changes ... ok\ntest cli::critical_path::test_dependencies ... ok\ntest repl::range::wal_range_reader_rejects_prev_sha_mismatch ... ok\ntest wal::fsck::fsck_stops_after_record_sha_mismatch ... ok\ntest wal::fsck::fsck_repair_quarantines_mid_file_corruption ... ok\ntest daemon::admin::admin_scrub_reports_segment_header_failure ... ok\ntest wal::receipts::receipt_min_seen_is_monotonic ... ok\ntest cli::critical_path::test_status_overview ... ok\ntest wal::fsck::fsck_repair_truncates_tail ... ok\ntest daemon::admin::admin_doctor_includes_checks ... ok\ntest wal::idempotency::request_sha_mismatch_returns_error ... ok\ntest wal::idempotency::idempotency_mapping_reuses_txn_and_event_ids ... ok\ntest wal::wal_tests::wal_framing_roundtrips_records ... ok\ntest wal::receipts::receipt_survives_restart ... ok\ntest wal::index::index_rebuild_populates_watermarks_and_segments ... ok\ntest wal::seq::seq_allocation_is_monotonic ... ok\ntest wal::index::index_catch_up_scans_new_frames ... ok\ntest wal::index::index_marks_sealed_segments ... ok\ntest wal::fsck::fsck_reports_sealed_len_mismatch ... ok\ntest wal::index::index_replay_rejects_sealed_len_mismatch ... ok\ntest wal::receipts::origin_seq_after_restart_is_max_plus_one ... ok\ntest wal::seq::seq_allocation_resumes_after_replay ... ok\ntest wal::wal_tests::wal_mid_file_corruption_fails_fast ... ok\ntest wal::wal_tests::wal_tail_truncation_repairs_partial_record ... ok\ntest wal::wal_tests::wal_replay_rejects_header_mismatch ... ok\ntest daemon::realtime_smoke::realtime_smoke_applies_and_persists ... ok\ntest daemon::admin::admin_status_includes_expected_fields ... ok\ntest cli::migration::test_migrate_dry_run ... ok\ntest fixtures::daemon_runtime::tests::shutdown_daemon_removes_stale_store_lock ... ok\n\ntest result: ok. 106 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 3.39s\n\n\nrunning 38 tests\ntest ipc::types::tests::ping_info_serializes_as_query ... ok\ntest ipc::types::tests::repo_ctx_serializes_as_repo_field ... ok\ntest ipc::client::tests::socket_dir_candidates_prefers_runtime_env ... ok\ntest ipc::client::tests::socket_dir_candidates_prefers_runtime_override ... ok\ntest ipc::payload::tests::close_payload_decodes_with_reason ... ok\ntest ipc::types::tests::response_err ... ok\ntest ipc::types::tests::read_consistency_roundtrip_preserves_namespace ... ok\ntest ipc::types::tests::response_ok ... ok\ntest ipc::client::tests::version_check_uses_meta_when_matching ... ok\ntest ipc::payload::tests::update_payload_rejects_closed_status ... ok\ntest ipc::types::tests::show_details_roundtrip ... ok\ntest ipc::client::tests::version_check_rejects_meta_mismatch ... ok\ntest ipc::types::tests::show_multiple_roundtrip ... ok\ntest ipc::types::tests::claim_defaults_lease_secs ... ok\ntest ipc::types::tests::extend_claim_requires_lease_secs ... ok\ntest ipc::types::tests::request_roundtrip ... ok\ntest ipc::spawn_sanitizer::tests::spawn_command_closes_non_stdio_fds_in_child ... ok\ntest ipc::types::tests::unit_variants_are_distinguishable ... ok\ntest ops::tests::bead_patch_normalization_rejects_required_field_clear ... ok\ntest ipc::types::tests::subscribe_roundtrip ... ok\ntest ops::tests::bead_patch_normalization_rejects_whitespace_only_required_field ... ok\ntest ops::tests::bead_patch_normalization_trims_required_fields ... ok\ntest ops::tests::bead_patch_validation_allows_optional_field_clear ... ok\ntest ops::tests::bead_patch_validation_rejects_description_clear ... ok\ntest ops::tests::bead_patch_validation_rejects_required_field_clear ... ok\ntest ipc::types::tests::unit_variants_roundtrip ... ok\ntest ops::tests::bead_patch_validation_rejects_required_field_empty ... ok\ntest ops::tests::patch_apply ... ok\ntest ops::tests::patch_default_is_keep ... ok\ntest store_admin::tests::daemon_pid_probe_returns_none_for_non_daemon_info_response ... ok\ntest store_admin::tests::daemon_pid_probe_returns_pid_for_typed_ping_response ... ok\ntest store_admin::tests::fsck_call_falls_back_on_unexpected_response_shape ... ok\ntest store_admin::tests::fsck_call_maps_invalid_request_error_with_field ... ok\ntest store_admin::tests::fsck_call_returns_typed_output ... ok\ntest store_admin::tests::lock_info_call_falls_back_on_daemon_unavailable ... ok\ntest store_admin::tests::lock_info_call_returns_typed_output ... ok\ntest store_admin::tests::unlock_call_returns_typed_output ... ok\ntest store_admin::tests::unlock_call_omits_field_when_code_is_not_invalid_request ... ok\n\ntest result: ok. 38 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 1 test\ntest crates/beads-core/src/state.rs - state::CanonicalState::require_live (line 967) ... ignored\n\ntest result: ok. 0 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 1 test\ntest crates/beads-core/src/apply.rs - apply::apply_event (line 53) - compile fail ... ok\n\ntest result: ok. 1 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.07s\n\nall doctests ran in 0.41s; merged doctests compilation took 0.14s\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n\nrunning 1 test\ntest crates/beads-macros/src/lib.rs - enum_str (line 9) ... ignored\n\ntest result: ok. 0 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\nall doctests ran in 0.35s; merged doctests compilation took 0.14s\n\nrunning 1 test\ntest crates/beads-rs/src/git/sync.rs - git::sync::SyncProcess (line 276) ... ignored\n\ntest result: ok. 0 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\nall doctests ran in 0.36s; merged doctests compilation took 0.14s\n\nrunning 0 tests\n\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s pass\\n\\n**Files**\\n- crates/beads-rs/src/daemon/**\\n- (tests as needed)","id":"bd-1vt.1","labels":{"cc":{"max":{}},"entries":{}},"priority":1,"status":"open","title":"Phase II: daemon internal modularization + trait seams","type":"task"}
{"_at":[1767920152435,0],"_by":"darin@darinsmcstudio2.lan","created_at":[1767916438346,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nSimplification work is scattered across CLI/daemon and lacks a single epic to track dependencies and progress.\n\n**Design**\nGroup simplification beads under this epic so we can track progress and sequence work.\n\n**Acceptance**\n- [ ] All child beads are completed.\n\n**Files:** n/a","id":"bd-omw","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Cleanup: simplify CLI/daemon reasoning","type":"epic"}
{"_at":[1769211599242,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Test: meta.json present but invalid -> read_state_at_oid returns error.\\n- [ ] Test: meta.json present with checksums -> checksum mismatch returns error.\\n- [ ] Test: meta.json absent -> load succeeds (legacy behavior).","assignee":"darin@book","created_at":[1769209799974,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nread_state_at_oid ignores meta.json if parsing fails, silently skipping checksum verification even though meta.json exists. This violates spec and masks corruption.\\n\\n**Files**: src/git/sync.rs, src/git/wire.rs","design":"**Design**\\n- If meta.json exists and parse_meta fails, return a SyncError (do not load state).\\n- If parse_meta succeeds and checksums are present, always verify.\\n- Preserve existing behavior only when meta.json is absent.\\n\\nAdd focused tests in sync to cover corrupted meta.json and checksum mismatch behavior.","id":"bd-qz97.4","labels":{"cc":{"max":{}},"entries":{}},"priority":1,"status":"closed","title":"Meta.json corruption must fail load + checksum verification","type":"bug"}
