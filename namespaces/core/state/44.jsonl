{"_at":[1768336320713,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@darinsmacstudio.lan","created_at":[1768178744328,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nPlan requires priority ordering and overload shedding to protect local mutations from replication storms.\n\n**Context**\n- REALTIME_PLAN.md ยง0.19 (overload shedding, internal backpressure defaults)\n- Priority: local IPC > replication ingest > WANT servicing > checkpoint\n\n**Design**\n- Add `AdmissionController` to src/daemon/admission.rs\n- Track inflight counts: ipc_mutations, repl_ingest_bytes, repl_ingest_events\n- Enforce limits: MAX_IPC_INFLIGHT_MUTATIONS (1024), MAX_REPL_INGEST_QUEUE_BYTES (32 MiB), MAX_REPL_INGEST_QUEUE_EVENTS (50k)\n- When overloaded: shed replication first, then IPC\n- Return ERROR(code=\"overloaded\") with retry_after_ms\n\n**Acceptance**\n- [ ] AdmissionController tracks inflight by priority class\n- [ ] Replication shed before IPC mutations\n- [ ] Limits enforced with ERROR(code=\"overloaded\")\n- [ ] Tests verify shedding order\n\n**Files:** src/daemon/admission.rs (new), src/daemon/core.rs, src/daemon/repl/session.rs","id":"bd-3m5.29","labels":{"cc":{"max":{}},"entries":{}},"priority":1,"status":"closed","title":"Phase 5: AdmissionController + overload shedding","type":"task"}
{"_at":[1768801183268,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768778065267,0],"created_by":"darin@darinsmcstudio2.lan","description":"tests/integration/daemon/admin.rs currently shells out to  for init/create/admin status/metrics/etc. These are daemon-level tests and can use IpcClient + Request::* directly. Keep CLI JSON shape tests in tests/integration/cli instead. Should reduce process spawn overhead and runtime.","id":"bd-zl2m","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Daemon admin tests use bd CLI; move to IPC for speed","type":"chore"}
