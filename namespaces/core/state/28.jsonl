{"_at":[1766124452235,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@dusk","created_at":[1766116454864,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\n`SyncProcess::fetch` force-updates `refs/heads/beads/store` to match remote and uses `unwrap_or(Oid::zero())` for ref lookup. If local is ahead/diverged, this overwrites local commits; if ref lookup errors, we treat it as missing. Both can lose durable local history.\n\n**Design**\n- Use ref lookup that distinguishes NotFound vs error.\n- Only fast-forward local ref when it is an ancestor of remote.\n- If local is ahead/diverged, create a backup ref (e.g., `refs/beads/backup/<oid>`) before any update and avoid forcing local to remote.\n- Keep commit parent as remote head for linear history.\n- Add tests covering local-ahead and diverged scenarios.\n\n**Acceptance**\n- [ ] No forced local ref update when local ahead/diverged\n- [ ] Backup refs created for diverged local history\n- [ ] Ref lookup errors are surfaced\n- [ ] Tests cover ancestry check + backup behavior\n- [ ] Tests pass\n\n**Files:** src/git/sync.rs, src/git/error.rs","id":"bd-34g","labels":{"cc":{"max":{}},"entries":{}},"priority":0,"status":"closed","title":"Sync fetch must not clobber local ref (ancestry check + backup)","type":"bug"}
{"_at":[1768823796304,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] LoadConfig has no autostart bool flag\\n- [ ] Callers use Autostart enum\\n- [ ] Tests compile and pass","assignee":"darin@book","created_at":[1768823430256,0],"created_by":"darin@darinsmcstudio2.lan","description":"LoadConfig in tests/integration/fixtures/load_gen.rs uses an autostart bool flag, which is easy to misread. Replace with a small enum (Autostart::{Enabled, Disabled}) and update callers that set the flag.","design":"Introduce Autostart enum in load_gen fixture; replace LoadConfig.autostart bool with Autostart. Provide helper method to convert to bool for IpcClient::with_autostart. Update tests that set autostart to use the enum.","id":"bd-hovg","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Replace LoadConfig autostart bool with typed enum","type":"chore"}
