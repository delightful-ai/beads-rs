{"_at":[1768904290519,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Bead no longer stores notes or labels\n- [ ] updated_at and content_hash computed via BeadView\n- [ ] API/query outputs unchanged (except sourced from stores)\n\n**Invariants to re-verify**\n- [ ] updated_stamp >= all field/label/note stamps for a bead\n- [ ] content_hash is deterministic and stable for identical inputs","assignee":"darin@book","created_at":[1768894651404,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nBead currently owns notes + labels, and updated_stamp/content_hash depend on those fields.\n\n**Files**\n- src/core/bead.rs\n- src/core/wire_bead.rs\n- src/api/issues.rs\n- src/daemon/query_model.rs\n- src/daemon/query_executor.rs","design":"Introduce BeadView that joins Bead + LabelStore + NoteStore. Move updated_stamp + content_hash + WireBeadFull rendering to BeadView. Replace all usage of bead.updated_stamp() with state.bead_view().","id":"bd-3zoj.4","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"BeadView + derived updated/content hash","type":"task"}
{"_at":[1765775468839,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@dusk","created_at":[1765744523302,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nCannot reparent a bead after creation. Beads created independently cannot be linked to an epic as children later.\n\nCurrently `--parent` only works at create time:\n```\nbd create \"subtask\" --parent=bd-epic\n```\n\n**Solution**\nAdd `--parent` flag to `bd update`:\n```\nbd update bd-xyz --parent=bd-epic\n```\n\n**Design Notes**\n- Should validate parent exists and is not deleted\n- Should prevent circular parent relationships\n- Consider `--parent=\"\"` or `--no-parent` to unparent a bead\n- Parent changes should be LWW like other fields\n- ID format: beads created with --parent get hierarchical IDs (bd-abc.1). Reparenting existing beads probably keeps their original ID rather than renumbering.\n\n**Acceptance**\n- [ ] `bd update <id> --parent <epic-id>` works\n- [ ] Invalid/deleted parent rejected with clear error\n- [ ] Circular parent reference rejected\n- [ ] Can unparent a bead (remove from epic)\n- [ ] `bd show` reflects new parent\n- [ ] `bd epic status` includes reparented beads","id":"bd-oi9","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Add --parent flag to bd update command","type":"feature"}
