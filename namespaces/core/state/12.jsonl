{"_at":[1768807851003,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768779078472,0],"created_by":"darin@darinsmcstudio2.lan","description":"Checkpoint scheduler runs in daemon tests even when checkpoints aren't asserted. Add a test-only config/env (maybe under BD_TEST_FAST) to disable checkpoint groups or set writers empty unless explicitly enabled by tests that need it. Reduces background work in realtime/repl tests.","id":"bd-3b3q","labels":{"cc":{"max":{}},"entries":{}},"priority":3,"status":"closed","title":"Disable checkpoints in tests by default","type":"chore"}
{"_at":[1768392019078,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768178786263,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nOperators need to put daemon in read-only mode for repairs and rebuild SQLite from WAL.\n\n**Context**\n- REALTIME_PLAN.md §16.1 (admin.maintenance_mode, admin.rebuild_index)\n\n**Design**\n- admin.maintenance_mode: toggle read-only mode\n  - When enabled: reject mutations/replication ingest with ERROR(code=\"maintenance_mode\")\n  - Allow admin/read operations\n  - Required for online repair beyond tail truncation\n- admin.rebuild_index: rebuilds SQLite index from WAL segments\n  - Explicit operator action; requires maintenance_mode\n  - Scans all WAL segments and re-indexes events\n\n**Acceptance**\n- [ ] admin.maintenance_mode toggles write rejection\n- [ ] admin.rebuild_index scans WAL and rebuilds SQLite\n- [ ] CLI `bd admin maintenance on/off` and `bd admin rebuild-index` work\n- [ ] Tests verify mode transitions\n\n**Files:** src/daemon/admin.rs, src/daemon/wal/replay.rs, src/cli/commands/admin.rs","id":"bd-3m5.33","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Phase 7: admin.maintenance_mode + admin.rebuild_index","type":"task"}
{"_at":[1769484628766,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] All dependent beads closed.\n- [ ] `cargo test` green.","created_at":[1769480252695,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nThe IPC request shapes are duplicated across beads-surface, CLI, and daemon. The daemon also re-declares a wire-shaped MutationRequest, leading to drift when fields are added. This creates high maintenance cost and risk of behavioral divergence.\n\n**Design**\nImplement the refactor in REFACTORING_PLAN.md with strict behavior preservation:\n- Keep wire format identical (serde defaults/renames unchanged).\n- Keep request hashing/idempotency semantics identical.\n- Keep Claim defaults and normalization rules identical.\nBreak the work into small, self-contained beads with explicit dependencies (surface types → CLI/daemon routing → mutation engine refactor → tests/fixtures updates).\n\n**Design Notes**\nThis epic is about restructuring types and call paths, not changing behavior. Any behavioral change is out of scope.\n\n**Acceptance**\n- [ ] All child beads completed and closed.\n- [ ] IPC JSON wire format unchanged for all ops.\n- [ ] Idempotency hash semantics unchanged.\n- [ ] Unit + integration tests updated and passing.\n\n**Files:**\n- REFACTORING_PLAN.md\n- crates/beads-surface/src/ipc/*\n- crates/beads-rs/src/cli/*\n- crates/beads-rs/src/daemon/*\n- crates/beads-rs/tests/**","design":"Follow REFACTORING_PLAN.md. The epic owns sequencing and dependencies only; each child bead has a crisp scope and acceptance criteria.","id":"bd-ebhh","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"IPC ctx+payload refactor (no behavior change)","type":"epic"}
{"_at":[1767993582785,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] cargo fetch succeeds in beads_stateright_models\n- [ ] Stateright source is pinned and reproducible (submodule or git rev or crates.io version)\n- [ ] README or docs explain how to build/run the models\n- [ ] No path dependency points to a non-existent directory","assignee":"darin@darinsmacstudio.lan","created_at":[1767985457381,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nbeads_stateright_models depends on a local path stateright = { path = \"../stateright/stateright-master\" }, but that directory does not exist. cargo fetch fails, so models cannot be built or run.\n\n**Design Notes**\nPick one source of truth for Stateright and make it reproducible for all contributors.","design":"**Design**\nDecide on one of:\n- Add the stateright repo as a submodule under stateright/stateright-master, or\n- Switch dependency to a crates.io version or a git dependency with a fixed revision.\nUpdate beads_stateright_models/Cargo.toml accordingly and document the choice in beads_stateright_models/README.md (or similar).\n\nIf using a submodule, add setup instructions and ensure path is correct relative to repo root.","id":"bd-hjm.12","labels":{"cc":{"max":{}},"entries":{"build":[{"counter":14320273262825244247,"replica":"e8601ed0-b6d1-e1e5-7610-5f83c97be2d6"}],"modeling":[{"counter":10242363120617981250,"replica":"758aca14-c651-4c85-cbf2-2ce5ce65331a"}],"stateright":[{"counter":11383720414103967503,"replica":"da5607ee-4768-d68f-b836-68e42516951b"}]}},"priority":1,"status":"closed","title":"Fix stateright dependency path for modeling crate","type":"chore"}
