{"_at":[1768392019078,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768178786263,1],"darin@darinsmacstudio.lan"],"claim":[[1768390818618,1],"darin@book"],"description":[[1768178786263,1],"darin@darinsmacstudio.lan"],"design":[[1768178786263,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768178786263,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768178786263,1],"darin@darinsmacstudio.lan"],"labels":[[1768178786263,1],"darin@darinsmacstudio.lan"],"priority":[[1768178786263,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768178786263,1],"darin@darinsmacstudio.lan"],"title":[[1768185419293,1],"darin@darinsmacstudio.lan"],"type":[[1768178786263,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@book","assignee_at":[1768390818618,1],"assignee_expires":1768394418618,"closed_at":[1768392019078,1],"closed_by":"darin@book","created_at":[1768178786263,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nOperators need to put daemon in read-only mode for repairs and rebuild SQLite from WAL.\n\n**Context**\n- REALTIME_PLAN.md ยง16.1 (admin.maintenance_mode, admin.rebuild_index)\n\n**Design**\n- admin.maintenance_mode: toggle read-only mode\n  - When enabled: reject mutations/replication ingest with ERROR(code=\"maintenance_mode\")\n  - Allow admin/read operations\n  - Required for online repair beyond tail truncation\n- admin.rebuild_index: rebuilds SQLite index from WAL segments\n  - Explicit operator action; requires maintenance_mode\n  - Scans all WAL segments and re-indexes events\n\n**Acceptance**\n- [ ] admin.maintenance_mode toggles write rejection\n- [ ] admin.rebuild_index scans WAL and rebuilds SQLite\n- [ ] CLI `bd admin maintenance on/off` and `bd admin rebuild-index` work\n- [ ] Tests verify mode transitions\n\n**Files:** src/daemon/admin.rs, src/daemon/wal/replay.rs, src/cli/commands/admin.rs","id":"bd-3m5.33","labels":[],"priority":2,"status":"closed","title":"Phase 7: admin.maintenance_mode + admin.rebuild_index","type":"task"}
{"_at":[1767993582785,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1767985457381,1],"darin@darinsmacstudio.lan"],"claim":[[1767993577618,1],"darin@darinsmacstudio.lan"],"description":[[1767985457381,1],"darin@darinsmacstudio.lan"],"design":[[1767985457381,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1767985457381,1],"darin@darinsmacstudio.lan"],"external_ref":[[1767985457381,1],"darin@darinsmacstudio.lan"],"labels":[[1767985457381,1],"darin@darinsmacstudio.lan"],"priority":[[1767985457381,1],"darin@darinsmacstudio.lan"],"source_repo":[[1767985457381,1],"darin@darinsmacstudio.lan"],"title":[[1767985457381,1],"darin@darinsmacstudio.lan"],"type":[[1767985457381,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] cargo fetch succeeds in beads_stateright_models\n- [ ] Stateright source is pinned and reproducible (submodule or git rev or crates.io version)\n- [ ] README or docs explain how to build/run the models\n- [ ] No path dependency points to a non-existent directory","assignee":"darin@darinsmacstudio.lan","assignee_at":[1767993577618,1],"assignee_expires":1767997177618,"closed_at":[1767993582785,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1767985457381,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nbeads_stateright_models depends on a local path stateright = { path = \"../stateright/stateright-master\" }, but that directory does not exist. cargo fetch fails, so models cannot be built or run.\n\n**Design Notes**\nPick one source of truth for Stateright and make it reproducible for all contributors.","design":"**Design**\nDecide on one of:\n- Add the stateright repo as a submodule under stateright/stateright-master, or\n- Switch dependency to a crates.io version or a git dependency with a fixed revision.\nUpdate beads_stateright_models/Cargo.toml accordingly and document the choice in beads_stateright_models/README.md (or similar).\n\nIf using a submodule, add setup instructions and ensure path is correct relative to repo root.","id":"bd-hjm.12","labels":["build","modeling","stateright"],"priority":1,"status":"closed","title":"Fix stateright dependency path for modeling crate","type":"chore"}
