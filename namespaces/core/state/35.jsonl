{"_at":[1768505186094,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768503796003,1],"darin@book"],"claim":[[1768503796003,1],"darin@book"],"description":[[1768503796003,1],"darin@book"],"design":[[1768503796003,1],"darin@book"],"estimated_minutes":[[1768503796003,1],"darin@book"],"external_ref":[[1768503796003,1],"darin@book"],"labels":[[1768503796003,1],"darin@book"],"priority":[[1768503796003,1],"darin@book"],"source_repo":[[1768503796003,1],"darin@book"],"title":[[1768503796003,1],"darin@book"],"type":[[1768503796003,1],"darin@book"]},"acceptance_criteria":"- [ ] No string literals are used to represent gap rejection codes.\n- [ ] All gap rejections map to canonical ErrorCode values with details.\n- [ ] Tests cover the mapping for timeout/overflow cases.","closed_at":[1768505186094,1],"closed_by":"darin@book","closed_reason":"duplicate of bd-al7","created_at":[1768503796003,1],"created_by":"darin@book","description":"**Problem**\nGapBuffer rejects use stringly-typed codes (gap_timeout, gap_buffer_overflow, etc) via IngestDecision::Reject { code: String } in src/daemon/repl/gap_buffer.rs. This bypasses ErrorCode/REALTIME_ERRORS, loses structured details, and makes it easy for codes to drift silently.\n\n**Files:** src/daemon/repl/gap_buffer.rs, src/daemon/repl/session.rs, src/core/error.rs","design":"**Design**\n- Introduce a GapReject/GAP error enum that carries ErrorCode plus typed details (e.g., OverloadedDetails or GapDetectedDetails).\n- Change IngestDecision::Reject to carry this typed error instead of a String.\n- Map the typed error to ErrorPayload in Session (or at the boundary) using canonical ErrorCode values.\n- Add tests asserting the payload codes/details for each rejection reason.","id":"bd-rjn","labels":[],"priority":2,"status":"closed","title":"Replace GapBuffer string codes with structured errors","type":"chore"}
