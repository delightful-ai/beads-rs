{"_at":[1768467389314,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768444731915,1],"darin@book"],"claim":[[1768466246389,1],"darin@book"],"description":[[1768444731915,1],"darin@book"],"design":[[1768444731915,1],"darin@book"],"estimated_minutes":[[1768444731915,1],"darin@book"],"external_ref":[[1768444731915,1],"darin@book"],"labels":[[1768444731915,1],"darin@book"],"priority":[[1768444731915,1],"darin@book"],"source_repo":[[1768444731915,1],"darin@book"],"title":[[1768444731915,1],"darin@book"],"type":[[1768444731915,1],"darin@book"]},"assignee":"darin@book","assignee_at":[1768466246389,1],"assignee_expires":1768469846389,"closed_at":[1768467389314,1],"closed_by":"darin@book","created_at":[1768444731915,1],"created_by":"darin@book","description":"**Problem**\nREALTIME_PLAN ยง0.19 defines KEEPALIVE_MS (5s) for protocol keepalive, but code never uses limits.keepalive_ms. Replication sessions and IPC do not send keepalives or track idle timeouts based on this value.\n\nEvidence:\n- rg \"keepalive_ms\" only finds definitions in src/core/limits.rs.\n\n**Acceptance**\n- [ ] Implement keepalive timers in replication sessions (HELLO/ACK pings) and/or IPC streaming.\n- [ ] Wire to Limits.keepalive_ms with tests for idle connections.","id":"bd-3m5.97","labels":[],"priority":2,"status":"closed","title":"KEEPALIVE_MS limit unused; no keepalive scheduling","type":"bug"}
{"_at":[1768526733285,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768509387475,1],"darin@book"],"claim":[[1768526593839,1],"darin@book"],"description":[[1768509387475,1],"darin@book"],"design":[[1768509387475,1],"darin@book"],"estimated_minutes":[[1768509387475,1],"darin@book"],"external_ref":[[1768509387475,1],"darin@book"],"labels":[[1768509387475,1],"darin@book"],"priority":[[1768509387475,1],"darin@book"],"source_repo":[[1768509387475,1],"darin@book"],"title":[[1768509387475,1],"darin@book"],"type":[[1768509387475,1],"darin@book"]},"acceptance_criteria":"- [ ] Heavy realtime integration tests are opt-in via slow-tests.\\n- [ ] Default cargo test remains fast and deterministic.\\n- [ ] Any remaining ungated tests that spawn the daemon are intentionally justified in comments.","assignee":"darin@book","assignee_at":[1768526593839,1],"assignee_expires":1768530193839,"closed_at":[1768526733285,1],"closed_by":"darin@book","created_at":[1768509387475,1],"created_by":"darin@book","description":"**Problem**\\n- Some integration tests spawn the daemon, run load generators, and use time-based sleeps without being gated by the slow-tests feature (e.g., tests/integration/daemon/admin_status.rs, tests/integration/daemon/subscribe.rs).\\n- The test design guideline says slow tests should be opt-in; these can slow the default suite and introduce timing flakiness.\\n\\n**Files**\\n- tests/integration/daemon/admin_status.rs\\n- tests/integration/daemon/subscribe.rs\\n- any other realtime integration tests that start daemons or sleep","design":"Audit integration tests that spawn the daemon or rely on time-based sleeps; gate them with #[cfg(feature = \"slow-tests\")] (file-level or test-level) or split fast/slow variants. Keep a small smoke test (if needed) in the default suite that asserts basic wiring without sleeps. Ensure docs/justfile already reference slow-tests.","id":"bd-lvor","labels":[],"priority":3,"status":"closed","title":"Gate realtime integration tests behind slow-tests","type":"chore"}
{"_at":[1767918613652,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1767916489266,1],"darin@darinsmacstudio.lan"],"claim":[[1767918245251,1],"darin@darinsmacstudio.lan"],"description":[[1767916489266,1],"darin@darinsmacstudio.lan"],"design":[[1767916489266,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1767916489266,1],"darin@darinsmacstudio.lan"],"external_ref":[[1767916489266,1],"darin@darinsmacstudio.lan"],"labels":[[1767916489266,1],"darin@darinsmacstudio.lan"],"priority":[[1767916489266,1],"darin@darinsmacstudio.lan"],"source_repo":[[1767916489266,1],"darin@darinsmacstudio.lan"],"title":[[1767916489266,1],"darin@darinsmacstudio.lan"],"type":[[1767916489266,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@darinsmacstudio.lan","assignee_at":[1767918245251,1],"assignee_expires":1767921845251,"closed_at":[1767918613652,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1767916489266,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nDependency spec parsing is duplicated in `src/cli/mod.rs` (`normalize_dep_specs`) and `src/daemon/executor.rs` (`parse_dep_specs`). The two implementations can drift (string format, DepKind parsing, error messages), which makes CLI validation diverge from daemon validation and complicates reasoning about dependency formats.\n\n**Design**\nAdd a shared parser in core and use it from both CLI and daemon:\n- Introduce a `DepSpec` type in `src/core/dep.rs` (or a small `dep_spec` module) with `{ kind: DepKind, id: BeadId }`.\n- Implement `DepSpec::parse_list(raw: &[String]) -> Result<Vec<DepSpec>, CoreError>` that handles comma-separated lists and optional `kind:id` prefixes.\n- Implement `DepSpec::to_spec_string()` for canonical formatting (`blocks:bd-123` or `bd-123` for default).\n- Update `src/cli/mod.rs` to replace `normalize_dep_specs` with core parsing + `to_spec_string()` for normalized request strings.\n- Update `src/daemon/executor.rs` to replace its local `parse_dep_specs` with core parsing and map errors to `OpError::ValidationFailed`.\n\n**Design Notes**\nKeep the current user-facing behavior (comma-separated specs, optional `kind:` prefix) and preserve existing error messages as much as possible. Use `DepKind::parse` and `BeadId::parse` in one place so the spec grammar is canonical.\n\n**Acceptance**\n- [ ] CLI and daemon both rely on the core parser for dependency specs.\n- [ ] Canonical formatting is unchanged for default `blocks` dependencies.\n- [ ] Error messages remain user-friendly and point to the `deps` field.\n- [ ] Run `codex review --uncommitted` (timeout 10m) and address findings.\n- [ ] Tests pass.\n\n**Files:** `src/core/dep.rs`, `src/cli/mod.rs`, `src/daemon/executor.rs`","id":"bd-omw.1","labels":[],"priority":2,"status":"closed","title":"Centralize dependency spec parsing","type":"chore"}
