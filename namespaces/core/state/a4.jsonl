{"_at":[1768407623577,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768180818293,1],"darin@darinsmacstudio.lan"],"claim":[[1768406909914,1],"darin@book"],"description":[[1768180818293,1],"darin@darinsmacstudio.lan"],"design":[[1768180818293,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768180818293,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768180818293,1],"darin@darinsmacstudio.lan"],"labels":[[1768180818293,1],"darin@darinsmacstudio.lan"],"priority":[[1768180818293,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768180818293,1],"darin@darinsmacstudio.lan"],"title":[[1768180818293,1],"darin@darinsmacstudio.lan"],"type":[[1768180818293,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@book","assignee_at":[1768406909914,1],"assignee_expires":1768410509914,"closed_at":[1768407623577,1],"closed_by":"darin@book","created_at":[1768180818293,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nPhase 6 implementation must be verified before Phase 7 starts.\n\n**Context**\n- REALTIME_PLAN.md §18: checkpoint export/import determinism, manifest and content hashes\n- Depends on: Phase 6 implementation + Phase 6 test infrastructure\n\n**Design**\nDeterministic tests for:\n- Export determinism: same StoreState → same manifest.json bytes\n- Content hash verification: sha256 in manifest matches file content\n- Import verification: import checkpoint → StoreState matches original\n- Round-trip: export → import → export → manifests match\n- Multi-namespace: checkpoint includes all namespaces correctly\n- included watermarks: meta.json.included matches actual content\n\n**Acceptance**\n- [ ] tests/phase6_checkpoint.rs: export/import tests\n- [ ] Test: export is deterministic (same state → same bytes)\n- [ ] Test: import verifies content hashes\n- [ ] Test: round-trip preserves all state\n- [ ] cargo test phase6_ passes\n\n**Files:** tests/phase6_checkpoint.rs (new)","id":"bd-3m5.64","labels":[],"priority":2,"status":"closed","title":"Phase 6 tests: checkpoint export/import determinism","type":"task"}
{"_at":[1768277880988,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1768271751492,1],"darin@darinsmacstudio.lan"],"claim":[[1768277692726,1],"darin@darinsmacstudio.lan"],"description":[[1768271751492,1],"darin@darinsmacstudio.lan"],"design":[[1768271751492,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768271751492,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768271751492,1],"darin@darinsmacstudio.lan"],"labels":[[1768271751492,1],"darin@darinsmacstudio.lan"],"priority":[[1768271751492,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768271751492,1],"darin@darinsmacstudio.lan"],"title":[[1768271751492,1],"darin@darinsmacstudio.lan"],"type":[[1768271751492,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@darinsmacstudio.lan","assignee_at":[1768277692726,1],"assignee_expires":1768281292726,"closed_at":[1768277880988,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1768271751492,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nReplay does not verify sha256(payload_bytes) vs the record header, so hash_mismatch is effectively unreachable. CRC alone does not catch a writer that stored an incorrect sha.\n\n**Where**\n- src/daemon/wal/replay.rs: scan_segment decodes record payload but does not hash raw bytes\n- src/daemon/wal/record.rs: RecordHeaderMismatch lacks a sha mismatch variant\n\n**Design**\n- Preserve raw payload bytes and compare sha256(payload_bytes) to record.header.event_sha256.\n- Introduce a RecordHeaderMismatch variant (or WalReplayError) for hash mismatch and map to ErrorCode::HashMismatch with details.\n\n**Acceptance**\n- Replay detects sha mismatch and emits hash_mismatch with details.\n- CRC-only mismatches continue to map to wal_corrupt.\n\n**Files**\n- src/daemon/wal/replay.rs\n- src/daemon/wal/record.rs\n- src/daemon/ops.rs\n- src/daemon/ipc.rs","id":"bd-3m5.71","labels":[],"priority":1,"status":"closed","title":"WAL replay: verify payload sha256 (hash_mismatch)","type":"bug"}
{"_at":[1768496261325,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768495457653,1],"darin@book"],"claim":[[1768496026635,1],"darin@book"],"description":[[1768495457653,1],"darin@book"],"design":[[1768495457653,1],"darin@book"],"estimated_minutes":[[1768495457653,1],"darin@book"],"external_ref":[[1768495457653,1],"darin@book"],"labels":[[1768495457653,1],"darin@book"],"priority":[[1768495457653,1],"darin@book"],"source_repo":[[1768495457653,1],"darin@book"],"title":[[1768495457653,1],"darin@book"],"type":[[1768495457653,1],"darin@book"]},"acceptance_criteria":"- [ ] Test asserts IssueSummary.namespace == read namespace\n- [ ] Existing tests updated for new field","assignee":"darin@book","assignee_at":[1768496026635,1],"assignee_expires":1768499626635,"closed_at":[1768496261325,1],"closed_by":"darin@book","created_at":[1768495457653,1],"created_by":"darin@book","description":"**Problem**\nNamespace propagation is easy to regress once added; we need a focused test to lock it down.\n\n**Design**\nAdd a unit test in src/daemon/query_executor.rs to assert IssueSummary built from a bead includes the expected namespace. Update existing helper to include namespace field.\n\n**Files**\n- src/daemon/query_executor.rs","id":"bd-w22","labels":[],"priority":2,"status":"closed","title":"Tests for namespace propagation in issue summaries","type":"chore"}
