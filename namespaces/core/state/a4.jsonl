{"_at":[1768407623577,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768180818293,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nPhase 6 implementation must be verified before Phase 7 starts.\n\n**Context**\n- REALTIME_PLAN.md §18: checkpoint export/import determinism, manifest and content hashes\n- Depends on: Phase 6 implementation + Phase 6 test infrastructure\n\n**Design**\nDeterministic tests for:\n- Export determinism: same StoreState → same manifest.json bytes\n- Content hash verification: sha256 in manifest matches file content\n- Import verification: import checkpoint → StoreState matches original\n- Round-trip: export → import → export → manifests match\n- Multi-namespace: checkpoint includes all namespaces correctly\n- included watermarks: meta.json.included matches actual content\n\n**Acceptance**\n- [ ] tests/phase6_checkpoint.rs: export/import tests\n- [ ] Test: export is deterministic (same state → same bytes)\n- [ ] Test: import verifies content hashes\n- [ ] Test: round-trip preserves all state\n- [ ] cargo test phase6_ passes\n\n**Files:** tests/phase6_checkpoint.rs (new)","id":"bd-3m5.64","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Phase 6 tests: checkpoint export/import determinism","type":"task"}
{"_at":[1768277880988,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@darinsmacstudio.lan","created_at":[1768271751492,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nReplay does not verify sha256(payload_bytes) vs the record header, so hash_mismatch is effectively unreachable. CRC alone does not catch a writer that stored an incorrect sha.\n\n**Where**\n- src/daemon/wal/replay.rs: scan_segment decodes record payload but does not hash raw bytes\n- src/daemon/wal/record.rs: RecordHeaderMismatch lacks a sha mismatch variant\n\n**Design**\n- Preserve raw payload bytes and compare sha256(payload_bytes) to record.header.event_sha256.\n- Introduce a RecordHeaderMismatch variant (or WalReplayError) for hash mismatch and map to ErrorCode::HashMismatch with details.\n\n**Acceptance**\n- Replay detects sha mismatch and emits hash_mismatch with details.\n- CRC-only mismatches continue to map to wal_corrupt.\n\n**Files**\n- src/daemon/wal/replay.rs\n- src/daemon/wal/record.rs\n- src/daemon/ops.rs\n- src/daemon/ipc.rs","id":"bd-3m5.71","labels":{"cc":{"max":{}},"entries":{}},"priority":1,"status":"closed","title":"WAL replay: verify payload sha256 (hash_mismatch)","type":"bug"}
{"_at":[1768942353123,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] No references to DepEdge/NoteLog/labels LWW\n- [ ] Build passes without legacy types\n\n**Invariants to re-verify**\n- [ ] No references to DepEdge/NoteLog/labels LWW remain\n- [ ] Build succeeds without legacy types","assignee":"darin@book","created_at":[1768894652850,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nLegacy LWW dep edges, full-set labels, and NoteLog become dead code after migration.\n\n**Files**\n- src/core/dep.rs\n- src/core/bead.rs\n- src/core/collections.rs\n- src/core/wire_bead.rs\n- src/core/apply.rs\n- src/daemon/mutation_engine.rs","design":"Delete DepEdge/DepLife, Bead.notes, BeadFields.labels, NoteLog, old dep wire ops, full-set label patching. Remove old ApplyError variants and related error paths.","id":"bd-3zoj.11","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Cleanup: remove legacy LWW dep/label/note code","type":"task"}
{"_at":[1768637284852,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Crash/restart e2e passes and converges.\n- [ ] No orphaned processes/sockets.\n- [ ] Tests write only under ./tmp.","assignee":"darin@book","created_at":[1768636601601,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nMulti-node crash/restart with in-flight replication is not tested; only single-node recovery exists.","design":"**Design**\n- Use ReplRig to start 3 nodes, begin replication, then hard-kill one daemon mid-stream.\n- Continue mutations on remaining nodes, restart the crashed node with the same dirs, and assert it catches up.\n- Validate convergence and no data loss.","id":"bd-l1w9","labels":{"cc":{"max":{}},"entries":{}},"priority":0,"status":"closed","title":"Crash/restart during replication e2e","type":"bug"}
{"_at":[1768496261325,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Test asserts IssueSummary.namespace == read namespace\n- [ ] Existing tests updated for new field","assignee":"darin@book","created_at":[1768495457653,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nNamespace propagation is easy to regress once added; we need a focused test to lock it down.\n\n**Design**\nAdd a unit test in src/daemon/query_executor.rs to assert IssueSummary built from a bead includes the expected namespace. Update existing helper to include namespace field.\n\n**Files**\n- src/daemon/query_executor.rs","id":"bd-w22","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Tests for namespace propagation in issue summaries","type":"chore"}
