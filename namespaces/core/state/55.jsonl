{"_at":[1768266096090,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1768195819759,1],"darin@darinsmacstudio.lan"],"claim":[[1768262441077,1],"darin@darinsmacstudio.lan"],"description":[[1768180538902,1],"darin@darinsmacstudio.lan"],"design":[[1768180538902,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768178967608,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768178967608,1],"darin@darinsmacstudio.lan"],"labels":[[1768178967608,1],"darin@darinsmacstudio.lan"],"priority":[[1768261542198,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768178967608,1],"darin@darinsmacstudio.lan"],"title":[[1768185464395,1],"darin@darinsmacstudio.lan"],"type":[[1768178967608,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] Mutation request structs add optional namespace/durability/client_request_id/actor_id with backward-compatible defaults.\n- [ ] Read/query request structs add optional require_min_seen + wait_timeout_ms with consistent defaulting.\n- [ ] CLI flags --namespace, --durability, --client-request-id map to IPC fields.\n- [ ] Defaulting (namespace=core, durability=LocalFsync, actor_id=daemon default) is applied consistently.","assignee":"darin@darinsmacstudio.lan","assignee_at":[1768262441077,1],"assignee_expires":1768266041077,"closed_at":[1768266096090,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1768178967608,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nIPC currently has no namespace, durability class, or client_request_id fields, and defaults are implemented ad hoc in CLI/daemon. This makes retries and read-your-writes semantics ambiguous and invites mismatched defaults across entry points.\n\n**Context**\n- REALTIME_PLAN.md ยง0.14 (IPC evolution) and ยง16.1 (request fields and defaults)\n- Stateright model: beads_stateright_models/src/realtime_types_sketch.rs (NamespaceId, DurabilityClass, Seq0/Seq1)\n\n**Files:** src/daemon/ipc.rs, src/api/mod.rs, src/cli/mod.rs, src/cli/commands/*, src/daemon/query.rs","design":"**Design**\n- Extend mutation request structs with optional fields: namespace, durability, client_request_id, actor_id, preserving backward compatibility.\n- Parse namespace into NamespaceId and client_request_id into ClientRequestId early, so validation happens before mutation planning.\n- Centralize defaulting rules in one place (e.g., Request::normalize): namespace defaults to core, durability defaults to LocalFsync, actor_id defaults to daemon actor.\n- Add read/query gating fields require_min_seen and wait_timeout_ms; require_min_seen uses applied watermarks and returns retryable timeout error on miss.\n- Ensure IPC JSON schema stays stable: new fields are optional and omitted in serialization when None.","id":"bd-3m5.51","labels":[],"priority":1,"status":"closed","title":"Phase 4: IPC namespace + durability + client_request_id fields","type":"task"}
