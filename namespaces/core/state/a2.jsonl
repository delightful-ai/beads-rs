{"_at":[1770509501698,0],"_by":"darin@darinsmcstudio2.lan","_v":{"workflow":[[1770509501617,0],"darin@darinsmcstudio2.lan"]},"assignee":"darin@darins-Mac-Studio-2.local","created_at":[1770508424038,0],"created_by":"darin@darinsmcstudio2.lan","description":"Problem: integration fixtures still import beads_rs::daemon::wal internals (SegmentWriter/RecordHeader/frame helpers), keeping temporary daemon re-export layers alive. Design: expose a typed fixture/test boundary from beads-daemon-core or daemon-owned test utils, retarget fixture imports, then remove remaining wal-internal re-export dependencies in beads-rs. Acceptance: fixtures compile without beads_rs::daemon::wal internal imports; cargo test -p beads-rs --test integration -- repl:: and wal:: slices pass.","id":"bd-21eg.36","labels":{"cc":{"max":{}},"entries":{}},"notes":[{"at":[1770509501698,0],"author":"darin@darins-Mac-Studio-2.local","content":"Implemented WAL fixture boundary API and removed direct daemon::wal imports from targeted fixtures.\nChanges:\n- Added `tests/integration/fixtures/daemon_boundary.rs` with typed wal boundary exports.\n- Rewired `tests/integration/fixtures/wal.rs`, `wal_corrupt.rs`, and `repl_rig.rs` to import wal types/constants/functions via boundary module.\nValidation:\n- cargo test -p beads-rs --test integration -- wal:: (22 pass)\n- cargo test -p beads-rs --test integration -- repl:: (9 pass)\n- cargo check -p beads-rs\nAcceptance met: fixtures compile without direct `beads_rs::daemon::wal` imports and wal/repl slices stay green.","id":"go-comment-bd-21eg.36-1"},{"at":[1770509501698,0],"author":"darin@darinsmcstudio2.lan","content":"Implemented WAL fixture boundary API and removed direct daemon::wal imports from targeted fixtures.\nChanges:\n- Added `tests/integration/fixtures/daemon_boundary.rs` with typed wal boundary exports.\n- Rewired `tests/integration/fixtures/wal.rs`, `wal_corrupt.rs`, and `repl_rig.rs` to import wal types/constants/functions via boundary module.\nValidation:\n- cargo test -p beads-rs --test integration -- wal:: (22 pass)\n- cargo test -p beads-rs --test integration -- repl:: (9 pass)\n- cargo check -p beads-rs\nAcceptance met: fixtures compile without direct `beads_rs::daemon::wal` imports and wal/repl slices stay green.","id":"legacy-notes"}],"priority":2,"status":"closed","title":"Extract WAL fixture boundary API (segment writer/header/frame) out of beads-rs daemon internals","type":"task"}
