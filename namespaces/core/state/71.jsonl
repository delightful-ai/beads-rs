{"_at":[1768383920715,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768271765319,1],"darin@darinsmacstudio.lan"],"claim":[[1768382018211,1],"darin@book"],"description":[[1768271765319,1],"darin@darinsmacstudio.lan"],"design":[[1768271765319,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768271765319,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768271765319,1],"darin@darinsmacstudio.lan"],"labels":[[1768271765319,1],"darin@darinsmacstudio.lan"],"priority":[[1768271765319,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768271765319,1],"darin@darinsmacstudio.lan"],"title":[[1768271765319,1],"darin@darinsmacstudio.lan"],"type":[[1768271765319,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@book","assignee_at":[1768382018211,1],"assignee_expires":1768385618211,"closed_at":[1768383920715,1],"closed_by":"darin@book","created_at":[1768271765319,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nReplay silently truncates a corrupted tail and drops ReplayStats; operators never see wal_tail_truncated even though the registry expects it.\n\n**Where**\n- src/daemon/wal/replay.rs: scan_segment sets truncated=true and truncates tail\n- src/daemon/store_runtime.rs: open(...) discards ReplayStats\n\n**Design**\n- Emit wal_tail_truncated (retryable=true) when tail repair occurs, with details {namespace, segment, offset}.\n- Surface ReplayStats to callers (StoreRuntime::open) so IPC can report the repair.\n\n**Acceptance**\n- Tail truncation emits a realtime error payload with details.\n- StoreRuntime open path exposes replay stats for operator visibility.\n\n**Files**\n- src/daemon/wal/replay.rs\n- src/daemon/store_runtime.rs\n- src/daemon/ipc.rs","id":"bd-3m5.73","labels":[],"priority":2,"status":"closed","title":"WAL replay: surface wal_tail_truncated repairs","type":"bug"}
