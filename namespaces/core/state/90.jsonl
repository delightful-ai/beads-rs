{"_at":[1768432343423,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768273182411,1],"darin@darinsmacstudio.lan"],"claim":[[1768432013651,1],"darin@book"],"description":[[1768273182411,1],"darin@darinsmacstudio.lan"],"design":[[1768273182411,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768273182411,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768273182411,1],"darin@darinsmacstudio.lan"],"labels":[[1768273182411,1],"darin@darinsmacstudio.lan"],"priority":[[1768273182411,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768273182411,1],"darin@darinsmacstudio.lan"],"title":[[1768273182411,1],"darin@darinsmacstudio.lan"],"type":[[1768273182411,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@book","assignee_at":[1768432013651,1],"assignee_expires":1768435613651,"closed_at":[1768432343423,1],"closed_by":"darin@book","closed_reason":"Skip version ping when daemon.meta.json matches; added meta-based version checks and unit tests for match/mismatch.","created_at":[1768273182411,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nEvery IPC request does a Ping (version check) round-trip before the actual request.\n\n- Direct socket: ~60ms for one request\n- CLI: ~120ms+ for one request (Ping + actual)\n- `bd show` (human mode): 8 requests Ã— 60ms ping = ~480ms overhead\n\n**Evidence**\n```\nbd list -n 1: 64ms    (1 actual request + 1 ping)\nbd --json show: 26ms  (2 actual + 2 pings? or cached?)\nbd show simple: 480ms (8 requests, each with ping)\n```\n\n**Design Options**\n1. Connection reuse: Keep single connection per CLI invocation, verify once\n2. Session tokens: First Ping returns token, skip verification for subsequent\n3. Request batching: Combine Show+Deps+Notes into ShowWithContext\n\n**Acceptance**\n- [ ] `bd show simple-bead` < 200ms\n- [ ] No version mismatch regressions","id":"bd-1qp","labels":[],"priority":3,"status":"closed","title":"IPC per-request Ping adds ~60ms overhead to each CLI request","type":"chore"}
{"_at":[1768427148596,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1766127760899,1],"darin@dusk"],"claim":[[1768426723203,1],"darin@book"],"description":[[1766127760899,1],"darin@dusk"],"design":[[1766127760899,1],"darin@dusk"],"estimated_minutes":[[1766127760899,1],"darin@dusk"],"external_ref":[[1766127760899,1],"darin@dusk"],"labels":[[1766127760899,1],"darin@dusk"],"priority":[[1766127760899,1],"darin@dusk"],"source_repo":[[1766127760899,1],"darin@dusk"],"title":[[1766127760899,1],"darin@dusk"],"type":[[1766127760899,1],"darin@dusk"]},"assignee":"darin@book","assignee_at":[1768426723203,1],"assignee_expires":1768430323203,"closed_at":[1768427148596,1],"closed_by":"darin@book","created_at":[1766127760899,1],"created_by":"darin@dusk","description":"**Problem**\nWe lack explicit tests for sync behavior under diverged refs, non-fast-forward pushes, and stale local refs. Regressions here can cause data loss or stuck syncs.\n\n**Design**\nAdd tests that simulate:\n- local ahead of remote (backup ref created, local not clobbered)\n- remote ahead of local (fast-forward update succeeds)\n- local/remote diverged (divergence flagged, sync outcome carries warning)\n- push non-fast-forward retry loop respects max_retries\nUse temp git repos with controlled commit graphs.\n\n**Acceptance**\n- [ ] Tests cover the above scenarios\n- [ ] Sync outcome divergence is surfaced\n- [ ] No data loss (local commits preserved)\n\n**Files:** src/git/sync.rs, tests/git_sync.rs","id":"bd-6b7","labels":[],"priority":1,"status":"closed","title":"Git sync state-machine robustness tests","type":"bug"}
