{"_at":[1768492349651,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1765690393596,0],"darin@dusk"],"claim":[[1768492142889,1],"darin@book"],"description":[[1765690393596,0],"darin@dusk"],"design":[[1765690393596,0],"darin@dusk"],"estimated_minutes":[[1765690393596,0],"darin@dusk"],"external_ref":[[1765690393596,0],"darin@dusk"],"labels":[[1765690393596,0],"darin@dusk"],"priority":[[1765690393596,0],"darin@dusk"],"source_repo":[[1765690393596,0],"darin@dusk"],"title":[[1765690393596,0],"darin@dusk"],"type":[[1765690393596,0],"darin@dusk"]},"assignee":"darin@book","assignee_at":[1768492142889,1],"assignee_expires":1768495742889,"closed_at":[1768492349651,1],"closed_by":"darin@book","created_at":[1765690393596,0],"created_by":"darin@dusk","description":"## What's Wrong\nInstall script fetches `releases/latest` unauthenticated and downloads a tarball without any integrity verification (checksum/signature). It may also fail due to GitHub API rate limits.\n\n## Where\n- scripts/install.sh: uses https://api.github.com/.../releases/latest and grep/sed parsing\n- scripts/install.sh: downloads release asset and untars with no checksum\n\n## Why It Matters\n- Security: users execute a network script piping to bash; we should verify what we download.\n- Reliability: rate limiting or JSON format changes can break installs.\n\n## Suggested Fix\n- Publish checksums (e.g., SHA256SUMS) as release assets and verify before install.\n- Prefer GitHub release page redirect for latest tag, or allow `BD_VERSION` override.\n- Use `jq` when available; fallback to robust parsing.\n\n## Acceptance\n- Installer verifies integrity of downloaded binary.\n- Installer supports explicit version pinning.","id":"bd-0y9","labels":[],"priority":3,"status":"closed","title":"Installer hardening: checksum verification + rate-limit robustness","type":"chore"}
{"_at":[1768410931843,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768180834183,1],"darin@darinsmacstudio.lan"],"claim":[[1768408689537,1],"darin@book"],"description":[[1768180834183,1],"darin@darinsmacstudio.lan"],"design":[[1768180834183,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768180834183,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768180834183,1],"darin@darinsmacstudio.lan"],"labels":[[1768180834183,1],"darin@darinsmacstudio.lan"],"priority":[[1768180834183,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768180834183,1],"darin@darinsmacstudio.lan"],"title":[[1768180834183,1],"darin@darinsmacstudio.lan"],"type":[[1768180834183,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@book","assignee_at":[1768408689537,1],"assignee_expires":1768412289537,"closed_at":[1768410931843,1],"closed_by":"darin@book","created_at":[1768180834183,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nPhase 7 implementation must be verified to complete the realtime v0.5 epic.\n\n**Context**\n- REALTIME_PLAN.md ยง18: admin.status correctness under load\n- Depends on: Phase 7 implementation + Phase 7 test infrastructure\n\n**Design**\nDeterministic tests for:\n- Subscribe streaming: events arrive in order, no gaps\n- require_min_seen: subscription blocks until watermark condition met\n- admin.status consistency: watermarks + segment stats are coherent under load\n- admin.status monotonicity: watermarks never regress\n- Concurrent subscriptions: multiple clients receive same events\n\n**Acceptance**\n- [ ] tests/phase7_subscribe.rs: streaming subscription tests\n- [ ] tests/phase7_admin_status.rs: admin.status under load tests\n- [ ] Test: watermarks are monotonic during concurrent mutations\n- [ ] Test: segment stats match actual WAL files\n- [ ] cargo test phase7_ passes\n\n**Files:** tests/phase7_subscribe.rs (new), tests/phase7_admin_status.rs (new)","id":"bd-3m5.66","labels":[],"priority":2,"status":"closed","title":"Phase 7 tests: streaming + admin.status under load","type":"task"}
{"_at":[1768381732360,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768271803077,1],"darin@darinsmacstudio.lan"],"claim":[[1768380024473,1],"darin@book"],"description":[[1768271803077,1],"darin@darinsmacstudio.lan"],"design":[[1768271803077,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768271803077,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768271803077,1],"darin@darinsmacstudio.lan"],"labels":[[1768271803077,1],"darin@darinsmacstudio.lan"],"priority":[[1768271803077,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768271803077,1],"darin@darinsmacstudio.lan"],"title":[[1768271803077,1],"darin@darinsmacstudio.lan"],"type":[[1768271803077,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@book","assignee_at":[1768380024473,1],"assignee_expires":1768383624473,"closed_at":[1768381732360,1],"closed_by":"darin@book","created_at":[1768271803077,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nDecodeError is rich (non_canonical, decode limits, trailing bytes), but replay collapses decode failures into wal_corrupt and there is no visible mapping for replication error frames. REALTIME_ERRORS.md expects actionable codes (invalid_request, frame_too_large, batch_too_large, non_canonical).\n\n**Where**\n- src/core/event.rs: DecodeError\n- src/daemon/wal/replay.rs: decode errors -> wal_corrupt\n- replication ingress path (Phase 5)\n\n**Design**\n- Add DecodeError -> ErrorPayload mapping for replication/IPC ingress.\n- Use non_canonical for canonical CBOR violations; size-related errors map to frame_too_large/batch_too_large; other semantic decode errors -> invalid_request.\n\n**Acceptance**\n- Replication ERROR frames include realtime codes for decode limits/non_canonical.\n- Non-canonical CBOR is not reported as wal_corrupt in network paths.\n\n**Files**\n- src/core/event.rs\n- src/daemon/* replication ingress code (bd-3m5.17/48)\n- src/daemon/ipc.rs (if IPC shares mapping)","id":"bd-3m5.78","labels":[],"priority":2,"status":"closed","title":"Replication ingress: map DecodeError to realtime codes","type":"task"}
{"_at":[1768529304404,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768506351431,1],"darin@book"],"claim":[[1768529135175,1],"darin@book"],"description":[[1768506351431,1],"darin@book"],"design":[[1768506351431,1],"darin@book"],"estimated_minutes":[[1768506351431,1],"darin@book"],"external_ref":[[1768506351431,1],"darin@book"],"labels":[[1768506351431,1],"darin@book"],"priority":[[1768506351431,1],"darin@book"],"source_repo":[[1768506351431,1],"darin@book"],"title":[[1768506351431,1],"darin@book"],"type":[[1768506351431,1],"darin@book"]},"acceptance_criteria":"- [ ] TxnId derivation incorporates actor identity (or full `Stamp`).\n- [ ] New test proves distinct actors produce different TxnIds for identical WriteStamp values.\n- [ ] Call sites updated accordingly.","assignee":"darin@book","assignee_at":[1768529135175,1],"assignee_expires":1768532735175,"closed_at":[1768529304404,1],"closed_by":"darin@book","created_at":[1768506351431,1],"created_by":"darin@book","description":"**Problem**\n`txn_id_for_stamp` (mutation engine) derives `TxnId` from `store_id` + `WriteStamp` (wall_ms, counter) only. The actor/replica identity is not included, so two actors with the same wall_ms/counter can produce identical TxnIds. This breaks the invariant that TxnIds are unique across actors and makes idempotency/debugging brittle.\n\n**Files**\n- src/daemon/mutation_engine.rs\n","design":"**Design**\n- Change `txn_id_for_stamp` to include actor identity (e.g., accept a full `Stamp` or `ActorId` and use it in the UUID v5 namespace/name).\n- Ensure the generated TxnId is stable for the same actor+stamp but distinct across actors.\n- Add a test that two different actors with the same wall_ms/counter produce different TxnIds.","id":"bd-lfxz","labels":[],"priority":2,"status":"closed","title":"TxnId generation should include actor identity","type":"bug"}
