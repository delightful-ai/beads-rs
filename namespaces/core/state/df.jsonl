{"_at":[1768201106279,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1768180747361,1],"darin@darinsmacstudio.lan"],"claim":[[1768200851014,1],"darin@darinsmacstudio.lan"],"description":[[1768195938512,1],"darin@darinsmacstudio.lan"],"design":[[1768180747361,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768180747361,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768180747361,1],"darin@darinsmacstudio.lan"],"labels":[[1768180747361,1],"darin@darinsmacstudio.lan"],"priority":[[1768180747361,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768180747361,1],"darin@darinsmacstudio.lan"],"title":[[1768180747361,1],"darin@darinsmacstudio.lan"],"type":[[1768180747361,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@darinsmacstudio.lan","assignee_at":[1768200851014,1],"assignee_expires":1768204451014,"closed_at":[1768201106279,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1768180747361,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nPhase 2 implementation must be verified before Phase 3 starts.\n\n**Context**\n- REALTIME_PLAN.md §18: CBOR hashing stability, apply idempotence, note collision detection, LWW merge ordering\n- Depends on: Phase 2 implementation + Phase 2 test infrastructure\n\n**Design**\nDeterministic tests for:\n- Canonical CBOR EventBody hashing stability (bytes identical across runs)\n- Apply idempotence: apply same event twice → no change\n- Note collision detection: same note_id, different content → error\n- Decoder bounds: reject indefinite length or out-of-bounds payloads\n- LWW merge ordering: concurrent updates resolve deterministically\n\n**Acceptance**\n- [ ] tests/phase2_cbor.rs: hashing stability tests\n- [ ] tests/phase2_apply.rs: apply idempotence tests\n- [ ] Test: note_id collision with different content fails\n- [ ] Test: LWW merge ordering is deterministic for concurrent updates\n- [ ] cargo test phase2_ passes\n\n**Files:** tests/phase2_cbor.rs (new), tests/phase2_apply.rs (new)","id":"bd-3m5.56","labels":[],"priority":2,"status":"closed","title":"Phase 2 tests: canonical hashing + apply idempotence","type":"task"}
{"_at":[1768487643359,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768448635632,1],"darin@book"],"claim":[[1768487276115,1],"darin@book"],"description":[[1768448635632,1],"darin@book"],"design":[[1768448635632,1],"darin@book"],"estimated_minutes":[[1768448635632,1],"darin@book"],"external_ref":[[1768448635632,1],"darin@book"],"labels":[[1768448635632,1],"darin@book"],"priority":[[1768448635632,1],"darin@book"],"source_repo":[[1768448635632,1],"darin@book"],"title":[[1768448635632,1],"darin@book"],"type":[[1768448635632,1],"darin@book"]},"assignee":"darin@book","assignee_at":[1768487276115,1],"assignee_expires":1768490876115,"closed_at":[1768487643359,1],"closed_by":"darin@book","created_at":[1768448635632,1],"created_by":"darin@book","description":"**Problem**\nREALTIME_PLAN §16.3 adds CLI flags `--namespace`, `--durability`, `--client-request-id`. We want these to remain, but semantics should be config‑first: repo/user config provides defaults and flags override those defaults. Env vars must remain supported and take precedence over config (but not over explicit CLI flags).\n\n**Design**\n- Keep existing CLI flags.\n- Resolve defaults from layered config (repo `beads.toml` + user config) with env overrides.\n- Precedence: CLI flag > env var > repo config > user config > hardcoded defaults.\n- `--client-request-id` remains explicit‑only (no default); used mainly by automation.\n\n**Acceptance**\n- [ ] CLI behavior matches precedence above for namespace/durability defaults.\n- [ ] Env vars for replication/config remain supported.\n- [ ] CLI flags continue to pass through IPC unchanged.\n- [ ] Tests cover: config default used when no flags; CLI overrides config; env overrides config.","id":"bd-3m5.98","labels":[],"priority":2,"status":"closed","title":"CLI namespace/durability/client-request-id flags become config-backed overrides","type":"task"}
