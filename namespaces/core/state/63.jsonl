{"_at":[1769595851988,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"Acceptance\n- Creating a bead with assignee always results in workflow=in_progress.\n- It is impossible to construct a mutation that yields claimed+open (compile-time or runtime validation).\n- Tests cover create-with-assignee sets status and rejects invalid combinations.","assignee":"darin@darins-Mac-Studio-2.local","created_at":[1769565905122,0],"created_by":"darin@darinsmcstudio2.lan","description":"Problem\n- plan_create sets assignee/assignee_expires but does not set workflow status.\n- This can create a bead that is claimed but still Workflow::Open.\n- Elsewhere (migration, claim ops) imply claimed => in_progress, but not enforced.\n\nImpact\n- Incorrect status semantics; readiness/filters can misbehave.\n- Invariant exists in developer lore, not in types.\n","design":"Design\n- Encode the invariant in one place:\n  - If assignee is set at creation, automatically set status=InProgress (and clear closed_reason/on_branch).\n  - Alternatively, make Claim+Status a combined patch type or a validation rule in ValidatedBeadPatch: claim set requires status=in_progress when current status is open.\n- Prefer type-level coupling (e.g., ClaimState::Claimed implies WorkflowStatus::InProgress) in the mutation planning layer.\n\nScatter fit\n- Make the invariant explicit; no caller can create claimed+open state.\n\nFiles\n- crates/beads-rs/src/daemon/mutation_engine.rs\n- crates/beads-core/src/event.rs (if validation rule added)\n- crates/beads-core/src/apply.rs (if apply enforces)","id":"bd-29jx","labels":{"cc":{"max":{}},"entries":{}},"priority":1,"status":"closed","title":"mutation: claimed bead must imply in_progress","type":"bug"}
{"_at":[1768496319186,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Test asserts Issue.namespace equals read namespace\\n- [ ] Existing helpers updated if needed","assignee":"darin@book","created_at":[1768495986989,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nIssue views now include namespace, but we lack a focused test to lock down propagation for Issue (not just IssueSummary).","design":"Add a unit test in src/daemon/query_executor.rs that exercises Issue::from_bead via the query executor path and asserts Issue.namespace == read namespace. Use a non-core NamespaceId to ensure it's not defaulted.","id":"bd-5jd","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Tests for namespace propagation in issue views","type":"chore"}
{"_at":[1769560877535,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@darins-Mac-Studio-2.local","created_at":[1769197292175,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Purpose**\nSystematic code review of the crdt-overhaul branch (bd-3zoj) organized by logical segments.\n\n**Segments**\n1. crdt/1-foundation - OR-Set core types (bd-3zoj.1, bd-3zoj.2)\n2. crdt/2-state-model - LabelStore/DepStore/NoteStore + BeadView (bd-3zoj.3, bd-3zoj.4)\n3. crdt/3-wire-ops - Wire ops + event validation (bd-3zoj.5, bd-3zoj.6)\n4. crdt/4-git-wire - Git wire format (bd-3zoj.10)\n5. crdt/5-tests - Roundtrip + determinism tests (bd-3zoj.16, bd-3zoj.17, bd-3zoj.18, bd-3wz4)\n6. crdt/6-apply-collision - Deterministic collision handling (bd-3zoj.7)\n7. crdt/7-cleanup - Legacy removal (bd-3zoj.11, bd-3zoj.12)\n\n**Process**\nEach segment gets a child bead capturing review findings, flagged issues, and resolution status.","id":"bd-ogvs","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"CRDT Overhaul Code Review Audit","type":"epic"}
{"_at":[1769776663093,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"**Acceptance**\n- [ ] Read projection carries typed enums (status/type) instead of strings.\n- [ ] API and compat serializers emit the same string values as before.\n- [ ] View builders no longer manually map enums to strings in multiple places.\n- [ ] Tests confirm JSON output unchanged and typed fields usable in code.","assignee":"darin@darins-Mac-Studio-2.local","created_at":[1769574026333,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nDomain enums leak into read APIs as raw strings:\n- API `IssueSummary` uses `status: String` and `issue_type: String` in `crates/beads-api/src/issues.rs`\n- Go compat schema uses strings for status/type in `crates/beads-rs/src/compat/go_schema.rs`\n\nThis forces repeated string conversion at each read surface and weakens invariants. It is translation + scatter: the domain shape is lost at the API boundary, and each view re-derives the same mapping rules.\n\n**Files:**\n- `crates/beads-api/src/issues.rs`\n- `crates/beads-rs/src/compat/go_schema.rs`\n- `crates/beads-core/src/domain.rs`\n- `crates/beads-core/src/bead.rs`","design":"**Design**\nKeep domain enums typed in the read projection, and convert to strings only at serialization boundaries.\n\nConcrete plan:\n1) Update the read projection (see `bd-y06u`) to carry typed enums for status/type/labels.\n2) Change API `Issue`/`IssueSummary` to store those enums internally (or wrap them), and implement custom serde to emit strings.\n3) Update Go compat conversion to use the typed projection and perform string conversion once in the serializer.\n4) Remove ad-hoc `.to_string()` conversions scattered in view builders.\n\n**Design Notes**\n- This keeps external JSON compatible but makes internal code trust types.\n- If full API type changes are too disruptive, add `IssueSummaryTyped` and only serialize to string form for the API layer.","id":"bd-uzos","labels":{"cc":{"max":{}},"entries":{"scatter":[{"counter":9299972828716551115,"replica":"a930fd44-8136-5653-9e53-45d43f4cc966"}],"translation":[{"counter":9488852662554878196,"replica":"d5455f86-6252-63a2-efbe-1691758ddc22"}],"types":[{"counter":17025940431833190592,"replica":"7db60923-0454-a2c6-6d9f-6d40ae5db6e7"}]}},"priority":3,"status":"closed","title":"Keep read models typed; serialize enums as strings","type":"chore"}
