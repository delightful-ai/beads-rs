{"_at":[1768415663703,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768413416123,1],"darin@book"],"claim":[[1768415303483,1],"darin@book"],"description":[[1768413416123,1],"darin@book"],"design":[[1768413416123,1],"darin@book"],"estimated_minutes":[[1768413416123,1],"darin@book"],"external_ref":[[1768413416123,1],"darin@book"],"labels":[[1768413416123,1],"darin@book"],"priority":[[1768413416123,1],"darin@book"],"source_repo":[[1768413416123,1],"darin@book"],"title":[[1768413416123,1],"darin@book"],"type":[[1768413416123,1],"darin@book"]},"assignee":"darin@book","assignee_at":[1768415303483,1],"assignee_expires":1768418903483,"closed_at":[1768415663703,1],"closed_by":"darin@book","created_at":[1768413416123,1],"created_by":"darin@book","description":"**Problem**\nDefault `cargo test` is effectively running fuzz-like property tests. In `src/git/sync.rs`, multiple `proptest!` blocks use the default `ProptestConfig` (256 cases) while each case initializes git repos, writes commits, pushes/fetches, and does ref resolution. This is expensive and makes the default test run feel like fuzzing.\n\nEvidence:\n- `src/git/sync.rs` has `proptest!` blocks without a custom `ProptestConfig`, so they run 256 cases each (e.g., around lines ~1600, ~1760, ~1900, ~2050).\n- Each case spins up temp git repos and performs multiple git operations (commit, push, fetch), which is far heavier than unit tests.\n\n**Design**\n- Explicitly gate heavy proptests behind an opt-in mechanism:\n  - Option A (preferred): `#[cfg(feature = \"slow-tests\")]` around the heavy proptest modules.\n  - Option B: keep them enabled but set `ProptestConfig { cases: 8 }` by default and allow override via env (e.g., `BD_PROPTEST_CASES` or `PROPTEST_CASES`).\n- Add a separate CI job or `just test-slow` to run the full proptest coverage (256+ cases) explicitly.\n- Document in `docs/philosophy/test_design.md` or README that proptest-heavy suites are opt-in.\n\n**Acceptance**\n- [ ] Default `cargo test` no longer runs the heavyweight proptest loops at full case count.\n- [ ] A documented opt-in path exists to run the full proptest fuzz-like coverage.\n- [ ] CI keeps at least one job that exercises full proptest coverage (or nightly).\n\n**Files:**\n- src/git/sync.rs\n- justfile (optional: add test-slow target)\n- docs/philosophy/test_design.md (optional)\n- .github/workflows/ci.yml (optional: separate slow job)","id":"bd-3m5.79","labels":[],"priority":0,"status":"closed","title":"CRITICAL: disable fuzz-like proptest by default","type":"bug"}
