{"_at":[1768415663703,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768413416123,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nDefault `cargo test` is effectively running fuzz-like property tests. In `src/git/sync.rs`, multiple `proptest!` blocks use the default `ProptestConfig` (256 cases) while each case initializes git repos, writes commits, pushes/fetches, and does ref resolution. This is expensive and makes the default test run feel like fuzzing.\n\nEvidence:\n- `src/git/sync.rs` has `proptest!` blocks without a custom `ProptestConfig`, so they run 256 cases each (e.g., around lines ~1600, ~1760, ~1900, ~2050).\n- Each case spins up temp git repos and performs multiple git operations (commit, push, fetch), which is far heavier than unit tests.\n\n**Design**\n- Explicitly gate heavy proptests behind an opt-in mechanism:\n  - Option A (preferred): `#[cfg(feature = \"slow-tests\")]` around the heavy proptest modules.\n  - Option B: keep them enabled but set `ProptestConfig { cases: 8 }` by default and allow override via env (e.g., `BD_PROPTEST_CASES` or `PROPTEST_CASES`).\n- Add a separate CI job or `just test-slow` to run the full proptest coverage (256+ cases) explicitly.\n- Document in `docs/philosophy/test_design.md` or README that proptest-heavy suites are opt-in.\n\n**Acceptance**\n- [ ] Default `cargo test` no longer runs the heavyweight proptest loops at full case count.\n- [ ] A documented opt-in path exists to run the full proptest fuzz-like coverage.\n- [ ] CI keeps at least one job that exercises full proptest coverage (or nightly).\n\n**Files:**\n- src/git/sync.rs\n- justfile (optional: add test-slow target)\n- docs/philosophy/test_design.md (optional)\n- .github/workflows/ci.yml (optional: separate slow job)","id":"bd-3m5.79","labels":{"cc":{"max":{}},"entries":{}},"priority":0,"status":"closed","title":"CRITICAL: disable fuzz-like proptest by default","type":"bug"}
{"_at":[1768897330774,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] OR-Set tests pass and cover edge cases\n\n**Invariants to re-verify**\n- [ ] OR-Set tests assert commutativity/idempotence\n- [ ] Dot collision rule covered","assignee":"darin@book","created_at":[1768894653468,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nWe need deterministic tests for OR-Set behavior.\n\n**Files**\n- src/core/orset.rs","design":"Add unit tests for:\n- add-wins concurrency\n- remove with ctx\n- join commutativity\n- dot collision rule","id":"bd-3zoj.14","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Tests: OR-Set semantics (add/remove/join)","type":"task"}
{"_at":[1768805118193,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1768778987654,0],"created_by":"darin@darinsmcstudio2.lan","description":"Many fixtures run  per temp repo. Use env (GIT_AUTHOR_NAME/EMAIL + GIT_COMMITTER_NAME/EMAIL or GIT_CONFIG_GLOBAL to a temp file) in test helpers so repo setup skips two git config invocations per repo. Apply in fixtures: realtime.rs, repl_rig.rs, daemon/*, cli/*","id":"bd-pt2x","labels":{"cc":{"max":{}},"entries":{}},"priority":3,"status":"closed","title":"Speed up test repo setup: avoid per-repo git config","type":"chore"}
