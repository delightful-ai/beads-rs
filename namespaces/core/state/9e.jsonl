{"_at":[1768376045284,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768178841172,1],"darin@darinsmacstudio.lan"],"claim":[[1768375809515,1],"darin@book"],"description":[[1768178841172,1],"darin@darinsmacstudio.lan"],"design":[[1768178841172,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768178841172,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768178841172,1],"darin@darinsmacstudio.lan"],"labels":[[1768178841172,1],"darin@darinsmacstudio.lan"],"priority":[[1768178841172,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768178841172,1],"darin@darinsmacstudio.lan"],"title":[[1768185433883,1],"darin@darinsmacstudio.lan"],"type":[[1768178841172,1],"darin@darinsmacstudio.lan"]},"assignee":"darin@book","assignee_at":[1768375809515,1],"assignee_expires":1768379409515,"closed_at":[1768376045284,1],"closed_by":"darin@book","created_at":[1768178841172,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nExisting users have data in legacy snapshot WAL format. Must import into new event WAL.\n\n**Context**\n- REALTIME_PLAN.md §17.1 (legacy WAL snapshot), §5.1 (rename to wal_legacy_snapshot.rs)\n\n**Design**\n- Rename src/daemon/wal.rs to src/daemon/wal_legacy_snapshot.rs\n- On store open during migration: detect legacy snapshot WAL, read it, merge into StoreState[\"core\"] namespace\n- Proceed with new event WAL thereafter\n- Keep legacy reader read-only for one release\n\n**Acceptance**\n- [ ] Legacy wal.rs renamed to wal_legacy_snapshot.rs\n- [ ] Migration detects and imports legacy snapshot\n- [ ] Data ends up in \"core\" namespace\n- [ ] Tests verify migration path\n\n**Files:** src/daemon/wal_legacy_snapshot.rs, src/daemon/store_runtime.rs, src/daemon/migration.rs (new)","id":"bd-3m5.38","labels":[],"priority":2,"status":"closed","title":"Phase 6: Legacy WAL snapshot migration import","type":"task"}
{"_at":[1768508963682,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768508260025,1],"darin@book"],"claim":[[1768508260025,1],"darin@book"],"description":[[1768508260025,1],"darin@book"],"design":[[1768508260025,1],"darin@book"],"estimated_minutes":[[1768508260025,1],"darin@book"],"external_ref":[[1768508260025,1],"darin@book"],"labels":[[1768508260025,1],"darin@book"],"priority":[[1768508260025,1],"darin@book"],"source_repo":[[1768508260025,1],"darin@book"],"title":[[1768508260025,1],"darin@book"],"type":[[1768508260025,1],"darin@book"]},"acceptance_criteria":"- [ ] No phase-named integration test files remain.\n- [ ] All integration tests compile under `tests/integration/mod.rs` as a single crate.\n- [ ] Fixtures are centralized and imported from a single module.\n- [ ] `cargo test` still discovers and runs the integration tests.","closed_at":[1768508963682,1],"closed_by":"darin@book","closed_reason":"Duplicate of bd-qrlt","created_at":[1768508260025,1],"created_by":"darin@book","description":"**Problem**\nIntegration tests live as many top-level crates in `tests/` and are named by phase (phase1/phase2/phase7), which obscures intent and makes it unclear where new integration tests should live. There isn't a single integration test entrypoint or hierarchy aligned with runtime boundaries.\n\n**Files**\n- tests/* (integration test files)\n- tests/fixtures/*\n","design":"**Design**\n- Create a single integration test crate at `tests/integration/mod.rs`.\n- Move existing integration tests into a module tree grouped by contract boundaries (core/apply, wal/fsck/index/seq, repl/*, checkpoint, admin, cli, upgrade, migration, crash_recovery, realtime_errors).\n- Move shared fixtures under `tests/integration/fixtures/` and re-export from the crate root for consistent use.\n- Update module paths/usages and remove per-file `mod fixtures;` declarations.\n- Rename file headers to remove “phase X” naming.","id":"bd-yzmj","labels":[],"priority":2,"status":"closed","title":"Reorganize integration tests into single module tree","type":"chore"}
