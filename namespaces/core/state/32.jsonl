{"_at":[1768478723640,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768454409818,1],"darin@book"],"claim":[[1768477749671,1],"darin@book"],"description":[[1768454409818,1],"darin@book"],"design":[[1768454409818,1],"darin@book"],"estimated_minutes":[[1768454409818,1],"darin@book"],"external_ref":[[1768454409818,1],"darin@book"],"labels":[[1768454409818,1],"darin@book"],"priority":[[1768454409818,1],"darin@book"],"source_repo":[[1768454409818,1],"darin@book"],"title":[[1768454409818,1],"darin@book"],"type":[[1768454409818,1],"darin@book"]},"assignee":"darin@book","assignee_at":[1768477749671,1],"assignee_expires":1768481349671,"closed_at":[1768478723640,1],"closed_by":"darin@book","created_at":[1768454409818,1],"created_by":"darin@book","description":"**Problem**\nREALTIME_PLAN §6.2 notes we should periodically run `PRAGMA wal_checkpoint(TRUNCATE)` for `wal.sqlite` to control the SQLite WAL file. There is no code path invoking `wal_checkpoint` at all.\n\n**Design**\n- Add a background/maintenance hook (e.g., in checkpoint scheduler loop or on a timer) to run `wal_checkpoint(TRUNCATE)` on wal.sqlite.\n- Make frequency configurable or piggy‑back on existing periodic tasks.\n\n**Acceptance**\n- [ ] wal_checkpoint(TRUNCATE) runs periodically.\n- [ ] Frequency is configurable or documented.\n- [ ] Tests or instrumentation confirm it triggers.\n\n**Files:** src/daemon/wal/index.rs, src/daemon/core.rs (or scheduler)","id":"bd-3m5.105","labels":[],"priority":3,"status":"closed","title":"wal.sqlite checkpoint/truncate not scheduled","type":"bug"}
{"_at":[1768435428277,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768177958315,1],"darin@darinsmacstudio.lan"],"claim":[[1768433673849,1],"darin@book"],"description":[[1768177958315,1],"darin@darinsmacstudio.lan"],"design":[[1768177958315,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768177958315,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768177958315,1],"darin@darinsmacstudio.lan"],"labels":[[1768177958315,1],"darin@darinsmacstudio.lan"],"priority":[[1768177958315,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768177958315,1],"darin@darinsmacstudio.lan"],"title":[[1768177958315,1],"darin@darinsmacstudio.lan"],"type":[[1768177958315,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] Subscribe streams events in order and closes on disconnect.\n- [ ] require_min_seen gating works and returns retryable errors on timeout.\n- [ ] Backpressure limits prevent unbounded buffering.","assignee":"darin@book","assignee_at":[1768433673849,1],"assignee_expires":1768437273849,"closed_at":[1768435428277,1],"closed_by":"darin@book","created_at":[1768177958315,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nPhase 7: implement IPC Subscribe streaming with require_min_seen gating. IPC is currently request or response only and has no streaming path.\n\n**Context**\n- REALTIME_PLAN.md §11 (local subscriptions), §16.1 (require_min_seen and timeout semantics)\n**Files:** src/daemon/ipc.rs, src/daemon/server.rs, src/daemon/broadcast.rs, src/api/mod.rs","design":"**Design**\n- Add a Subscribe request variant with namespace, require_min_seen, and wait_timeout_ms.\n- Stream EventBody bytes plus sha and prev_sha headers.\n- Use EventBroadcaster for live updates and WAL read for historical backfill.\n- If require_min_seen is not satisfied, wait up to wait_timeout_ms then return retryable error with current watermarks.","id":"bd-3m5.23","labels":[],"priority":2,"status":"closed","title":"Phase 7: IPC Subscribe streaming + require_min_seen","type":"task"}
