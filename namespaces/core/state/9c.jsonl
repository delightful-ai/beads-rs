{"_at":[1768495021369,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768494734814,1],"darin@book"],"claim":[[1768494756255,1],"darin@book"],"description":[[1768494734814,1],"darin@book"],"design":[[1768494734814,1],"darin@book"],"estimated_minutes":[[1768494734814,1],"darin@book"],"external_ref":[[1768494734814,1],"darin@book"],"labels":[[1768494734814,1],"darin@book"],"priority":[[1768494734814,1],"darin@book"],"source_repo":[[1768494734814,1],"darin@book"],"title":[[1768494734814,1],"darin@book"],"type":[[1768494734814,1],"darin@book"]},"acceptance_criteria":"- [ ] Global flags parsed and stored in Ctx\n- [ ] All read/query requests include require_min_seen/wait_timeout when flags provided\n- [ ] Subscribe uses explicit args when given, otherwise inherits global read gating","assignee":"darin@book","assignee_at":[1768494756255,1],"assignee_expires":1768498356255,"closed_at":[1768495021369,1],"closed_by":"darin@book","created_at":[1768494734814,1],"created_by":"darin@book","description":"**Problem**\nREALTIME_PLAN requires require_min_seen + wait_timeout_ms on all read/query requests. CLI only exposes these for `bd subscribe`, so read gating cannot be exercised for `bd show/list/status/ready/...`.\n\n**Design**\nAdd global CLI flags `--require-min-seen <JSON>` and `--wait-timeout-ms <MS>` and plumb them into Ctx::read_consistency for all read/query requests. Reuse the existing JSON Watermarks parser used by subscribe. Subscribe args should override global flags when provided.\n\n**Files**\n- src/cli/mod.rs\n- src/cli/commands/subscribe.rs","id":"bd-jrz","labels":[],"priority":2,"status":"closed","title":"CLI read gating flags for queries","type":"feature"}
{"_at":[1768448823419,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768444225712,1],"darin@book"],"claim":[[1768444225712,1],"darin@book"],"description":[[1768444225712,1],"darin@book"],"design":[[1768444225712,1],"darin@book"],"estimated_minutes":[[1768444225712,1],"darin@book"],"external_ref":[[1768444225712,1],"darin@book"],"labels":[[1768444225712,1],"darin@book"],"priority":[[1768444225712,1],"darin@book"],"source_repo":[[1768444225712,1],"darin@book"],"title":[[1768444225712,1],"darin@book"],"type":[[1768444225712,1],"darin@book"]},"acceptance_criteria":"- [ ] `last_heartbeat_ms` is regularly updated while the daemon holds the lock, or the field is removed.\n- [ ] Tests or logs demonstrate the heartbeat behavior.","closed_at":[1768448823419,1],"closed_by":"darin@book","closed_reason":"duplicate of bd-3m5.87","created_at":[1768444225712,1],"created_by":"darin@book","description":"**Problem**\nStore lock metadata includes `last_heartbeat_ms`, but the daemon never updates it. That makes the lock look stale even when the daemon is healthy, and it undermines the intended recovery UX.\n\n**Signals / Evidence**\n- `StoreLockMeta` contains `last_heartbeat_ms` (`src/daemon/store_lock.rs`).\n- `StoreLock::update_heartbeat` exists but is never called (no references).\n\n**Why this hurts velocity**\nOperators will get misleading diagnostics and may delete live locks. It’s also a sign of unexercised code paths.","design":"**Design**\n- Add a small periodic heartbeat in the daemon loop (e.g., every 10s) that calls `StoreLock::update_heartbeat`.\n- If we don’t want heartbeats, remove the field + method entirely to avoid lying metadata.","id":"bd-wy1","labels":[],"priority":3,"status":"closed","title":"Store lock heartbeat is never updated","type":"chore"}
