{"_at":[1768183224591,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@darinsmacstudio.lan","created_at":[1768183064475,0],"created_by":"darin@darinsmcstudio2.lan","description":"Clippy fails with too-many-arguments in store_meta::new and daemon/git helpers, plus redundant closure and needless borrow. Clean up to keep cargo clippy -D warnings green before Phase 1 continues.","id":"bd-124","labels":{"cc":{"max":{}},"entries":{}},"priority":3,"status":"closed","title":"Fix clippy warnings blocking phase 1","type":"chore"}
{"_at":[1770509530583,0],"_by":"darin@darinsmcstudio2.lan","_v":{"workflow":[[1770509530561,0],"darin@darinsmcstudio2.lan"]},"acceptance_criteria":"- [ ] Harness compiles from daemon-owned paths\n- [ ] Integration suites still pass\n- [ ] No new global-state coupling introduced","assignee":"darin@darins-Mac-Studio-2.local","created_at":[1770498236452,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nTest harness currently relies on monolithic internal paths that block extraction.","design":"Re-home daemon-internal fixtures/harness to daemon-owned module boundaries while preserving deterministic tests.","id":"bd-21eg.20","labels":{"cc":{"max":{}},"entries":{}},"notes":[{"at":[1770504939427,0],"author":"darin@darins-Mac-Studio-2.local","content":"Progress: moved repl proto schema/codec ownership into crates/beads-daemon-core (new repl::proto module) and converted beads-rs daemon repl/proto.rs into a compatibility re-export shim. This reduces fixture dependence on daemon internals and sets up direct daemon-core imports for harness modules.","id":"go-comment-bd-21eg.20-1"},{"at":[1770504983323,0],"author":"darin@darins-Mac-Studio-2.local","content":"Additional progress: integration fixtures repl_frames.rs and repl_transport.rs now import frame/proto types from beads-daemon-core instead of beads-rs daemon internals. Validated with targeted tests fixtures_repl_frames_roundtrip and fixtures_repl_transport_roundtrip.","id":"go-comment-bd-21eg.20-2"},{"at":[1770505233320,0],"author":"darin@darins-Mac-Studio-2.local","content":"More progress: daemon-core now owns repl::proto (beads-rs proto module is a re-export shim), and fixture imports in repl_frames/repl_transport now target beads-daemon-core directly. Added daemon-core test coverage validation: cargo test -p beads-daemon-core passes (44 tests).","id":"go-comment-bd-21eg.20-3"},{"at":[1770507472871,0],"author":"darin@darins-Mac-Studio-2.local","content":"Progress: moved additional integration fixture ownership toward daemon/surface boundaries. Updates include switching fixture IPC+op imports to beads_rs::surface, consuming shared polling/socket helpers from beads_daemon::test_utils, and removing fixtures/daemon_test_utils.rs shim. Verified with cargo test -p beads-rs --test integration -- daemon:: (16 pass), -- repl:: (9 pass), and -- wal::idempotency:: (2 pass). Remaining blockers are explicit missing typed boundary APIs for deep wal/store_lock/repl session internals still imported by a subset of fixtures.","id":"go-comment-bd-21eg.20-4"},{"at":[1770509530583,0],"author":"darin@darins-Mac-Studio-2.local","content":"Unblocked and completed fixture/harness boundary pass with new boundary slices closed (bd-21eg.33/.34/.35/.36).\nWhat landed:\n- Mutation fixture decoupled from daemon mutation internals.\n- Store-lock fixture decoupled from daemon::store_lock internals.\n- Repl/WAL fixtures retargeted through typed fixture boundary module (`tests/integration/fixtures/daemon_boundary.rs`) so targeted fixtures no longer import daemon internals directly.\nValidation:\n- cargo test -p beads-rs --test integration (103 pass)\n- cargo test -p beads-rs --test integration --features slow-tests -- daemon::lifecycle:: (8 pass)\n- cargo test -p beads-rs --test integration --features slow-tests -- daemon::crash_recovery:: --test-threads=1 (2 pass)\n- cargo check -p beads-rs\nAcceptance status: harness+fixtures compile and integration suites remain green with no new global-state coupling introduced.","id":"go-comment-bd-21eg.20-5"},{"at":[1770509530583,0],"author":"darin@darinsmcstudio2.lan","content":"Progress: moved repl proto schema/codec ownership into crates/beads-daemon-core (new repl::proto module) and converted beads-rs daemon repl/proto.rs into a compatibility re-export shim. This reduces fixture dependence on daemon internals and sets up direct daemon-core imports for harness modules.\n\nAdditional progress: integration fixtures repl_frames.rs and repl_transport.rs now import frame/proto types from beads-daemon-core instead of beads-rs daemon internals. Validated with targeted tests fixtures_repl_frames_roundtrip and fixtures_repl_transport_roundtrip.\n\nMore progress: daemon-core now owns repl::proto (beads-rs proto module is a re-export shim), and fixture imports in repl_frames/repl_transport now target beads-daemon-core directly. Added daemon-core test coverage validation: cargo test -p beads-daemon-core passes (44 tests).\n\nProgress: moved additional integration fixture ownership toward daemon/surface boundaries. Updates include switching fixture IPC+op imports to beads_rs::surface, consuming shared polling/socket helpers from beads_daemon::test_utils, and removing fixtures/daemon_test_utils.rs shim. Verified with cargo test -p beads-rs --test integration -- daemon:: (16 pass), -- repl:: (9 pass), and -- wal::idempotency:: (2 pass). Remaining blockers are explicit missing typed boundary APIs for deep wal/store_lock/repl session internals still imported by a subset of fixtures.\n\nUnblocked and completed fixture/harness boundary pass with new boundary slices closed (bd-21eg.33/.34/.35/.36).\nWhat landed:\n- Mutation fixture decoupled from daemon mutation internals.\n- Store-lock fixture decoupled from daemon::store_lock internals.\n- Repl/WAL fixtures retargeted through typed fixture boundary module (`tests/integration/fixtures/daemon_boundary.rs`) so targeted fixtures no longer import daemon internals directly.\nValidation:\n- cargo test -p beads-rs --test integration (103 pass)\n- cargo test -p beads-rs --test integration --features slow-tests -- daemon::lifecycle:: (8 pass)\n- cargo test -p beads-rs --test integration --features slow-tests -- daemon::crash_recovery:: --test-threads=1 (2 pass)\n- cargo check -p beads-rs\nAcceptance status: harness+fixtures compile and integration suites remain green with no new global-state coupling introduced.","id":"legacy-notes"}],"priority":2,"status":"closed","title":"Move daemon test harness and integration fixtures to daemon-owned boundaries","type":"chore"}
{"_at":[1768896077975,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- unused Path import removed\\n- cargo clippy --features slow-tests -- -D warnings passes\\n- cargo test --features slow-tests passes","assignee":"darin@book","created_at":[1768847610471,0],"created_by":"darin@darinsmcstudio2.lan","description":"tests/integration/daemon/lifecycle.rs imports Path but does not use it, causing warnings under slow-tests.","id":"bd-45pe","labels":{"cc":{"max":{}},"entries":{}},"priority":3,"status":"closed","title":"Remove unused Path import in slow-tests lifecycle","type":"chore"}
{"_at":[1769215459038,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Test: label dot collision resolved deterministically, order-independent.\\n- [ ] Test: dep dot collision resolved deterministically, order-independent.","assignee":"darin@book","created_at":[1769209838751,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nNo integration-level tests assert deterministic resolution when the same dot is used for different label/dep values.\\n\\n**Files**: src/core/orset.rs, src/core/state.rs, tests/integration/core/apply.rs","design":"**Design**\\nAdd tests for label/dep dot collisions using identical dots but different values, assert deterministic winner (lexicographic then hash tie-break) and order-independence.","id":"bd-qz97.17","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"OR-Set dot collision tests for labels/deps","type":"task"}
