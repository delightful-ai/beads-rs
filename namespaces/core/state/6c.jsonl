{"_at":[1768182968247,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1768180103172,1],"darin@darinsmacstudio.lan"],"claim":[[1768182679218,1],"darin@darinsmacstudio.lan"],"description":[[1768180103172,1],"darin@darinsmacstudio.lan"],"design":[[1768180103172,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768177707912,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768177707912,1],"darin@darinsmacstudio.lan"],"labels":[[1768177707912,1],"darin@darinsmacstudio.lan"],"priority":[[1768177707912,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768177707912,1],"darin@darinsmacstudio.lan"],"title":[[1768177707912,1],"darin@darinsmacstudio.lan"],"type":[[1768177707912,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] New identity types compile and serialize/deserialize (unit tests).\n- [ ] StoreMeta matches plan fields and roundtrips via serde.\n- [ ] StoreIdentity is used where a pair is required (no duplicated store_id/store_epoch fields).\n- [ ] cargo check passes.","closed_at":[1768182968247,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1768177707912,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nThe realtime lane needs a canonical identity basis; core currently only models ActorId/BeadId/NoteId and still keys correctness by RemoteUrl. Without StoreId/ReplicaId/TxnId/ClientRequestId/StoreEpoch/SegmentId and StoreIdentity, we cannot define stable event identity, receipts, or WAL indexing.\n\n**Context**\n- REALTIME_PLAN.md 0.1 (StoreId as correctness identity), 2.1 (identity types), 15.1 (store meta file)\n- Stateright model: beads_stateright_models/src/realtime_types_sketch.rs (section 1 Identity types, StoreIdentity)\n\n**Files:** src/core/identity.rs, src/core/store_meta.rs (new), src/core/mod.rs, src/lib.rs, Cargo.toml","design":"**Design**\n- Add newtypes: StoreId, StoreEpoch, ReplicaId, TxnId, ClientRequestId, SegmentId using uuid::Uuid and serde.\n- Add StoreIdentity { store_id, store_epoch } as a separate type so the store pair is not duplicated or passed as raw fields.\n- Add StoreMeta in src/core/store_meta.rs with fields from the plan: store_id, store_epoch, replica_id, store_format_version, wal_format_version, checkpoint_format_version, replication_protocol_version, index_schema_version, created_at_ms.\n- Expose constructors and parsing helpers, plus serde roundtrip tests for each newtype and StoreMeta.\n- Re-export new types via src/core/mod.rs and src/lib.rs, and keep ActorId/BeadId/NoteId unchanged.","id":"bd-3m5.1","labels":[],"priority":2,"status":"closed","title":"Phase 1: Core identity types + StoreMeta","type":"task"}
{"_at":[1768526585846,1],"_by":"darin@book","_v":{"acceptance_criteria":[[1768509347274,1],"darin@book"],"claim":[[1768526393782,1],"darin@book"],"description":[[1768509347274,1],"darin@book"],"design":[[1768509347274,1],"darin@book"],"estimated_minutes":[[1768509347274,1],"darin@book"],"external_ref":[[1768509347274,1],"darin@book"],"labels":[[1768509347274,1],"darin@book"],"priority":[[1768509347274,1],"darin@book"],"source_repo":[[1768509347274,1],"darin@book"],"title":[[1768509347274,1],"darin@book"],"type":[[1768509347274,1],"darin@book"]},"acceptance_criteria":"- [ ] No hardcoded WAL format constants remain in test fixtures.\\n- [ ] Fixtures compile using shared constants.\\n- [ ] cargo test --test integration passes.","assignee":"darin@book","assignee_at":[1768526393782,1],"assignee_expires":1768529993782,"closed_at":[1768526585846,1],"closed_by":"darin@book","created_at":[1768509347274,1],"created_by":"darin@book","description":"**Problem**\\n- tests/integration/fixtures/wal.rs hardcodes WAL_FORMAT_VERSION, SEGMENT_HEADER_PREFIX_LEN, FRAME_HEADER_LEN.\\n- tests/integration/fixtures/wal_corrupt.rs hardcodes FRAME_CRC_OFFSET/FRAME_HEADER_LEN.\\n- These constants encode the WAL wire format; if production changes, fixtures drift or encode invalid assumptions.\\n\\n**Files**\\n- tests/integration/fixtures/wal.rs\\n- tests/integration/fixtures/wal_corrupt.rs\\n- src/daemon/wal/* (source of truth)","design":"Expose canonical constants (or accessors) from WAL modules (e.g., frame header len/CRC offset, segment header prefix len, current WAL format version) as pub(crate) or pub for tests. Replace the fixture constants with imports. If no single const exists yet, add them where the format is defined and re-export as needed (tie into bd-rfit if versions are centralized).","id":"bd-ae2z","labels":[],"priority":2,"status":"closed","title":"Fixtures: centralize WAL frame/segment constants","type":"chore"}
