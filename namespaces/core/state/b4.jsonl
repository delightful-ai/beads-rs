{"_at":[1765832381187,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@dusk","created_at":[1765744933723,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\n`ensure_repo_fresh()` does a blocking `GitOp::Load` roundtrip on the state thread. Any slow fetch = every client request pauses. OK-ish for small repos, but a design footgun.\n\n**Design**\nMake refresh async:\n- If repo is clean and refresh TTL hit, kick off background load\n- Serve current cached state meanwhile\n- Apply refreshed state when it arrives (maybe invalidate caches)\n- Optionally: let queries request `fresh=true` when they really need it\n\n**Acceptance**\n- [ ] Slow git fetch doesnt block unrelated client requests\n- [ ] Stale reads are bounded (TTL still respected eventually)\n- [ ] Fresh flag available for queries that need it\n\n**Files:** src/daemon/mod.rs, src/daemon/query_executor.rs","id":"bd-a5v","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Blocking freshness loads stall entire daemon","type":"bug"}
{"_at":[1769216272427,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] Tests: orphan label/dep/note ops do not error on apply.\\n- [ ] Tests: after later bead creation, labels/notes/deps become visible via queries.","assignee":"darin@book","created_at":[1769209837920,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nApply should be total for label/dep/note ops even when the bead is missing; current coverage does not lock this down.\\n\\n**Files**: src/core/apply.rs, tests/integration/core/apply.rs","design":"**Design**\\nAdd integration tests that apply LabelAdd/Remove, DepAdd/Remove, and NoteAppend to missing beads, then create the bead and verify the ops become visible.","id":"bd-qz97.13","labels":{"cc":{"max":{}},"entries":{}},"priority":2,"status":"closed","title":"Apply totality: orphan label/dep/note ops before bead exists","type":"task"}
{"_at":[1768679877853,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"**Acceptance**\n- [ ] Multi-process harness exists and is reusable for new replication tests.\n- [ ] At least one slow e2e covers crash/restart + tailnet faults across processes.\n- [ ] Tests write only under ./tmp and pass with `cargo test --features slow-tests`.","assignee":"darin@book","created_at":[1768672332003,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nReplication e2e uses a single-process harness. It does not exercise OS-level process isolation, socket paths, file locks, or real daemon lifecycle races, so confidence in real deployments is incomplete.","design":"**Design**\n- Build a multi-process harness that spawns separate `bd` daemons per node with isolated runtime/data/config dirs under ./tmp.\n- Drive mutations and admin/status through IPC (no in-process shortcuts).\n- Add slow e2e scenarios: concurrent startup, crash/restart, and tailnet fault injection across processes.","id":"bd-y2u2","labels":{"cc":{"max":{}},"entries":{}},"priority":0,"status":"closed","title":"Realtime: multi-process replication e2e harness","type":"bug"}
