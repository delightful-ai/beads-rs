{"_at":[1770514338980,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@darins-Mac-Studio-2.local","created_at":[1770511153230,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nRemaining CLI commands (upgrade/store/migrate) require host-runtime integrations in beads-rs, blocking full command tree migration to beads-cli without introducing crate cycles.\\n\\n**Design**\\nDefine a typed backend trait in beads-cli for host-coupled operations (upgrade orchestration, offline store admin fallback, migrate git integration). Implement the trait in beads-rs and inject into beads-cli dispatch.\\n\\n**Acceptance**\\n- [ ] Typed backend trait defined in beads-cli (no stringly APIs)\\n- [ ] beads-rs implements trait with existing behavior\\n- [ ] No crate dependency cycle introduced\\n- [ ] cargo check --workspace passes\\n\\n**Files:** crates/beads-cli/src/*, crates/beads-rs/src/cli/*, crates/beads-rs/src/{upgrade,store_admin,git}*","id":"bd-21eg.39","labels":{"cc":{"max":{}},"entries":{}},"notes":[{"at":[1770514338751,0],"author":"darin@darins-Mac-Studio-2.local","content":"Completed: added typed host backend seam in beads-cli and implemented in beads-rs with no behavior change. Added crates/beads-cli/src/backend.rs (CliHostBackend + typed request/response types), crates/beads-rs/src/cli/backend.rs impl, injected backend into CLI context, and rewired upgrade/store/migrate handlers to use trait calls. Validation: cargo check -p beads-cli; cargo check -p beads-rs; cargo check --workspace.","id":"go-comment-bd-21eg.39-1"},{"at":[1770514338980,0],"author":"darin@darinsmcstudio2.lan","content":"Completed: added typed host backend seam in beads-cli and implemented in beads-rs with no behavior change. Added crates/beads-cli/src/backend.rs (CliHostBackend + typed request/response types), crates/beads-rs/src/cli/backend.rs impl, injected backend into CLI context, and rewired upgrade/store/migrate handlers to use trait calls. Validation: cargo check -p beads-cli; cargo check -p beads-rs; cargo check --workspace.","id":"legacy-notes"}],"priority":1,"status":"closed","title":"Add typed CLI backend trait for upgrade/store/migrate host operations","type":"task"}
{"_at":[1767995938541,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@darinsmacstudio.lan","created_at":[1765787131779,0],"created_by":"darin@darinsmcstudio2.lan","description":"The open() method uses check-then-unwrap pattern that could use entry API for cleaner code. Not a safety issue since we just inserted if not present.","id":"bd-7f3","labels":{"cc":{"max":{}},"entries":{}},"priority":4,"status":"closed","title":"git_worker.rs:78 unwrap can use entry API instead","type":"chore"}
{"_at":[1768426227863,0],"_by":"darin@darinsmcstudio2.lan","assignee":"darin@book","created_at":[1766127752358,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\nWire serialization/parsing lacks property-level coverage. Corrupted or unexpected data could silently lose fields.\n\n**Design**\nAdd proptest-based roundtrip tests:\n- serialize_state/parse_state\n- serialize_tombstones/parse_tombstones\n- serialize_deps/parse_deps\n- serialize_meta/parse_meta (including last_write_stamp optional)\nAdditionally test tolerant parsing of legacy/extra fields (if applicable).\n\n**Acceptance**\n- [ ] Roundtrip property tests added\n- [ ] Meta last_write_stamp preserved\n- [ ] Tests run fast in CI\n\n**Files:** src/git/wire.rs, Cargo.toml","id":"bd-fkg","labels":{"cc":{"max":{}},"entries":{}},"priority":1,"status":"closed","title":"Wire format roundtrip + fuzz tests","type":"bug"}
{"_at":[1769222183680,0],"_by":"darin@darinsmcstudio2.lan","acceptance_criteria":"- [ ] CRDT_OVERHAUL.md updated to reflect current wire encoding.\\n- [ ] Docs explicitly call out map vs vec and field names used in CBOR.","assignee":"darin@book","created_at":[1769210188450,0],"created_by":"darin@darinsmcstudio2.lan","description":"**Problem**\\nCRDT_OVERHAUL.md describes DVV and dot encoding shapes that differ from the current implementation (map vs vec, field names).\\n\\n**Files**: CRDT_OVERHAUL.md","design":"**Design**\\nUpdate docs to match actual on-wire encoding (CBOR/json) for WireDvvV1/WireDotV1 and any other drift discovered. Keep spec statements aligned with code to avoid future mismatches.","id":"bd-qz97.21","labels":{"cc":{"max":{}},"entries":{}},"priority":3,"status":"closed","title":"Cleanup: update CRDT_OVERHAUL.md wire format details","type":"chore"}
