{"_at":[1768290954770,1],"_by":"darin@darinsmacstudio.lan","_v":{"acceptance_criteria":[[1768195791522,1],"darin@darinsmacstudio.lan"],"claim":[[1768289722142,1],"darin@darinsmacstudio.lan"],"description":[[1768177887839,1],"darin@darinsmacstudio.lan"],"design":[[1768177887839,1],"darin@darinsmacstudio.lan"],"estimated_minutes":[[1768177887839,1],"darin@darinsmacstudio.lan"],"external_ref":[[1768177887839,1],"darin@darinsmacstudio.lan"],"labels":[[1768177887839,1],"darin@darinsmacstudio.lan"],"priority":[[1768261542613,1],"darin@darinsmacstudio.lan"],"source_repo":[[1768177887839,1],"darin@darinsmacstudio.lan"],"title":[[1768177887839,1],"darin@darinsmacstudio.lan"],"type":[[1768177887839,1],"darin@darinsmacstudio.lan"]},"acceptance_criteria":"- [ ] Broadcaster delivers events in order to subscribers and drops slow consumers when bounds exceeded.\n- [ ] Hot cache evicts by size and event count deterministically.\n- [ ] API exposes publish/subscribe with bounded channels and a drop reason.\n- [ ] Unit tests cover backpressure and eviction behavior.","assignee":"darin@darinsmacstudio.lan","assignee_at":[1768289722142,1],"assignee_expires":1768293322142,"closed_at":[1768290954770,1],"closed_by":"darin@darinsmacstudio.lan","created_at":[1768177887839,1],"created_by":"darin@darinsmacstudio.lan","description":"**Problem**\nPhase 5: add a bounded EventBroadcaster and hot cache for recently appended events. There is no pub or sub mechanism to stream events or serve fast replication reads.\n\n**Context**\n- REALTIME_PLAN.md ยง7.5 (EventBroadcaster and hot cache requirements)\n**Files:** src/daemon/broadcast.rs (new) or src/daemon/store_runtime.rs","design":"**Design**\n- Implement a broadcaster that publishes EventId, sha, prev_sha, namespace, and canonical EventBody bytes.\n- Enforce bounds by events and bytes; drop slow subscribers with ERROR(code=\"subscriber_lagged\").\n- Maintain a FIFO hot cache with deterministic eviction.\n- Integrate publish after WAL append in StoreRuntime.","id":"bd-3m5.16","labels":[],"priority":1,"status":"closed","title":"Phase 5: EventBroadcaster + hot cache","type":"task"}
